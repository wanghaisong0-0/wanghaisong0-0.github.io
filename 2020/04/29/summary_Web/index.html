<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">
<meta name="baidu-site-verification" content="s8Pe1TBqyy" />








<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="总结,Web," />





  <link rel="alternate" href="/atom.xml" title="阿松与阿妞" type="application/atom+xml" />






<meta name="description" content="摘要HTML超文本标记语言，用于编写前端页面、结构搭建，CSS专门用于美化页面，实现了样式和内容的分离，提高了显示效果和样式的复用性、降低耦合性，分工更加明确。js用于在HTML页面编写一些业务逻辑，增加互动性，操作html的DOM树，不需要提前编译，运行在浏览器。">
<meta property="og:type" content="article">
<meta property="og:title" content="Web总结">
<meta property="og:url" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/index.html">
<meta property="og:site_name" content="阿松与阿妞">
<meta property="og:description" content="摘要HTML超文本标记语言，用于编写前端页面、结构搭建，CSS专门用于美化页面，实现了样式和内容的分离，提高了显示效果和样式的复用性、降低耦合性，分工更加明确。js用于在HTML页面编写一些业务逻辑，增加互动性，操作html的DOM树，不需要提前编译，运行在浏览器。">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/image-20200502094449270.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/image-20200502100930397.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/image-20200502113627393.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/image-20200502113738095.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/image-20200502113409089.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/image-20200502114117632.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/image-20200502114212983.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/image-20200502114239148.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/image-20200502114310660.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/image-20200502114452086.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/image-20200502114514715.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/image-20200502114606395.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/image-20200502114635514.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/image-20200502114715802.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/image-20200502114740941.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/image-20200502114820218.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/image-20200502114910986.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/image-20200502115012110.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/image-20200502115039313.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586746435946.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586746803858.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586748223130.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586748144024.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586748188681.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586748442579.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586748484283.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586748571082.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586748796809.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586748889107.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586748932445.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586749040094.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586749225881.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586749491147.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586750890856.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586751086044.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586751210042.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586758259886.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586758396111.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586759633465.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586827863361.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586827999815.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586829125774.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586831283207.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586832839002.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586835525081.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586835683969.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586835899369.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586836124261.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586845454312.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586845665415.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586917471622.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586918357066.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586922329170.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586923398682.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586931106703.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586932052661.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586933024688.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1586692752466.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587090560095.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587094154857.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587096386741.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587104917173.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587105951884.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587107888754.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587107939238.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587172824573.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587180002745.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587180788021.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587190985155.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587260834422.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587261605324.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587262810025.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587262931602.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587263085478.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587267665094.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587276852998.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587277050229.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587277039412.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587432774951.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587436830957.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587440818415.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587524031438.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587527491818.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587528717096.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587612460702.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587779813977.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587781837986.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587781897020.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587781960389.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587782022814.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587782097855.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587782181537.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587782209409.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587782430403.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587782969066.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587783085177.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587785285009.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587785388952.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587786208128.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587786228205.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587786860427.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587787042487.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587787437317.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587787454818.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587787484267.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587795243681.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587795752834.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587796218744.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587796232347.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587796263253.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587796315291.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587796792807.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587796936278.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587797730474.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587798105877.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587798494835.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587868403078.png">
<meta property="og:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/1587868753719.png">
<meta property="article:published_time" content="2020-04-29T00:00:00.000Z">
<meta property="article:modified_time" content="2020-05-06T06:04:32.359Z">
<meta property="article:author" content="阿松">
<meta property="article:tag" content="总结">
<meta property="article:tag" content="Web">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/image-20200502094449270.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":true,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/"/>





  <title>Web总结 | 阿松与阿妞</title>
  








<meta name="generator" content="Hexo 4.2.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>
	<a href="https://github.com/wanghaisong0-0" target="_blank" rel="noopener">
	<img width="149" height="149" style="position: absolute;top: 0;right: 0;border: 0;" src="https://github.blog/wp-content/uploads/2008/12/forkme_right_red_aa0000.png?resize=149%2C149" class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">阿松与阿妞</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            站点地图
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="阿松">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/5.JPG">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="阿松与阿妞">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Web总结</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-04-29T08:00:00+08:00">
                2020-04-29
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Web/" itemprop="url" rel="index">
                    <span itemprop="name">Web</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2020/04/29/summary_Web/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2020/04/29/summary_Web/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2020/04/29/summary_Web/" class="leancloud_visitors" data-flag-title="Web总结">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  27.9k字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  124分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h4 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h4><p>HTML超文本标记语言，用于编写前端页面、结构搭建，CSS专门用于美化页面，实现了样式和内容的分离，提高了显示效果和样式的复用性、降低耦合性，分工更加明确。js用于在HTML页面编写一些业务逻辑，增加互动性，操作html的DOM树，不需要提前编译，运行在浏览器。</p>
<a id="more"></a>

<p>jQuery框架用于简化JS代码。</p>
<p>JSON是JS的对象表现形式，取代xml作为数据的载体，在网络中传输。</p>
<p>AJAX用于解决传统网站中存在的问题，提高用户浏览网站的体验。</p>
<p>Tomcat是web服务器的一种，用于将本地资源发布到互联网。</p>
<p>HTTP协议：超文本传输协议（Hyper Text Transfer Protocol)，规范了数据传输的格式，包含了用户请求信息<strong>request</strong>和浏览器响应信息<strong>response</strong>。</p>
<p>四大域对象：</p>
<table>
<thead>
<tr>
<th>变量名</th>
<th>真实类型</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>pageContext</td>
<td>PageContext</td>
<td>当前页面中共享数据</td>
</tr>
<tr>
<td>request</td>
<td>HttpServletRequest</td>
<td>一次请求中共享数据</td>
</tr>
<tr>
<td>session</td>
<td>HttpSession</td>
<td>一次会话中共享数据</td>
</tr>
<tr>
<td>application</td>
<td>ServletContext</td>
<td>整个web应用共享数据</td>
</tr>
</tbody></table>
<h3 id="一、HTML"><a href="#一、HTML" class="headerlink" title="一、HTML"></a>一、HTML</h3><p><strong>超文本标记语言(Hyper Text Markup Language)</strong></p>
<h4 id="1-概述"><a href="#1-概述" class="headerlink" title="1.概述"></a>1.概述</h4><h5 id="1-1-标准前端目录结构"><a href="#1-1-标准前端目录结构" class="headerlink" title="1.1 标准前端目录结构"></a>1.1 标准前端目录结构</h5><p>|– 项目名<br>            |- css 目录<br>            |- js  目录<br>            |- img 目录<br>            index.html</p>
<h5 id="1-2书写规范"><a href="#1-2书写规范" class="headerlink" title="1.2书写规范"></a>1.2书写规范</h5><ol>
<li><p>文档声明<br> 要求：必须在第一行，固定格式</p>
</li>
<li><p>标签<br> 要求：正确嵌套，正确闭合<br> 双标签</p>
<pre><code>&lt;开始&gt;&lt;/结束&gt;</code></pre><p> 单标签</p>
<pre><code>&lt;开始/&gt;</code></pre></li>
<li><p>属性<br> 要求：必须在开始标签中编写，属性值单双引都可</p>
<pre><code>&lt;开始 属性名=&quot;属性值&quot;&gt;&lt;/结束&gt;</code></pre></li>
<li><p>文本<br> 要求：在标签体内编写</p>
</li>
<li><p>注释</p>
<pre><code>&lt;!-- 注释内容 --&gt;</code></pre></li>
</ol>
<h4 id="2-常用HTML标签"><a href="#2-常用HTML标签" class="headerlink" title="2.常用HTML标签"></a>2.常用HTML标签</h4><h5 id="2-1标题"><a href="#2-1标题" class="headerlink" title="2.1标题"></a>2.1标题</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">hn</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">hn</span>&gt;</span></span></span><br><span class="line">常用属性：</span><br><span class="line"><span class="code">		    align：对齐方式</span></span><br><span class="line"><span class="code">		     取值：left（左）、center（中）、right（右）</span></span><br></pre></td></tr></table></figure>

<h5 id="2-2水平线"><a href="#2-2水平线" class="headerlink" title="2.2水平线"></a>2.2水平线</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">水平线:<span class="xml"><span class="tag">&lt;<span class="name">hr</span>/&gt;</span></span></span><br><span class="line"><span class="code">     常用属性：</span></span><br><span class="line"><span class="code">         color：颜色</span></span><br><span class="line"><span class="code">             1.英语单词，例如：红色 red</span></span><br><span class="line"><span class="code">             2.光三原色，R（0~255）G（0~255）B（0~255），通过代码6位十六进制数标识 #ff ff ff</span></span><br><span class="line"><span class="code">         width：宽度</span></span><br><span class="line"><span class="code">             1.像素 px 固定值</span></span><br><span class="line"><span class="code">             2.百分比 % ，屏幕自适应</span></span><br></pre></td></tr></table></figure>

<h5 id="2-3段落和换行标签"><a href="#2-3段落和换行标签" class="headerlink" title="2.3段落和换行标签"></a>2.3段落和换行标签</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">换行：<span class="xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line">段落：<span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="code">     特点：上下留白</span></span><br></pre></td></tr></table></figure>

<h5 id="2-3超链接"><a href="#2-3超链接" class="headerlink" title="2.3超链接"></a>2.3超链接</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">超链接：<span class="xml"><span class="tag">&lt;<span class="name">a</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="code">        常用属性：</span></span><br><span class="line"><span class="code">            href：页面跳转地址</span></span><br><span class="line"><span class="code">                1.绝对地址（外部资源）</span></span><br><span class="line"><span class="code">                    http://www.itcast.cn</span></span><br><span class="line"><span class="code">                2.相对地址（内部资源）</span></span><br><span class="line"><span class="code">                    ./（省略） 当前目录</span></span><br><span class="line"><span class="code">                    ../ 上级目录</span></span><br><span class="line"><span class="code">                    ../../ 上上级</span></span><br><span class="line"><span class="code">            target：打开方式</span></span><br><span class="line"><span class="code">                _self（默认值）：当前窗口跳转</span></span><br><span class="line"><span class="code">                _blank：打开新窗口</span></span><br></pre></td></tr></table></figure>

<h5 id="2-4图像"><a href="#2-4图像" class="headerlink" title="2.4图像"></a>2.4图像</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">图像：<span class="xml"><span class="tag">&lt;<span class="name">img</span>/&gt;</span></span></span><br><span class="line"><span class="code">        常用属性：</span></span><br><span class="line"><span class="code">            src：图片资源地址</span></span><br><span class="line"><span class="code">                相对地址</span></span><br><span class="line"><span class="code">                绝对地址</span></span><br><span class="line"><span class="code">            alt：图片资源丢失后，文字提示</span></span><br><span class="line"></span><br><span class="line"><span class="code">            width：图片宽度，特点：纵横比缩放</span></span><br><span class="line"><span class="code">                1.px像素固定值</span></span><br><span class="line"><span class="code">                2.%百分比</span></span><br><span class="line"><span class="code">            height：高度</span></span><br></pre></td></tr></table></figure>

<h5 id="2-5列表"><a href="#2-5列表" class="headerlink" title="2.5列表"></a>2.5列表</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">有序列表：<span class="xml"><span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span> orderline</span><br><span class="line">无序列表：<span class="xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span> UNorderline</span><br><span class="line"></span><br><span class="line"><span class="code">    共同的子标签：&lt;li&gt;&lt;/li&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="2-6div和span"><a href="#2-6div和span" class="headerlink" title="2.6div和span"></a>2.6div和span</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span> 和 <span class="xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span></span> 是没有语义的，它们就是一个盒子，用来装内容的，通常结合css样式实现网页布局...</span><br><span class="line"></span><br><span class="line"><span class="code">        div（块级元素）：是一个大盒子，特点：独自占用一行</span></span><br><span class="line"><span class="code">        span（行内元素）：是一个小盒子，特点：内容有多大就占用多大</span></span><br></pre></td></tr></table></figure>

<h5 id="2-7转义（实体）字符"><a href="#2-7转义（实体）字符" class="headerlink" title="2.7转义（实体）字符"></a>2.7转义（实体）字符</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">在html中有两种特殊的转义符号</span><br><span class="line"><span class="code">    1.与html语法有冲突 例如  a&lt;b&gt;c  小于号 &amp;lt;</span></span><br><span class="line"><span class="code">    2.输入法不方便输入 例如 ♥ &amp;hearts;</span></span><br><span class="line"><span class="code">    </span></span><br><span class="line"><span class="code">    半个英语字母英文空格 &amp;nbsp;</span></span><br><span class="line"><span class="code">		一个汉字中文空格  &amp;emsp;</span></span><br><span class="line"><span class="code">		小于号 &amp;lt;</span></span><br><span class="line"><span class="code">		大于号 &amp;gt;</span></span><br><span class="line"><span class="code">		&amp;符号 &amp;amp;</span></span><br></pre></td></tr></table></figure>

<h5 id="2-8基本表格"><a href="#2-8基本表格" class="headerlink" title="2.8基本表格"></a>2.8基本表格</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">table -- 表格</span><br><span class="line"><span class="code">        tr -- 行</span></span><br><span class="line"><span class="code">            td -- 普通单元格</span></span><br><span class="line"><span class="code">            th -- 列标题单元格（居中，加粗）</span></span><br><span class="line"></span><br><span class="line"><span class="code">    table常用属性</span></span><br><span class="line"><span class="code">        border：边框</span></span><br><span class="line"><span class="code">        width:宽度</span></span><br><span class="line"><span class="code">        height:高度</span></span><br><span class="line"><span class="code">        align：表格对齐方式</span></span><br><span class="line"><span class="code">            取值：left、center、right</span></span><br><span class="line"><span class="code">        cellspacing：单元格外边距，通常取值：0</span></span><br><span class="line"><span class="code">        cellpadding：单元格内边距，通常取值：0</span></span><br><span class="line"><span class="code">        bgcolor：表格背景色</span></span><br><span class="line"><span class="code">    tr常用属性</span></span><br><span class="line"><span class="code">        bgcolor：表格背景色</span></span><br><span class="line"><span class="code">        align:内容对齐方式</span></span><br><span class="line"><span class="code">        height:行高</span></span><br><span class="line"><span class="code">    td常用属性</span></span><br><span class="line"><span class="code">        bgcolor：表格背景色</span></span><br><span class="line"><span class="code">        align:内容对齐方式</span></span><br><span class="line"></span><br><span class="line">绘制一个 6行1列表格</span><br><span class="line"><span class="code">		table&gt;tr*6&gt;td   + tab 快速创建表格方式</span></span><br></pre></td></tr></table></figure>

<h5 id="2-9表格合并"><a href="#2-9表格合并" class="headerlink" title="2.9表格合并"></a>2.9表格合并</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">跨行合并：rowspan="合并行数"</span><br><span class="line">夸列合并：colspan="合并列数"</span><br></pre></td></tr></table></figure>

<h4 id="3-HTML表单"><a href="#3-HTML表单" class="headerlink" title="3.HTML表单"></a>3.HTML表单</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">表单：<span class="xml"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span>（容器）</span><br><span class="line"><span class="code">    常用属性：</span></span><br><span class="line"><span class="code">       action：表单提交服务器的地址，今天暂时使用 # （当前页面）</span></span><br><span class="line"><span class="code">       method：表单提交方式，有二种：get（默认）、post</span></span><br><span class="line"><span class="code">          get：</span></span><br><span class="line"><span class="code">              格式：提交地址?username=张三 &amp; password=999 &amp; birthday=2020-04-11</span></span><br><span class="line"><span class="code">              特点：</span></span><br><span class="line"><span class="code">                  参数在地址栏拼接，不太安全</span></span><br><span class="line"><span class="code">                  浏览器地址栏大小有限制，几KB左右</span></span><br><span class="line"><span class="code">          post：</span></span><br><span class="line"><span class="code">              格式：username=张三 &amp; password=999 &amp; birthday=2020-04-11</span></span><br><span class="line"><span class="code">              特点：</span></span><br><span class="line"><span class="code">                  参数没有在地址栏拼接，相对安全（请求体）</span></span><br><span class="line"><span class="code">                  浏览器不会对请求体做大小限制</span></span><br><span class="line"></span><br><span class="line"><span class="code">    表单项标签</span></span><br><span class="line"><span class="code">        1）文本框：&lt;input/&gt;</span></span><br><span class="line"><span class="code">            常用属性：</span></span><br><span class="line"><span class="code">                name:表单项的参数名（要想被表单提交，必须知道name的值）</span></span><br><span class="line"><span class="code">                value:表单项的值（用户输入、用户选择）</span></span><br><span class="line"><span class="code">                type:表单项类型，有很多种，不同的类型功能和展示效果也有所不同，常用：</span></span><br><span class="line"><span class="code">                    a）text 文本框（默认）</span></span><br><span class="line"><span class="code">                    b）password 密码框 特点：掩码</span></span><br><span class="line"><span class="code">                    c）date 日期选择框</span></span><br><span class="line"><span class="code">                    d）radio 单选框 特点：同一组（name的值相等）只能选择一个  checked="checked" 设置为默认选中</span></span><br><span class="line"><span class="code">                    e）checkbox 复选框 特点：同一组（name的值相等）可以选择多个 checked="checked" 设置为默认选中</span></span><br><span class="line"><span class="code">                    f）file 文件上传 特点：必须post方式</span></span><br><span class="line"><span class="code">                    g）reset 重置按钮（清空表单），特点：value属性就是按钮名称</span></span><br><span class="line"><span class="code">                    h）submit 提交按钮，特点：value属性就是按钮名称</span></span><br><span class="line"></span><br><span class="line"><span class="code">        2）下拉框：&lt;select&gt;&lt;/select&gt;</span></span><br><span class="line"><span class="code">            列表项：&lt;option&gt;&lt;/option&gt;</span></span><br><span class="line"><span class="code">                常用属性：selected="selected" 默认列表项被选中</span></span><br><span class="line"><span class="code">        3）文本域：&lt;textarea&gt;&lt;/textarea&gt;</span></span><br><span class="line"><span class="code">            常用属性：</span></span><br><span class="line"><span class="code">                rows：行高</span></span><br><span class="line"><span class="code">                cols：列宽</span></span><br></pre></td></tr></table></figure>

<h3 id="二、CSS"><a href="#二、CSS" class="headerlink" title="二、CSS"></a>二、CSS</h3><p><strong>层叠样式表（Cascading Style Sheet）</strong></p>
<p>作用：美化页面</p>
<blockquote>
<p>层叠样式: 对同一个标签添加多个不同的样式,所有样式会叠加在一起展示出效果</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">优点：</span><br><span class="line">1. 实现了样式和内容的分离，提高了显示效果和样式的复用性。</span><br><span class="line">2. 降低耦合性，分工更加明确，CSS专门用于美化，HTML专门用于结构搭建。</span><br></pre></td></tr></table></figure>

<h4 id="1-HTML引入CSS"><a href="#1-HTML引入CSS" class="headerlink" title="1.HTML引入CSS"></a>1.HTML引入CSS</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">HTML引入CSS的三种方式</span><br><span class="line"><span class="code">        1）行内样式：所有的标签都有一个共有的属性style</span></span><br><span class="line"><span class="code">            语法：&lt;h1 style="css样式"&gt;&lt;/h1&gt;</span></span><br><span class="line"><span class="code">            作用范围：当前标签</span></span><br><span class="line"><span class="code">        2）内部样式：使用style</span></span><br><span class="line"><span class="code">            语法：&lt;style type="text/css"&gt;css样式&lt;/style&gt;</span></span><br><span class="line"><span class="code">                type="text/css" 告知浏览器把解析器切换为css类型</span></span><br><span class="line"><span class="code">            作用范围：当前页面</span></span><br><span class="line"><span class="code">        3）外部样式：使用link标签引入外部css样式</span></span><br><span class="line"><span class="code">            语法：&lt;link rel="stylesheet"  href="外部css文件地址"/&gt;</span></span><br><span class="line"><span class="code">                rel="stylesheet" 告知浏览器我引入文件的类型是css样式表</span></span><br><span class="line"><span class="code">            作用范围：所有引入的html页面</span></span><br><span class="line"></span><br><span class="line"><span class="code">        css样式优先级：就近原则.....  浏览器的执行顺序自上而下</span></span><br><span class="line"><span class="code">        style标签可以在html的任意位置,推荐放在head头部</span></span><br></pre></td></tr></table></figure>

<h4 id="2-基本选择器"><a href="#2-基本选择器" class="headerlink" title="2.基本选择器"></a>2.基本选择器</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">选择器：作用选定一组特有的标签</span><br><span class="line"><span class="code">        1）标签 特点：此名称的所有标签</span></span><br><span class="line"><span class="code">            语法：标签名&#123;css样式&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="code">        2）class（类）特点：具有分组的特性</span></span><br><span class="line"><span class="code">            语法：.class&#123;css样式&#125;</span></span><br><span class="line"><span class="code">        3）id 特点：具有唯一性</span></span><br><span class="line"><span class="code">            语法：#id&#123;css样式&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="3-扩展选择器"><a href="#3-扩展选择器" class="headerlink" title="3.扩展选择器"></a>3.扩展选择器</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">扩展选择器</span><br><span class="line"><span class="code">        1）并集</span></span><br><span class="line"><span class="code">            语法：选择器1,选择器2....&#123;css样式&#125;</span></span><br><span class="line"><span class="code">        2）后代</span></span><br><span class="line"><span class="code">            语法：父 子（孙子）&#123;样式&#125;</span></span><br><span class="line"><span class="code">       3）父子</span></span><br><span class="line"><span class="code">            语法：父&gt;子&#123;css样式&#125;</span></span><br><span class="line"><span class="code">       4）属性</span></span><br><span class="line"><span class="code">            语法：选择器[属性名="属性值"]&#123;css样式&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="4-背景属性"><a href="#4-背景属性" class="headerlink" title="4.背景属性"></a>4.背景属性</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">背景属性</span><br><span class="line"><span class="code">        background-color：背景色</span></span><br><span class="line"><span class="code">        background-image：背景图片</span></span><br><span class="line"><span class="code">            取值：url('图片地址')</span></span><br><span class="line"><span class="code">       background-repeat：平铺方式</span></span><br><span class="line"><span class="code">            取值：repeat（水平和垂直）、repeat-x（水平）、repeat-y（垂直）、no-repeat（不平铺）</span></span><br><span class="line"></span><br><span class="line">   简写方式</span><br><span class="line"><span class="code">        background:color image repeat;</span></span><br></pre></td></tr></table></figure>

<h4 id="5-显示属性"><a href="#5-显示属性" class="headerlink" title="5.显示属性"></a>5.显示属性</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">显示属性：display</span><br><span class="line"><span class="code">        1）inline：将标签改为行内元素</span></span><br><span class="line"><span class="code">        2）block：将标签改为块级元素</span></span><br><span class="line"><span class="code">        3）none：隐藏此标签</span></span><br></pre></td></tr></table></figure>

<h4 id="6-浮动属性"><a href="#6-浮动属性" class="headerlink" title="6.浮动属性"></a>6.浮动属性</h4><p><strong>打破常规，让div也能变小（实际大小跟 宽和高）</strong></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">浮动：float</span><br><span class="line"><span class="code">        取值：left、right</span></span><br><span class="line"><span class="code">    清除浮动：clear</span></span><br><span class="line"><span class="code">        取值：both</span></span><br><span class="line"><span class="code">        </span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span> <span class="attr">id</span>=<span class="string">"long"</span>&gt;</span></span>左青龙<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span> <span class="attr">id</span>=<span class="string">"hu"</span>&gt;</span></span>右白虎<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"clear: both"</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span></span>最后砍成米老鼠<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h4 id="7-盒子模型"><a href="#7-盒子模型" class="headerlink" title="7.盒子模型"></a>7.盒子模型</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">盒子模型</span><br><span class="line"><span class="code">        1）宽和高</span></span><br><span class="line"><span class="code">            width：300px</span></span><br><span class="line"><span class="code">            height：300px</span></span><br><span class="line"><span class="code">        2）边框</span></span><br><span class="line"><span class="code">            border：宽度 类型 颜色</span></span><br><span class="line"><span class="code">                类型：solid 单线、double 双线、dashed 虚线</span></span><br><span class="line"><span class="code">        3）内边距</span></span><br><span class="line"><span class="code">            padding-top 上</span></span><br><span class="line"><span class="code">            padding-right 右</span></span><br><span class="line"><span class="code">            padding-bottom 下</span></span><br><span class="line"><span class="code">            padding-left 左</span></span><br><span class="line"><span class="code">            简写：padding: 上右下左</span></span><br><span class="line"><span class="code">        4）外边距</span></span><br><span class="line"><span class="code">            margin-top 上</span></span><br><span class="line"><span class="code">            margin-right 右</span></span><br><span class="line"><span class="code">            margin-bottom 下</span></span><br><span class="line"><span class="code">            margin-left 左</span></span><br><span class="line"><span class="code">            简写：margin：上右下左</span></span><br><span class="line"><span class="code">            特殊：margin:auto 水平居中</span></span><br><span class="line"></span><br><span class="line"><span class="code">        5）盒子类型</span></span><br><span class="line"><span class="code">            box-sizing：content-box（默认）  盒子大小（宽和高+内边距+边框） ，计算起来就比较麻烦</span></span><br><span class="line"><span class="code">            box-sizing：border-box 盒子大小（宽和高）包含（内边距和边框），计算方法就比较简单了</span></span><br></pre></td></tr></table></figure>

<h3 id="三、JavaScript"><a href="#三、JavaScript" class="headerlink" title="三、JavaScript"></a>三、JavaScript</h3><p><strong>JavaScript特点</strong></p>
<ol>
<li><p>js源码不需要编译，浏览器可以直接解释运行</p>
</li>
<li><p>js是弱类型语言，js变量声明不需要指明类型</p>
<p><strong>JavaScript组成</strong></p>
</li>
</ol>
<table>
<thead>
<tr>
<th><strong>组成部分</strong></th>
<th><strong>作用</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>ECMA Script</strong></td>
<td>构成了JS核心的语法基础</td>
</tr>
<tr>
<td><strong>BOM</strong></td>
<td>Browser Object Model 浏览器对象模型，用来操作浏览器上的对象</td>
</tr>
<tr>
<td><strong>DOM</strong></td>
<td>Document Object Model 文档对象模型，用来操作网页中的元素（标签）</td>
</tr>
</tbody></table>
<h4 id="1-HTML引入JS"><a href="#1-HTML引入JS" class="headerlink" title="1.HTML引入JS"></a>1.HTML引入JS</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">HTML引入js的二种方式</span><br><span class="line"><span class="code">        1）内部脚本</span></span><br><span class="line"><span class="code">            语法：&lt;script type="text/javascript"&gt;js代码&lt;/script&gt;</span></span><br><span class="line"><span class="code">        2）外部脚本</span></span><br><span class="line"><span class="code">            语法：&lt;script src="外部js文件地址"&gt;&lt;/script&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="code">        补充：script标签可以在页面任意位置，推荐放在body尾部... 页面顺序：css、html、js</span></span><br><span class="line"><span class="code">        经验值：</span></span><br><span class="line"><span class="code">            1）script标签不能自闭合</span></span><br><span class="line"><span class="code">            2）如果script标签使用src属性，那么浏览器将不会解析此标签体的js代码...</span></span><br></pre></td></tr></table></figure>

<h4 id="2-JS三种输出方式"><a href="#2-JS三种输出方式" class="headerlink" title="2.JS三种输出方式"></a>2.JS三种输出方式</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="comment">&lt;!--</span></span></span><br><span class="line"><span class="xml">JS三种输出方式</span></span><br><span class="line"><span class="xml">	1. 浏览器弹框输出字符</span></span><br><span class="line"><span class="xml">	2. 输出html内容到页面</span></span><br><span class="line"><span class="xml">	3. 输出到浏览器控制台</span></span><br><span class="line"><span class="xml"> --&gt;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="code">    // 1. 浏览器弹框输出字符</span></span><br><span class="line"><span class="code">    alert('浏览器弹框输出字符');</span></span><br><span class="line"><span class="code">    // 2. 输出html内容到页面</span></span><br><span class="line"><span class="code">    document.write('输出html内容到页面')</span></span><br><span class="line"><span class="code">    // 3. 输出到浏览器控制台</span></span><br><span class="line"><span class="code">    console.log('输出到浏览器控制台')</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h4 id="3-JS变量声明"><a href="#3-JS变量声明" class="headerlink" title="3.JS变量声明"></a>3.JS变量声明</h4><p>ECMAScript6之前所有的遍历声明使用var就可以了<br>        es6之后 开始推出 let 声明变量，const 声明常量</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// 字符串：String str = "用心做教育";</span><br><span class="line">  let str = "用心做教育";</span><br><span class="line">  console.log(str);</span><br><span class="line">  // 整型：int i = 1314;</span><br><span class="line">  let i = 1314;</span><br><span class="line">  console.log(i);</span><br><span class="line">  // 浮点型：double d = 521.1314;</span><br><span class="line">  let d = 521.1314;</span><br><span class="line">  console.log(d);</span><br><span class="line">  // 常量：final Integer PI = 3.14;</span><br><span class="line">  const  PI =3.14;</span><br><span class="line">  console.log(PI);</span><br><span class="line">  // 布尔：boolean b = true;</span><br><span class="line">  let b = true;</span><br><span class="line">  console.log(b);</span><br></pre></td></tr></table></figure>

<h4 id="4-JS数据类型"><a href="#4-JS数据类型" class="headerlink" title="4.JS数据类型"></a>4.JS数据类型</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">基本数据类型</span><br><span class="line"><span class="code">        1.number 数值（整型、浮点）</span></span><br><span class="line"><span class="code">        2.string 字符串 （单引号、双引号） 在js中没有字符的概念，都是字符串...</span></span><br><span class="line"><span class="code">        3.boolean 布尔（true、false）</span></span><br><span class="line"><span class="code">        4.undefined 未定义；例如：let a;</span></span><br><span class="line"></span><br><span class="line"><span class="code">    引用数据类型</span></span><br><span class="line"><span class="code">        let obj = new Object();</span></span><br><span class="line"><span class="code">        let date = new Date();</span></span><br><span class="line"></span><br><span class="line"><span class="code">    判断变量的数据类型</span></span><br><span class="line"><span class="code">        语法：typeof 变量名</span></span><br></pre></td></tr></table></figure>

<h4 id="5-JS运算符"><a href="#5-JS运算符" class="headerlink" title="5.JS运算符"></a>5.JS运算符</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>算数运算符</span><br><span class="line"><span class="bullet">		+ </span>- * / % ++ --</span><br><span class="line"><span class="bullet">2. </span>赋值运算符</span><br><span class="line"><span class="code">		= += -= *= /=</span></span><br><span class="line"><span class="bullet">3. </span>比较运算符</span><br><span class="line"><span class="code">		&gt; &lt; ==(===) !=(!==)</span></span><br><span class="line"><span class="bullet">4. </span>逻辑运算符</span><br><span class="line"><span class="code">		&amp;&amp; ||  !</span></span><br><span class="line"><span class="bullet">5. </span>三元（目）运算符</span><br><span class="line"><span class="code">		条件表达式？为真:为假</span></span><br></pre></td></tr></table></figure>

<p><strong>关注js与java区别的运算符</strong></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="code">    // 算数运算符</span></span><br><span class="line"><span class="code">    // 在js中数值可与字符串进行数学运算，底层实现隐式转换</span></span><br><span class="line"><span class="code">    let a = 10; // number</span></span><br><span class="line"><span class="code">    let b = '4'; // string</span></span><br><span class="line"><span class="code">    console.log(a + b); // 104 字符串拼接</span></span><br><span class="line"><span class="code">    console.log(a - b); // 6</span></span><br><span class="line"><span class="code">    console.log(a * b); // 40</span></span><br><span class="line"><span class="code">    console.log(a / b); // 2.5 保留小数位</span></span><br><span class="line"></span><br><span class="line"><span class="code">    // 比较运算符</span></span><br><span class="line"><span class="code">    let c = '10'; // string</span></span><br><span class="line"><span class="code">    console.log(a == c); // true  比较的是内容</span></span><br><span class="line"><span class="code">    console.log(a === c); //  false  比较类型+内容</span></span><br><span class="line"></span><br><span class="line"><span class="code">    // !=  比较的是内容</span></span><br><span class="line"><span class="code">    // !== 比较类型+内容</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h4 id="6-JS流程控制"><a href="#6-JS流程控制" class="headerlink" title="6.JS流程控制"></a>6.JS流程控制</h4><p>高级语言中的三种基本结构：顺序、分支、循环 </p>
<h5 id="1-条件判断"><a href="#1-条件判断" class="headerlink" title="1.条件判断"></a>1.条件判断</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>if判断</span><br><span class="line"><span class="code">		if (条件表达式) &#123;</span></span><br><span class="line"><span class="code">            代码块;</span></span><br><span class="line"><span class="code">        &#125; else if(条件表达式) &#123;</span></span><br><span class="line"><span class="code">            代码块;</span></span><br><span class="line"><span class="code">        &#125; else &#123;</span></span><br><span class="line"><span class="code">            代码块;</span></span><br><span class="line"><span class="code">        &#125;</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">2. </span>switch判断	</span><br><span class="line"><span class="code">		switch(条件表达式)&#123;</span></span><br><span class="line"><span class="code">            case 满足条件1 :</span></span><br><span class="line"><span class="code">            	代码块 break;</span></span><br><span class="line"><span class="code">            case 满足条件2 :</span></span><br><span class="line"><span class="code">            	代码块 break;</span></span><br><span class="line"><span class="code">            default:</span></span><br><span class="line"><span class="code">            	默认代码块;</span></span><br><span class="line"><span class="code">		&#125;</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line">条件表达式</span><br><span class="line"><span class="code">            1）布尔型</span></span><br><span class="line"><span class="code">            2）数值型：非0为真</span></span><br><span class="line"><span class="code">            3）字符串：非空串为真</span></span><br><span class="line"><span class="code">            4）变量：null 和 undefined 都为假</span></span><br></pre></td></tr></table></figure>

<h5 id="2-循环语句"><a href="#2-循环语句" class="headerlink" title="2.循环语句"></a>2.循环语句</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>普通for循环</span><br><span class="line"><span class="code">		for(let i= 0; i&lt;10; i++)&#123;</span></span><br><span class="line"><span class="code">    		需要执行的代码;</span></span><br><span class="line"><span class="code">		&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">2. </span>增强for循环</span><br><span class="line"><span class="code">		for(let obj of array)&#123;</span></span><br><span class="line"><span class="code">            需要执行的代码;</span></span><br><span class="line"><span class="code">		&#125;</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">3. </span>索引for循环</span><br><span class="line"><span class="code">		for(let index in array)&#123;</span></span><br><span class="line"><span class="code">            需要执行的代码;</span></span><br><span class="line"><span class="code">		&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">4. </span>while循环</span><br><span class="line"><span class="code">		while (条件表达式) &#123;</span></span><br><span class="line"><span class="code">			需要执行的代码;</span></span><br><span class="line"><span class="code">		&#125;</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">5. </span>do..while循环</span><br><span class="line"><span class="code">		do&#123;</span></span><br><span class="line"><span class="code">            需要执行的代码;</span></span><br><span class="line"><span class="code">		&#125;while(条件表达式);</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">6. </span>break和continue</span><br><span class="line"><span class="code">		break: 跳出整个循环</span></span><br><span class="line"><span class="code">		continue：跳出本次循环</span></span><br></pre></td></tr></table></figure>

<h4 id="7-js函数"><a href="#7-js函数" class="headerlink" title="7.js函数"></a>7.js函数</h4><h5 id="1-普通函数"><a href="#1-普通函数" class="headerlink" title="1.普通函数"></a>1.普通函数</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> 函数名(<span class="params">参数列表</span>)</span>&#123;</span><br><span class="line">    函数体;</span><br><span class="line">    [<span class="keyword">return</span> 返回值;] <span class="comment">// 中括号意思表示内容可以省略....</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//js不支持方法重载，重名的会被覆盖....</span></span><br></pre></td></tr></table></figure>

<h5 id="2-匿名函数"><a href="#2-匿名函数" class="headerlink" title="2.匿名函数"></a>2.匿名函数</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> (<span class="params">参数列表</span>)</span>&#123;</span><br><span class="line">    函数体;</span><br><span class="line">    [<span class="keyword">return</span> 返回值;] <span class="comment">// 中括号意思表示内容可以省略....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="8-js事件"><a href="#8-js事件" class="headerlink" title="8.js事件"></a>8.js事件</h4><h5 id="1-常用事件"><a href="#1-常用事件" class="headerlink" title="1.常用事件"></a>1.常用事件</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>点击事件：</span><br><span class="line"><span class="bullet">        1. </span>onclick：单击事件</span><br><span class="line"><span class="bullet">        2. </span>ondblclick：双击事件</span><br><span class="line"><span class="code">        </span></span><br><span class="line"><span class="bullet">2. </span>焦点事件</span><br><span class="line"><span class="bullet">        1. </span>onblur：失去焦点</span><br><span class="line"><span class="bullet">        2. </span>onfocus:元素获得焦点。</span><br><span class="line"></span><br><span class="line"><span class="bullet">3. </span>加载事件：</span><br><span class="line"><span class="bullet">        1. </span>onload：页面加载完成后立即发生。</span><br><span class="line"></span><br><span class="line"><span class="bullet">4. </span>鼠标事件：</span><br><span class="line"><span class="bullet">        1. </span>onmousedown	鼠标按钮被按下。</span><br><span class="line"><span class="bullet">        2. </span>onmouseup	鼠标按键被松开。</span><br><span class="line"><span class="bullet">        3. </span>onmousemove	鼠标被移动。</span><br><span class="line"><span class="bullet">        4. </span>onmouseover	鼠标移到某元素之上。</span><br><span class="line"><span class="bullet">        5. </span>onmouseout	鼠标从某元素移开。</span><br><span class="line"><span class="code">        </span></span><br><span class="line"><span class="bullet">5. </span>键盘事件：</span><br><span class="line"><span class="bullet">		1. </span>onkeydown	某个键盘按键被按下。	</span><br><span class="line"><span class="bullet">		2. </span>onkeyup		某个键盘按键被松开。</span><br><span class="line"><span class="bullet">		3. </span>onkeypress	某个键盘按键被按下并松开。</span><br><span class="line"></span><br><span class="line"><span class="bullet">6. </span>改变事件</span><br><span class="line"><span class="bullet">        1. </span>onchange	域的内容被改变。</span><br><span class="line"></span><br><span class="line"><span class="bullet">7. </span>表单事件：</span><br><span class="line"><span class="bullet">        1. </span>onsubmit	提交按钮被点击。</span><br></pre></td></tr></table></figure>

<h5 id="2-事件绑定"><a href="#2-事件绑定" class="headerlink" title="2.事件绑定"></a>2.事件绑定</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"普通函数"</span> <span class="attr">onclick</span>=<span class="string">"show()"</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"匿名函数"</span> <span class="attr">id</span>=<span class="string">"myBtn"</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 单击事件</span></span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 普通函数 此种方案有耦合性....</span></span></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        alert(<span class="string">'我是普通函数触发的事件...'</span>)</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="comment">// 匿名函数</span></span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 通过dom技术获得按钮标签的js对象</span></span></span><br><span class="line">   /* let myBtn = document.getElementById('myBtn');</span><br><span class="line"><span class="actionscript">    myBtn.onclick=<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        alert(<span class="string">'我是匿名函数触发的事件...'</span>)</span></span><br><span class="line">    &#125;*/</span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.getElementById(<span class="string">'myBtn'</span>).onclick=<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">// 链式编程...</span></span></span><br><span class="line"><span class="actionscript">        alert(<span class="string">'我是匿名函数触发的事件...'</span>);</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="9-js常用内置对象"><a href="#9-js常用内置对象" class="headerlink" title="9.js常用内置对象"></a>9.js常用内置对象</h4><h5 id="1-String"><a href="#1-String" class="headerlink" title="1.String"></a>1.String</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>构造字符串对象可以使用</span><br><span class="line"><span class="code">    双引号,单引号,反引号</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">2. </span>字符串常用方法</span><br><span class="line"><span class="code">    substring(startIndex,endIndex) 提取字符串中两个指定的索引号之间的字符。  包头不包尾</span></span><br><span class="line"><span class="code">    toLowerCase() 把字符串转换为小写。</span></span><br><span class="line"><span class="code">    toUpperCase() 把字符串转换为大写。</span></span><br><span class="line"><span class="code">    split() 把字符串分割为字符串数组。</span></span><br><span class="line"><span class="code">    trim() 去掉首尾空格</span></span><br></pre></td></tr></table></figure>

<h5 id="2-Array-对象"><a href="#2-Array-对象" class="headerlink" title="2. Array 对象"></a>2. Array 对象</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">数组</span><br><span class="line"><span class="code">    查询手册完成:</span></span><br><span class="line"><span class="bullet">        1. </span>创建数组</span><br><span class="line"><span class="code">            let array = [元素1，元素2，元素3];  -- 推荐</span></span><br><span class="line"><span class="code">            let array = new Array(元素1，元素2，元素3);</span></span><br><span class="line"></span><br><span class="line"><span class="code">            特点：数组元素的类型任意，数组的长度任意，当做java的list集合</span></span><br><span class="line"><span class="bullet">       2. </span>数组常用方法</span><br><span class="line"><span class="code">            concat() 连接两个或更多的数组，并返回结果。</span></span><br><span class="line"><span class="code">            push() 向数组的末尾添加一个或更多元素，并返回新的长度。</span></span><br><span class="line"><span class="code">            pop() 删除并返回数组的最后一个元素</span></span><br><span class="line"><span class="code">            join() 把数组的所有元素放入一个字符串。元素通过指定的分隔符进行分隔。</span></span><br><span class="line"><span class="code">                与 字符串.split()切割为数组 方法相反</span></span><br><span class="line"><span class="code">            sort() 对数组的元素进行排序</span></span><br></pre></td></tr></table></figure>

<h5 id="3-Date对象"><a href="#3-Date对象" class="headerlink" title="3.Date对象"></a>3.Date对象</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    日期</span></span><br><span class="line"><span class="comment">        let date = new Date();</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>();</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(date);</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(date.toLocaleString()); <span class="comment">// 转换为本地日期格式的字符串</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(date.getFullYear()); <span class="comment">// 年 四位</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(date.getMonth()+<span class="number">1</span>);<span class="comment">// 月 范围：0~11</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(date.getDate()); <span class="comment">// 日</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(date.getTime()); <span class="comment">// 1970年~今毫秒值</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="4-Math对象"><a href="#4-Math对象" class="headerlink" title="4.Math对象"></a>4.Math对象</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="comment">&lt;!--</span></span></span><br><span class="line"><span class="xml">数学运算</span></span><br><span class="line"><span class="xml">    查询手册完成</span></span><br><span class="line"><span class="xml">    1. 四舍五入 round()</span></span><br><span class="line"><span class="xml">    2. 向下取整 floor()</span></span><br><span class="line"><span class="xml">    3. 向上取整 ceil()</span></span><br><span class="line"><span class="xml">    4. 产生随机数 random() ：返回 [0,1) 之间的随机数。 [0,1) 左闭右开区间,包含0不包含1 （含头不含尾）</span></span><br><span class="line"><span class="xml">--&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="5-全局函数"><a href="#5-全局函数" class="headerlink" title="5.全局函数"></a>5.全局函数</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">全局函数</span><br><span class="line"><span class="bullet">    1. </span>字符串转为数字</span><br><span class="line"><span class="code">        parseInt() 解析一个字符串并返回一个整数。</span></span><br><span class="line"><span class="code">        parseFloat() 解析一个字符串并返回一个浮点数。</span></span><br><span class="line"><span class="code">            特点：从第一个字符开始转换，遇到非数值字符停止转换....</span></span><br><span class="line"><span class="code">            NaN  not a number 这不是一个数  （这哥们六亲不认）</span></span><br><span class="line"><span class="code">        isNaN()  判断一个字符串  如果不是数值返回true 否则返回false</span></span><br><span class="line"><span class="bullet">    2. </span>对字符串编码和解码</span><br><span class="line"><span class="code">        encodeURI() 把字符串编码为 URI。</span></span><br><span class="line"><span class="code">        decodeURI() 解码某个编码的 URI 。</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">    3. </span>把字符串当做js表达式来执行</span><br><span class="line"><span class="code">        eval() 计算 JavaScript 字符串，并把它作为脚本代码来执行。</span></span><br></pre></td></tr></table></figure>

<h4 id="10-BOM对象"><a href="#10-BOM对象" class="headerlink" title="10.BOM对象"></a>10.BOM对象</h4><p><strong>浏览器对象模型（Browser Object Model ）</strong></p>
<h5 id="1-三种弹框方式"><a href="#1-三种弹框方式" class="headerlink" title="1.三种弹框方式"></a>1.三种弹框方式</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>警告框：提示信息</span><br><span class="line"><span class="code">		alert()</span></span><br><span class="line"><span class="bullet">2. </span>确认框：确认信息</span><br><span class="line"><span class="code">		confirm()</span></span><br><span class="line"><span class="bullet">3. </span>输入框：输入信息</span><br><span class="line"><span class="code">		prompt()</span></span><br></pre></td></tr></table></figure>

<h5 id="2-二种定时器方式"><a href="#2-二种定时器方式" class="headerlink" title="2.二种定时器方式"></a>2.二种定时器方式</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">JS两个定时器</span><br><span class="line"><span class="code">        1）一次性定时器</span></span><br><span class="line"><span class="code">            创建：let 定时器对象 = setTimeout('函数()',毫秒);</span></span><br><span class="line"><span class="code">            关闭：clearTimeout(定时器对象)</span></span><br><span class="line"></span><br><span class="line"><span class="code">        2）循环性定时器</span></span><br><span class="line"><span class="code">            创建：let 定时器对象 = setInterval(函数,毫秒);</span></span><br><span class="line"><span class="code">            关闭：clearInterval(定时器对象);</span></span><br></pre></td></tr></table></figure>

<h5 id="3-Location对象"><a href="#3-Location对象" class="headerlink" title="3.Location对象"></a>3.Location对象</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">location地址</span><br><span class="line"><span class="code">    1）获取当前窗口地址</span></span><br><span class="line"><span class="code">        location.href</span></span><br><span class="line"></span><br><span class="line"><span class="code">    2）刷新当前页面</span></span><br><span class="line"><span class="code">        location.reload()</span></span><br><span class="line"></span><br><span class="line"><span class="code">    3）跳转页面（重点）</span></span><br><span class="line"><span class="code">        location.href='新页面地址'</span></span><br></pre></td></tr></table></figure>

<h4 id="11-DOM对象"><a href="#11-DOM对象" class="headerlink" title="11.DOM对象"></a>11.DOM对象</h4><p><strong>文档对象模型（Document Object Model）</strong></p>
<h5 id="1-DOM获取元素"><a href="#1-DOM获取元素" class="headerlink" title="1.DOM获取元素"></a>1.DOM获取元素</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>第一种：es6之前获取方式</span><br><span class="line"><span class="code">	1）获取一个</span></span><br><span class="line"><span class="code">		document.getElementById(id属性值)</span></span><br><span class="line"><span class="code">	2）获取多个（了解）</span></span><br><span class="line"><span class="code">		document.getElementsByTagName(标签名)	根据标签名获取，返回数组对象</span></span><br><span class="line"><span class="code">		document.getElementsByClassName(class属性值)	根据class属性获取，返回数组对象</span></span><br><span class="line"><span class="code">		document.getElementsByName(name属性值)  根据name属性获取，返回数组对象</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">* </span>第二种：es6可根据CSS选择器获取</span><br><span class="line"><span class="code">	1）获取一个</span></span><br><span class="line"><span class="code">		document.querySelector(id选择器)</span></span><br><span class="line"><span class="code">	2）获取多个</span></span><br><span class="line"><span class="code">		document.querySelectorAll(css选择器)</span></span><br><span class="line"><span class="code">        	标签</span></span><br><span class="line"><span class="code">        	class</span></span><br><span class="line"><span class="code">        	属性</span></span><br><span class="line"><span class="code">        	后代</span></span><br><span class="line"><span class="code">        	并集</span></span><br><span class="line"><span class="code">        	父子</span></span><br><span class="line"><span class="code">        	....</span></span><br></pre></td></tr></table></figure>

<h5 id="2-DOM操作内容"><a href="#2-DOM操作内容" class="headerlink" title="2.DOM操作内容"></a>2.DOM操作内容</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>获取或者修改元素（标签）的纯文本内容</span><br><span class="line"><span class="code">	语法：</span></span><br><span class="line"><span class="code">		js对象.innerText; </span></span><br><span class="line"></span><br><span class="line"><span class="bullet">2. </span>获取或者修改元素的html超文本内容</span><br><span class="line"><span class="code">	语法：</span></span><br><span class="line"><span class="code">		js对象.innerHTML; </span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">3. </span>获取或者修改包含自身的html内容（了解）</span><br><span class="line"><span class="code">	语法：</span></span><br><span class="line"><span class="code">		js对象.outerHTML;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"myDiv"</span>&gt;</span>程序猿最讨厌的四件事：<span class="tag">&lt;<span class="name">br</span>&gt;</span>写注释、写文档……<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> myDiv = <span class="built_in">document</span>.getElementById(<span class="string">'myDiv'</span>);</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 1.innerText操作div内容</span></span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 1.1 获取纯文本</span></span></span><br><span class="line"><span class="actionscript">    <span class="comment">// console.log(myDiv.innerText);</span></span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 1.2 设置纯文本</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">    // myDiv.innerText='<span class="tag">&lt;<span class="name">h1</span>&gt;</span>别人不写注释，别人不写文档<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>'; // 覆盖</span></span></span><br><span class="line"><span class="actionscript">    <span class="comment">// myDiv.innerText+='别人不写注释，别人不写文档'; // 追加</span></span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="comment">// 2.innerHTML操作div内容</span></span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 2.1 获取超文本内容</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(myDiv.innerHTML);</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 2.2 设置超文本</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">    // myDiv.innerHTML='<span class="tag">&lt;<span class="name">h1</span>&gt;</span>别人不写注释，别人不写文档<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>'; // 覆盖</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">    //  myDiv.innerHTML+='<span class="tag">&lt;<span class="name">h1</span>&gt;</span>别人不写注释，别人不写文档<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>'; // 追加</span></span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="comment">// 3.outerHTML操作div （扩展）</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">    myDiv.outerHTML = '<span class="tag">&lt;<span class="name">p</span>&gt;</span>我摇身一变，成了小P<span class="tag">&lt;/<span class="name">p</span>&gt;</span>';</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="3-DOM操作属性"><a href="#3-DOM操作属性" class="headerlink" title="3.DOM操作属性"></a>3.DOM操作属性</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>获取文本框的值,单选框或复选框的选中状态</span><br><span class="line"><span class="code">	语法: </span></span><br><span class="line"><span class="code">		js对象.属性名 获取属性值</span></span><br><span class="line"><span class="code">		js对象.属性名='新属性值'</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">2. </span>给元素设置自定义属性（了解）</span><br><span class="line"><span class="code">	语法: </span></span><br><span class="line"><span class="code">		js对象.setAttribute(属性名,属性值) </span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">2. </span>获取元素的自定义属性值（了解）</span><br><span class="line"><span class="code">	语法: </span></span><br><span class="line"><span class="code">		js对象.getAttribute(属性名) </span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">4. </span>移除元素的自定义属性（了解）</span><br><span class="line"><span class="code">	语法: </span></span><br><span class="line"><span class="code">		js对象.removeAttribute(属性名)</span></span><br></pre></td></tr></table></figure>

<h5 id="4-DOM操作样式"><a href="#4-DOM操作样式" class="headerlink" title="4.DOM操作样式"></a>4.DOM操作样式</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>设置一个css样式【会用】</span><br><span class="line"><span class="code">	语法: </span></span><br><span class="line"><span class="code">		js对象.style.样式名='样式值'</span></span><br><span class="line"><span class="code">			特点：样式名按照驼峰式命名</span></span><br><span class="line"><span class="code">				css格式：font-size</span></span><br><span class="line"><span class="code">				js格式：fontSize</span></span><br><span class="line"><span class="code">				</span></span><br><span class="line"><span class="bullet">2. </span>批量设置css样式（了解）</span><br><span class="line"><span class="code">	语法: </span></span><br><span class="line"><span class="code">		js对象.style.cssText='css样式字符串'</span></span><br><span class="line"><span class="code">			缺点：让开发者痛苦，有耦合性</span></span><br><span class="line"><span class="code">			</span></span><br><span class="line"><span class="bullet">3. </span>通过class设置样式【重点】</span><br><span class="line"><span class="code">	语法: </span></span><br><span class="line"><span class="code">		js对象.className='class选择器名'</span></span><br><span class="line"><span class="code">			特点：解耦</span></span><br><span class="line"><span class="code">			</span></span><br><span class="line">// 1. 设置一个css样式</span><br><span class="line"><span class="code">    p1.style.backgroundColor='black';</span></span><br><span class="line"><span class="code">    p1.style.color='white';</span></span><br><span class="line"></span><br><span class="line"><span class="code">    // 2. 批量设置css样式</span></span><br><span class="line"><span class="code">    p2.style.cssText='border:1px solid red;font-size:20px;';</span></span><br><span class="line"></span><br><span class="line"><span class="code">    // 3. 通过class设置样式</span></span><br><span class="line"><span class="code">    p3.className='mp mpp'; // 注意不要画蛇添足：不要给我加. class="mp mpp"</span></span><br></pre></td></tr></table></figure>

<h5 id="5-DOM操作元素（标签）"><a href="#5-DOM操作元素（标签）" class="headerlink" title="5.DOM操作元素（标签）"></a>5.DOM操作元素（标签）</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>创建一个标签对象</span><br><span class="line"><span class="code">	语法：</span></span><br><span class="line"><span class="code">		document.createElement(标签名称)</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">2. </span>给父标签添加一个子标签</span><br><span class="line"><span class="code">	语法：</span></span><br><span class="line"><span class="code">		父标签对象.appendChild(子标签对象)</span></span><br></pre></td></tr></table></figure>

<h5 id="6-正则表达式"><a href="#6-正则表达式" class="headerlink" title="6.正则表达式"></a>6.正则表达式</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">在js中使用正则表达式</span><br><span class="line"><span class="code">	1.创建方式</span></span><br><span class="line"><span class="code">		1）let rege = new RegExp(“正则表达式字符串”);</span></span><br><span class="line"><span class="code">		2）let rege = /正则表达式/;</span></span><br><span class="line"><span class="code">        </span></span><br><span class="line"><span class="code">	2.验证方法</span></span><br><span class="line"><span class="code">		1）正则对象.test(字符串)</span></span><br><span class="line"><span class="code">			符合正则规则就返回true，否则false</span></span><br><span class="line"><span class="code">		2）字符串对象.match(正则对象)</span></span><br><span class="line"><span class="code">			返回字符串中符合正则规则的内容。</span></span><br><span class="line"><span class="code">	</span></span><br><span class="line"><span class="bullet">	3. </span>了解下正则修饰符</span><br><span class="line"><span class="code">	</span></span><br><span class="line"><span class="bullet">	4. </span>在线正则表达式</span><br><span class="line"><span class="code">    	https://tool.oschina.net/regex/#</span></span><br></pre></td></tr></table></figure>

<h5 id="7-练习"><a href="#7-练习" class="headerlink" title="7.练习"></a>7.练习</h5><h6 id="1-密码校验"><a href="#1-密码校验" class="headerlink" title="1.密码校验"></a>1.密码校验</h6><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">// 密码校验</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="comment">// 1. 两次密码输入一致</span></span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 1.1.获取密码框和确认密码框的js对象</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> pwd1 = <span class="built_in">document</span>.getElementById(<span class="string">'pwd1'</span>);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> pwd2 = <span class="built_in">document</span>.getElementById(<span class="string">'pwd2'</span>);</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 1.2 校验密码是否一致的方法</span></span></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">checkPwd</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> boo = pwd1.value == pwd2.value;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">if</span>(boo == <span class="literal">true</span>)&#123;<span class="comment">// 密码一致</span></span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.getElementById(<span class="string">'pwdwarn'</span>).style.display=<span class="string">'none'</span>;</span></span><br><span class="line"><span class="actionscript">        &#125;<span class="keyword">else</span>&#123;<span class="comment">// 密码不一致</span></span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.getElementById(<span class="string">'pwdwarn'</span>).style.display=<span class="string">'inline'</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span> boo;</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="actionscript">    <span class="comment">// 1.3 给确认密码框绑定失去焦点事件</span></span></span><br><span class="line"><span class="actionscript">    pwd2.onblur=checkPwd; <span class="comment">// 这里绑定函数，不能加括号</span></span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="comment">// 2. 邮箱格式正确</span></span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 2.1 定义邮箱正则表达式</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> emailReg = <span class="regexp">/^()@([\da-z\.-]+)\.([a-z\.]&#123;2,6&#125;)$/</span>;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 2.2 获取邮箱的js对象</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> email = <span class="built_in">document</span>.getElementById(<span class="string">'email'</span>);</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 2.3 定义校验函数（方法）</span></span></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">checkEmail</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> boo = emailReg.test(email.value);</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">if</span>(boo ==  <span class="literal">true</span>)&#123; <span class="comment">// 校验通过</span></span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.getElementById(<span class="string">'emailwarn'</span>).style.display=<span class="string">'none'</span>;</span></span><br><span class="line"><span class="actionscript">        &#125;<span class="keyword">else</span>&#123; <span class="comment">// 校验不通过</span></span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.getElementById(<span class="string">'emailwarn'</span>).style.display=<span class="string">'inline'</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span> boo;</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="actionscript">    <span class="comment">// 2.4 给邮箱绑定失去焦点事件</span></span></span><br><span class="line">    email.onblur=checkEmail;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="comment">// 3. 手机号格式正确 （课下作业....）</span></span></span><br><span class="line"><span class="javascript">		<span class="keyword">let</span> phone = <span class="built_in">document</span>.getElementById(<span class="string">"phone"</span>);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> phonereg = <span class="regexp">/^1[3456789]\d&#123;9&#125;$/</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">tel</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        let <span class="keyword">is</span> = phonereg.test(phone.value);</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">if</span> (!<span class="keyword">is</span>) &#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.getElementById(<span class="string">"phonewarn"</span>).style.display = <span class="string">"inline"</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span> <span class="keyword">is</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line">    phone.onblur = tel;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="comment">// 4.表单提交时 会触发这个 onsubmit事件</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.getElementById(<span class="string">'myForm'</span>).onsubmit=<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span> checkPwd()&amp;&amp;checkEmail()&amp;&amp;tel(); <span class="comment">// 返回true可以提交，返回false表单不做任何操作</span></span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h6 id="2-商品全选"><a href="#2-商品全选" class="headerlink" title="2.商品全选"></a>2.商品全选</h6><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> &gt;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="comment">// 获取所有的商品复选框</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> boxs = <span class="built_in">document</span>.querySelectorAll(<span class="string">'input[type="checkbox"]'</span>);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="comment">// 1. 全选</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.getElementById(<span class="string">'btn1'</span>).onclick=<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">for</span> (<span class="keyword">let</span> b <span class="keyword">of</span> boxs) &#123;</span></span><br><span class="line"><span class="actionscript">            b.checked=<span class="literal">true</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="comment">// 2. 反选</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.getElementById(<span class="string">'btn2'</span>).onclick=<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">for</span> (<span class="keyword">let</span> b <span class="keyword">of</span> boxs) &#123;</span></span><br><span class="line">            b.checked=!b.checked;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h6 id="3-省市联动"><a href="#3-省市联动" class="headerlink" title="3.省市联动"></a>3.省市联动</h6><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">省市级联</span></span><br><span class="line"><span class="comment">	1. 页面加载完成后自动装载省数据</span></span><br><span class="line"><span class="comment">	2. 当选中省时,装载该省的市数据</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// 准备数据</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> data = <span class="keyword">new</span> <span class="built_in">Array</span>();</span></span><br><span class="line"><span class="actionscript">            data[<span class="string">'北京'</span>] = [<span class="string">'顺义区'</span>, <span class="string">'昌平区'</span>, <span class="string">'朝阳区'</span>];</span></span><br><span class="line"><span class="actionscript">            data[<span class="string">'河北'</span>] = [<span class="string">"保定"</span>,<span class="string">"石家庄"</span>,<span class="string">"廊坊"</span>];</span></span><br><span class="line"><span class="actionscript">            data[<span class="string">'辽宁'</span>] = [<span class="string">"沈阳"</span>,<span class="string">"铁岭"</span>,<span class="string">"抚顺"</span>];</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> provinceId = <span class="built_in">document</span>.getElementById(<span class="string">"provinceId"</span>);<span class="comment">//获取省下拉列表</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> cityId = <span class="built_in">document</span>.getElementById(<span class="string">"cityId"</span>);<span class="comment">//获取市下拉列表</span></span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">			<span class="comment">// 1.页面加载成功后，初始化省份数据</span></span></span><br><span class="line"><span class="javascript">			<span class="built_in">window</span>.onload=<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">				<span class="keyword">for</span>(<span class="keyword">let</span> index <span class="keyword">in</span> data)&#123; <span class="comment">// 索引for</span></span></span><br><span class="line"><span class="javascript">				    <span class="built_in">console</span>.log(index);</span></span><br><span class="line"><span class="javascript">                    provinceId.innerHTML+=<span class="string">`&lt;option value="<span class="subst">$&#123;index&#125;</span>"&gt;<span class="subst">$&#123;index&#125;</span>&lt;/option&gt;`</span>;</span></span><br><span class="line">				&#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">            <span class="comment">// 2.给省份下拉框绑定onchange事件</span></span></span><br><span class="line"><span class="actionscript">            provinceId.onchange=<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">			    <span class="comment">// 清空上一次选择城市信息</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                cityId.innerHTML='<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">""</span>&gt;</span>----请-选-择-市----<span class="tag">&lt;/<span class="name">option</span>&gt;</span>';</span></span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="keyword">this</span>.value);<span class="comment">// 当前用户选中的value值 ，它就是二维数组的索引</span></span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(data[<span class="keyword">this</span>.value]); <span class="comment">// 城市列表</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> citys = data[<span class="keyword">this</span>.value];</span></span><br><span class="line"><span class="javascript">                <span class="keyword">for</span>(<span class="keyword">let</span> city <span class="keyword">of</span> citys)&#123; <span class="comment">// 增强for</span></span></span><br><span class="line"><span class="javascript">                    cityId.innerHTML+=<span class="string">`&lt;option value="<span class="subst">$&#123;city&#125;</span>"&gt;<span class="subst">$&#123;city&#125;</span>&lt;/option&gt;`</span>;</span></span><br><span class="line">				&#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h6 id="4-隔行换色"><a href="#4-隔行换色" class="headerlink" title="4.隔行换色"></a>4.隔行换色</h6><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">隔行变色</span></span><br><span class="line"><span class="comment">	1. 表格奇偶行颜色不同</span></span><br><span class="line"><span class="comment">	2. 鼠标移入颜色高亮</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> oldColor;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="comment">// 获取所有tr的js对象 数组</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> trs = <span class="built_in">document</span>.querySelectorAll(<span class="string">'table tr'</span>);  <span class="comment">// 注意：这里使用的后代选择器  ，这里是js的一个小坑 table&gt;tr</span></span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 普通for循环</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; trs.length; i++) &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">if</span>(i%<span class="number">2</span>==<span class="number">0</span>)&#123;<span class="comment">//偶数索引（奇数行）</span></span></span><br><span class="line"><span class="actionscript">            trs[i].style.backgroundColor=<span class="string">'lightgrey'</span>;</span></span><br><span class="line"><span class="actionscript">        &#125;<span class="keyword">else</span>&#123; <span class="comment">// 奇数索引（偶数行）</span></span></span><br><span class="line"><span class="actionscript">            trs[i].style.backgroundColor=<span class="string">'skyblue'</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        trs[i].onmouseover=<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123; <span class="comment">// 鼠标移入某一行</span></span></span><br><span class="line"><span class="actionscript">            oldColor=trs[i].style.backgroundColor<span class="comment">// 获取当前行的颜色</span></span></span><br><span class="line"><span class="actionscript">            trs[i].style.backgroundColor=<span class="string">'pink'</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"><span class="actionscript">        trs[i].onmouseout=<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;<span class="comment">// 鼠标移出某一行</span></span></span><br><span class="line">            trs[i].style.backgroundColor=oldColor;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="四、JQuery框架"><a href="#四、JQuery框架" class="headerlink" title="四、JQuery框架"></a>四、JQuery框架</h3><h4 id="1-HTML引入jQuery"><a href="#1-HTML引入jQuery" class="headerlink" title="1.HTML引入jQuery"></a>1.HTML引入jQuery</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">"../js/jquery-3.2.1.min.js"</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="2-jQuery与JS区别"><a href="#2-jQuery与JS区别" class="headerlink" title="2.jQuery与JS区别"></a>2.jQuery与JS区别</h4><p>jQuery虽然本质上也是js，但如果使用jQuery的属性和方法那么必须保证对象是jQuery对象而不是js对象。</p>
<p>通过js方式获取的是js对象，通过jQuery方式获取的是jQuery对象。两者的关系与区别总结如下：</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>jQuery对象与js对象相互转换</span><br><span class="line"><span class="code">	js --&gt; jq</span></span><br><span class="line"><span class="code">		$(js对象) 或者 jQuery(js对象)</span></span><br><span class="line"><span class="code">	jq --&gt; js</span></span><br><span class="line"><span class="code">		jq对象[索引] 或者 jq对象.get(索引)</span></span><br></pre></td></tr></table></figure>

<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">2. </span>页面加载事件</span><br><span class="line"><span class="code">	js</span></span><br><span class="line"><span class="code">		window.onload=function()&#123;&#125;</span></span><br><span class="line"><span class="code">	jq</span></span><br><span class="line"><span class="code">		$(function()&#123;&#125;)</span></span><br><span class="line"><span class="code">	区别</span></span><br><span class="line"><span class="code">		js：只能定义一次，如果定义多次，后加载会进行覆盖</span></span><br><span class="line"><span class="code">		jq：可以定义多次</span></span><br></pre></td></tr></table></figure>

<h4 id="3-Jquery选择器"><a href="#3-Jquery选择器" class="headerlink" title="3.Jquery选择器"></a>3.Jquery选择器</h4><h5 id="1-基本选择器"><a href="#1-基本选择器" class="headerlink" title="1.基本选择器"></a>1.基本选择器</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>标签（元素）选择器</span><br><span class="line"><span class="bullet">		* </span>语法：$("html标签名") 获得所有匹配标签名称的元素</span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">2. </span>id选择器</span><br><span class="line"><span class="bullet">		* </span>语法：$("#id的属性值") 获得与指定id属性值匹配的元素</span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">3. </span>类选择器</span><br><span class="line"><span class="bullet">		* </span>语法：$(".class的属性值") 获得与指定的class属性值匹配的元素</span><br></pre></td></tr></table></figure>

<h5 id="2-层级关系选择器"><a href="#2-层级关系选择器" class="headerlink" title="2. 层级关系选择器"></a>2. 层级关系选择器</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>后代选择器</span><br><span class="line"><span class="bullet">		* </span>语法：$("A B") 选择A元素内部的所有B元素</span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">2. </span>并集选择器</span><br><span class="line"><span class="bullet">		* </span>语法：$("选择器1,选择器2....") 获取多个选择器选中的所有元素</span><br></pre></td></tr></table></figure>

<h5 id="3-属性选择器"><a href="#3-属性选择器" class="headerlink" title="3.属性选择器"></a>3.属性选择器</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>属性选择器</span><br><span class="line"><span class="bullet">		* </span>语法：$("A[属性名='值']") 包含指定属性等于指定值的选择器</span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">2. </span>复合属性选择器</span><br><span class="line"><span class="bullet">		* </span>语法：$("A[<span class="string">属性名='值'</span>][<span class="symbol"></span>]...") 包含多个属性条件的选择器</span><br></pre></td></tr></table></figure>

<h5 id="4-过滤选择器"><a href="#4-过滤选择器" class="headerlink" title="4.过滤选择器"></a>4.过滤选择器</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>首元素选择器</span><br><span class="line"><span class="bullet">		* </span>语法： :first 获得选择的元素中的第一个元素</span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">2. </span>尾元素选择器</span><br><span class="line"><span class="bullet">		* </span>语法： :last 获得选择的元素中的最后一个元素</span><br><span class="line"></span><br><span class="line"><span class="bullet">3. </span>偶数选择器</span><br><span class="line"><span class="bullet">		* </span>语法： :even 偶数，从 0 开始计数</span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">4. </span>奇数选择器</span><br><span class="line"><span class="bullet">		* </span>语法： :odd 奇数，从 0 开始计数</span><br><span class="line"></span><br><span class="line"><span class="bullet">5. </span>指定索引选择器</span><br><span class="line"><span class="bullet">		* </span>语法： :eq(index) 指定索引元素</span><br></pre></td></tr></table></figure>

<h5 id="5-对象遍历"><a href="#5-对象遍历" class="headerlink" title="5.对象遍历"></a>5.对象遍历</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>语法：</span><br><span class="line"><span class="code">		jq对象.each(function(index,element)&#123;</span></span><br><span class="line"></span><br><span class="line"><span class="code">		&#125;)</span></span><br></pre></td></tr></table></figure>

<h3 id="五、Jquery的DOM操作"><a href="#五、Jquery的DOM操作" class="headerlink" title="五、Jquery的DOM操作"></a>五、Jquery的DOM操作</h3><h4 id="1-Jquery操作内容"><a href="#1-Jquery操作内容" class="headerlink" title="1.Jquery操作内容"></a>1.Jquery操作内容</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>text(): 获取/设置元素的标签体纯文本内容</span><br><span class="line"><span class="bullet">		* </span>相当于js： innerText属性</span><br><span class="line"></span><br><span class="line"><span class="bullet">2. </span>html(): 获取/设置元素的标签体超文本内容</span><br><span class="line"><span class="bullet">		* </span>相当于js： innerHTML属性</span><br></pre></td></tr></table></figure>

<h4 id="2-Jquery操作属性"><a href="#2-Jquery操作属性" class="headerlink" title="2.Jquery操作属性"></a>2.Jquery操作属性</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>val()： 获取/设置元素的value属性值</span><br><span class="line"><span class="bullet">		* </span>相当于：js对象.value</span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">2. </span>attr(): 获取/设置元素的属性</span><br><span class="line"><span class="code">	removeAttr()	删除属性</span></span><br><span class="line"><span class="bullet">		* </span>相当于：js对象.setAttribute() / js对象.getAttribute()</span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="code">		获取爱好的checked属性</span></span><br><span class="line"><span class="code">        使用attr() 获取</span></span><br><span class="line">  					选中返回：checked</span><br><span class="line"><span class="code">            未选中：undefined      </span></span><br><span class="line"><span class="bullet">3. </span>prop():获取/设置元素的属性</span><br><span class="line"><span class="code">	removeAttr()	删除属性</span></span><br><span class="line"><span class="code">	jq在1.6版本之后，提供另一组API prop 通常处理属性值为布尔类型操作</span></span><br><span class="line"><span class="code">		例如：checked selected等</span></span><br></pre></td></tr></table></figure>

<h4 id="3-Jquery操作样式"><a href="#3-Jquery操作样式" class="headerlink" title="3. Jquery操作样式"></a>3. Jquery操作样式</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>直接修改jq对象样式属性</span><br><span class="line"><span class="code">	语法：</span></span><br><span class="line"><span class="code">		jq对象.css()</span></span><br><span class="line"><span class="code">			css(样式名) 获取</span></span><br><span class="line"><span class="code">			css(样式名,样式值) 设置</span></span><br><span class="line"><span class="code">		优点：支持css语法</span></span><br><span class="line"><span class="code">		举例：font-size</span></span><br><span class="line"><span class="code">			</span></span><br><span class="line"><span class="bullet">2. </span>添加/删除jq对象样式</span><br><span class="line"><span class="code">	语法：</span></span><br><span class="line"><span class="code">		jq对象.addClass()</span></span><br><span class="line"><span class="code">		jq对象.removeClass()</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">3. </span>切换jq对象样式</span><br><span class="line"><span class="code">	语法：</span></span><br><span class="line"><span class="code">		jq对象.toggleClass()  无添加，有删除</span></span><br></pre></td></tr></table></figure>

<h4 id="4-Jquery操作元素"><a href="#4-Jquery操作元素" class="headerlink" title="4.Jquery操作元素"></a>4.Jquery操作元素</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>$(标签) 创建一个标签</span><br><span class="line"><span class="code">		$('&lt;li&gt;xxx&lt;/li&gt;')</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">2. </span>$.prepend()  在父标签中将子标签放在第一个位置</span><br><span class="line"></span><br><span class="line"><span class="bullet">3. </span>$.append()   在父标签中将子标签放在最后一个位置</span><br><span class="line"></span><br><span class="line"><span class="bullet">4. </span>$.empty() 清空子元素 （断子绝孙脚）</span><br><span class="line"></span><br><span class="line"><span class="bullet">5. </span>$.remove() 删除自己   （满门抄斩）</span><br></pre></td></tr></table></figure>

<h4 id="5-Jquery事件绑定"><a href="#5-Jquery事件绑定" class="headerlink" title="5.Jquery事件绑定"></a>5.Jquery事件绑定</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jQuery的事件与js的事件的功能和作用一样，只是在使用语法上稍微有些差异。</span><br><span class="line">js对象.事件属性=function()&#123;&#125;</span><br><span class="line"></span><br><span class="line">jq对象.事件函数(function()&#123;&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>常见事件</strong></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>点击事件：</span><br><span class="line"><span class="bullet">        1. </span>click()：单击事件</span><br><span class="line"><span class="bullet">        2. </span>dblclick()：双击事件</span><br><span class="line"><span class="bullet">2. </span>焦点事件</span><br><span class="line"><span class="bullet">        1. </span>blur()：失去焦点</span><br><span class="line"><span class="bullet">        2. </span>focus():元素获得焦点。</span><br><span class="line"></span><br><span class="line"><span class="bullet">3. </span>鼠标事件：</span><br><span class="line"><span class="bullet">        1. </span>mousedown()	鼠标按钮被按下。</span><br><span class="line"><span class="bullet">        2. </span>mouseup()	鼠标按键被松开。</span><br><span class="line"><span class="bullet">        3. </span>mousemove()	鼠标被移动。</span><br><span class="line"><span class="bullet">        4. </span>mouseover()	鼠标移到某元素之上。</span><br><span class="line"><span class="bullet">        5. </span>mouseout()	鼠标从某元素移开。</span><br><span class="line"><span class="code">        </span></span><br><span class="line"><span class="bullet">4. </span>键盘事件：</span><br><span class="line"><span class="bullet">		1. </span>keydown()	某个键盘按键被按下。	</span><br><span class="line"><span class="bullet">		2. </span>keyup()		某个键盘按键被松开。</span><br><span class="line"><span class="bullet">		3. </span>keypress()	某个键盘按键被按下并松开。</span><br><span class="line"></span><br><span class="line"><span class="bullet">5. </span>改变事件</span><br><span class="line"><span class="bullet">        1. </span>change()	域的内容被改变。</span><br><span class="line"></span><br><span class="line"><span class="bullet">6. </span>表单事件：</span><br><span class="line"><span class="bullet">        1. </span>submit()	提交按钮被点击。</span><br></pre></td></tr></table></figure>

<h4 id="6-案例"><a href="#6-案例" class="headerlink" title="6.案例"></a>6.案例</h4><h5 id="1-隔行换色"><a href="#1-隔行换色" class="headerlink" title="1.隔行换色"></a>1.隔行换色</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 偶数索引 奇数行</span></span></span><br><span class="line"><span class="javascript">    $(<span class="string">'tr:even'</span>).css(<span class="string">'background-color'</span>,<span class="string">'lightgray'</span>);</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 奇数索引 偶数行</span></span></span><br><span class="line"><span class="javascript">    $(<span class="string">'tr:odd'</span>).css(<span class="string">'background-color'</span>,<span class="string">'skyblue'</span>);</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="2-商品全选-1"><a href="#2-商品全选-1" class="headerlink" title="2.商品全选"></a>2.商品全选</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> &gt;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 全选</span></span></span><br><span class="line"><span class="javascript">    $(<span class="string">'#btn1'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        $(<span class="string">'input[type="checkbox"]'</span>).prop(<span class="string">'checked'</span>,<span class="literal">true</span>);</span></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="comment">// 反选，必须遍历才能实现</span></span></span><br><span class="line"><span class="javascript">    $(<span class="string">'#btn2'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        $(<span class="string">'input[type="checkbox"]'</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params">index,element</span>) </span>&#123; <span class="comment">// 注意：element</span></span></span><br><span class="line"><span class="actionscript">            <span class="comment">// js方式  推荐</span></span></span><br><span class="line"><span class="actionscript">           <span class="comment">// element.checked = ! element.checked;</span></span></span><br><span class="line"><span class="actionscript">            <span class="comment">// jq方式 比较麻烦 了解</span></span></span><br><span class="line"><span class="javascript">            $(element).prop(<span class="string">'checked'</span>,!$(element).prop(<span class="string">'checked'</span>))</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> str = <span class="string">'哈哈'</span>+<span class="number">1</span>+<span class="string">"呵呵"</span>;</span></span><br><span class="line"><span class="handlebars"><span class="xml">    let str = '<span class="tag">&lt;<span class="name">p</span> <span class="attr">align</span>=<span class="string">"center"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span>'</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="3-QQ表情"><a href="#3-QQ表情" class="headerlink" title="3.QQ表情"></a>3.QQ表情</h5><p><img src="/2020/04/29/summary_Web/image-20200502094449270.png" alt="image"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 给所有的图片绑定点击事件</span></span></span><br><span class="line"><span class="javascript">        $(<span class="string">'.emoji img'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// this 表示当前 img标签</span></span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span></span><br><span class="line"><span class="javascript">            $(<span class="string">'#word'</span>).append($(<span class="keyword">this</span>).clone())</span></span><br><span class="line">        &#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="六、JSON"><a href="#六、JSON" class="headerlink" title="六、JSON"></a>六、JSON</h3><p><strong>JavaScript对象表示形式（JavaScript Object Notation）</strong></p>
<h4 id="1-概述-1"><a href="#1-概述-1" class="headerlink" title="1.概述"></a>1.概述</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">可以取代XML笨重的数据结构，和xml相比：更小、更快，更易解析</span><br><span class="line">json、xml作用：作为数据的载体，在网络中传输</span><br></pre></td></tr></table></figure>

<h4 id="2-语法"><a href="#2-语法" class="headerlink" title="2.语法"></a>2.语法</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>对象类型</span><br><span class="line"><span class="code">		&#123;name:value,name:value&#125;</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">* </span>数组类型</span><br><span class="line"><span class="code">		[</span></span><br><span class="line"><span class="code">            &#123;name:value,name:value&#125;,</span></span><br><span class="line"><span class="code">            &#123;name:value,name:value&#125;,</span></span><br><span class="line"><span class="code">            &#123;name:value,name:value&#125;</span></span><br><span class="line"><span class="code">		]</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">* </span>复杂对象</span><br><span class="line"><span class="code">		&#123;</span></span><br><span class="line"><span class="code">            name:value,</span></span><br><span class="line"><span class="code">            list:[&#123;name:value&#125;,&#123;&#125;,&#123;&#125;]</span></span><br><span class="line"><span class="code">            user:&#123;name:value&#125;</span></span><br><span class="line"><span class="code">		&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="3-JSON格式转换"><a href="#3-JSON格式转换" class="headerlink" title="3.JSON格式转换"></a>3.JSON格式转换</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>JSON对象与字符串转换的相关函数</span><br><span class="line"><span class="code">	语法：</span></span><br><span class="line"><span class="bullet">    	1. </span>JSON.stringify(object) 把json对象转为字符串</span><br><span class="line"><span class="code">    </span></span><br><span class="line"><span class="bullet">    	2. </span>JSON.parse(string) 把字符串转为json对象</span><br></pre></td></tr></table></figure>

<h3 id="七、AJAX"><a href="#七、AJAX" class="headerlink" title="七、AJAX"></a>七、AJAX</h3><p><strong>传统网站中存在的问题</strong></p>
<ul>
<li><p>网速慢的情况下，页面加载时间长，用户只能等待</p>
</li>
<li><p>表单提交后，如果一项内容不合格，需要重新填写所有表单内容</p>
</li>
<li><p>页面跳转，重新加载页面，造成资源浪费，增加用户等待时间</p>
</li>
</ul>
<p><strong>AJAX可以解决以上问题</strong></p>
<p>​    ajax这哥们是==浏览器提供的一套方法==，在无需重新加载整个网页情况下，能够更新部分网页的技术，从而提高用户浏览网站应用的体验。</p>
<blockquote>
<p>中文音译：阿贾克斯</p>
</blockquote>
<p><strong>应用场景</strong></p>
<ul>
<li>搜索框提示</li>
<li>表单数据验证</li>
<li>无刷新分页</li>
</ul>
<h4 id="1-JS原生AJAX"><a href="#1-JS原生AJAX" class="headerlink" title="1.JS原生AJAX"></a>1.JS原生AJAX</h4><h5 id="1-案例需求"><a href="#1-案例需求" class="headerlink" title="1.案例需求"></a>1.案例需求</h5><p><img src="/2020/04/29/summary_Web/image-20200502100930397.png" alt="image-20200502100930397"></p>
<h5 id="2-代码实现"><a href="#2-代码实现" class="headerlink" title="2.代码实现"></a>2.代码实现</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>创建ajax对象</span><br><span class="line"><span class="code">		let xhr = new XMLHttpRequest();</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">2. </span>告诉ajax请求方式和请求地址</span><br><span class="line"><span class="code">		xhr.open(请求方式，请求地址);</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">3. </span>发送请求</span><br><span class="line"><span class="code">		xhr.send();</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">4. </span>获取服务器返回的数据</span><br><span class="line"><span class="code">		xhr.onload=function()&#123;</span></span><br><span class="line"><span class="code">            xhr.responseText;</span></span><br><span class="line"><span class="code">		&#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"username"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"请输入用户名"</span>&gt;</span> <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"userwarn"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.getElementById(<span class="string">'username'</span>).onblur=<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.value);</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 1.创建ajax对象</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 2.告诉ajax请求方式和请求地址</span></span></span><br><span class="line"><span class="actionscript">        xhr.open(<span class="string">'get'</span>,<span class="string">'http://localhost:8080/check?username='</span>+<span class="keyword">this</span>.value)</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 3.发送请求</span></span></span><br><span class="line">        xhr.send();</span><br><span class="line"><span class="actionscript">        <span class="comment">// 4.获取服务器返回数据</span></span></span><br><span class="line"><span class="actionscript">        xhr.onload=<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(xhr.responseText);<span class="comment">// 返回的字符串</span></span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.getElementById(<span class="string">'userwarn'</span>).innerText=xhr.responseText;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-JQuery的Ajax插件"><a href="#2-JQuery的Ajax插件" class="headerlink" title="2.JQuery的Ajax插件"></a>2.JQuery的Ajax插件</h4><h5 id="1-ajax函数"><a href="#1-ajax函数" class="headerlink" title="1.ajax函数"></a>1.ajax函数</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>语法：</span><br><span class="line"><span class="code">		$.ajax(&#123;name:value,name:value&#125;)</span></span><br><span class="line"><span class="code">	</span></span><br><span class="line"><span class="bullet">* </span>参数：</span><br><span class="line"><span class="code">		url:请求地址</span></span><br><span class="line"><span class="code">		type：请求方式  （get：大小有限制、post：大小没有限制）</span></span><br><span class="line"><span class="code">		data：请求参数</span></span><br><span class="line"><span class="code">		success：请求成功时，执行的回调函数</span></span><br><span class="line"><span class="code">		-------</span></span><br><span class="line"><span class="code">		error：请求失败时，执行的回调函数</span></span><br><span class="line"><span class="code">		dataType：预期服务器返回的数据类型：text、json</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"username"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"请输入用户名"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"userwarn"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 给文本框绑定失去焦点事件</span></span></span><br><span class="line"><span class="javascript">    $(<span class="string">'#username'</span>).blur(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 使用ajax函数发送请求</span></span></span><br><span class="line"><span class="javascript">        $.ajax(&#123;</span></span><br><span class="line"><span class="actionscript">            url:<span class="string">"http://localhost:8080/check"</span>,</span></span><br><span class="line"><span class="actionscript">            type:<span class="string">"post"</span>,</span></span><br><span class="line"><span class="javascript">            data:<span class="string">"username="</span>+$(<span class="keyword">this</span>).val(),</span></span><br><span class="line"><span class="actionscript">            success:<span class="function"><span class="keyword">function</span> <span class="params">(resp)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">// 实现局部刷新</span></span></span><br><span class="line"><span class="javascript">                $(<span class="string">'#userwarn'</span>).text(resp);</span></span><br><span class="line">            &#125;,</span><br><span class="line"><span class="actionscript">            error:<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                alert(<span class="string">'服务器繁忙，请稍后重试...'</span>)</span></span><br><span class="line">            &#125;,</span><br><span class="line"><span class="actionscript">           <span class="comment">// dataType:"json"  // 相当于把 json字符串 转为了json对象</span></span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="2-get函数"><a href="#2-get函数" class="headerlink" title="2.get函数"></a>2.get函数</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>语法：</span><br><span class="line"><span class="code">		$.get(url,success);</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">* </span>参数：</span><br><span class="line"><span class="code">		url:请求地址</span></span><br><span class="line"><span class="code">		success：请求成功时的回调函数</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"username"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"请输入用户名"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"userwarn"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 给文本框绑定失去焦点事件</span></span></span><br><span class="line"><span class="javascript">    $(<span class="string">'#username'</span>).blur(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 使用get函数发送</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> url = <span class="string">'http://localhost:8080/check?username='</span>+$(<span class="keyword">this</span>).val();</span></span><br><span class="line"><span class="actionscript">        $.get(url,<span class="function"><span class="keyword">function</span> <span class="params">(resp)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// 局部刷新</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">'#userwarn'</span>).text(resp);</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="3-post函数"><a href="#3-post函数" class="headerlink" title="3.post函数"></a>3.post函数</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>语法：</span><br><span class="line"><span class="code">		$.post(url,data,success);</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">* </span>参数：</span><br><span class="line"><span class="code">		url：请求地址</span></span><br><span class="line"><span class="code">		data：请求参数</span></span><br><span class="line"><span class="code">		success：请求成功时的回调函数</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"username"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"请输入用户名"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"userwarn"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 给文本框绑定失去焦点事件</span></span></span><br><span class="line"><span class="javascript">    $(<span class="string">'#username'</span>).blur(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 使用post函数发送请求</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> url=<span class="string">'http://localhost:8080/check'</span>;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> data=<span class="string">'username='</span>+$(<span class="keyword">this</span>).val();</span></span><br><span class="line"><span class="javascript">        $.post(url,data,<span class="function"><span class="keyword">function</span> (<span class="params">resp</span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// 局部刷新</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">'#userwarn'</span>).text(resp);</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="4-同步和异步"><a href="#4-同步和异步" class="headerlink" title="4.同步和异步"></a>4.同步和异步</h5><p><strong>使用ajax发送的是异步请求</strong></p>
<p><strong>同步和异步请求指的是，客户端和服务器交互的行为</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn"</span>&gt;</span>发送ajax<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 给按钮绑定点击事件</span></span></span><br><span class="line"><span class="javascript">    $(<span class="string">'#btn'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 使用ajax函数发送请求，ajax默认的是异步提交，可以改为同步（了解）</span></span></span><br><span class="line"><span class="javascript">        $.ajax(&#123;</span></span><br><span class="line"><span class="actionscript">            url:<span class="string">'http://localhost:8080/sleep'</span>,</span></span><br><span class="line"><span class="actionscript">            type:<span class="string">'get'</span>,</span></span><br><span class="line"><span class="actionscript">            success:<span class="function"><span class="keyword">function</span> <span class="params">(resp)</span> </span>&#123;</span></span><br><span class="line">                alert(resp)</span><br><span class="line">            &#125;,</span><br><span class="line"><span class="javascript">            <span class="keyword">async</span>:<span class="literal">false</span><span class="comment">// 同步提交</span></span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="5-案例"><a href="#5-案例" class="headerlink" title="5.案例"></a>5.案例</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">src</span>=<span class="string">"../img/logo.png"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"search"</span> <span class="attr">name</span>=<span class="string">"keyword"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"搜索一下"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"show"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="comment">//1.为文本框绑定键盘弹起事件 keyup</span></span></span><br><span class="line"><span class="javascript">    $(<span class="string">"#search"</span>).keyup(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">//10.第二次发送请求时对预选框进行重置</span></span></span><br><span class="line"><span class="javascript">        $(<span class="string">".show"</span>).show();</span></span><br><span class="line"><span class="actionscript">        <span class="comment">//测试有没有取到键盘录入的值</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log($(<span class="keyword">this</span>).val());</span></span><br><span class="line"><span class="actionscript">        <span class="comment">//16.解决用户随意输入空格的问题</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">if</span> (<span class="keyword">this</span>.value.trim() == <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">return</span>;</span></span><br><span class="line"><span class="actionscript">        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">this</span>.value = <span class="keyword">this</span>.value.trim();</span></span><br><span class="line">        &#125;</span><br><span class="line"><span class="actionscript">        <span class="comment">//2.使用ajax函数，发送请求，请求方式为post</span></span></span><br><span class="line"><span class="javascript">        $.ajax(&#123;</span></span><br><span class="line"><span class="actionscript">            url:<span class="string">"http://localhost:8080/search"</span>,</span></span><br><span class="line"><span class="actionscript">            type:<span class="string">"post"</span>,</span></span><br><span class="line"><span class="javascript">            data:<span class="string">"keyword="</span> + $(<span class="keyword">this</span>).val(),</span></span><br><span class="line"><span class="actionscript">            success:<span class="function"><span class="keyword">function</span> <span class="params">(resp)</span> </span>&#123;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">                <span class="comment">//6.清空上次搜索是显示的预选内容</span></span></span><br><span class="line"><span class="javascript">                $(<span class="string">".show"</span>).empty();</span></span><br><span class="line"><span class="actionscript">                <span class="comment">//3.请求完成返回结果，得到的是数组，要进行遍历</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">for</span> (<span class="keyword">let</span> ele <span class="keyword">of</span> resp) &#123;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">                    <span class="comment">//4.多个元素一起展示，要进行拼接</span></span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">                    <span class="comment">//5.运行时出现了问题，进行第二次搜索时，第一次搜索的内容还在。解决办法：要对第一预选的内容进行清空，使用empty</span></span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">                    <span class="comment">//7.模拟百度搜索，点击预选框的词条，会添加进入搜索栏，预选框绑定单击事件，选中的进入搜索栏，其他的隐藏,</span></span></span><br><span class="line"><span class="actionscript">                    <span class="comment">// 由于是多个词条，不能使用class选择器，所以不能使用匿名对象，而且需要确定当前词条是哪个，所以要使用this作为参数，传入函数；</span></span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">                    <span class="comment">//11.改变鼠标样式，词条位置，靠左对齐，前面有间隙</span></span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">                    <span class="comment">//12.优化，当鼠标放在词条上的时候，词条的背景颜色会发生改变，使用鼠标事件中的的mouseover和mouseout</span></span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">                    <span class="comment">//15.问题：当用户输入空格时，应该不做回应</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                   $(".show").append(`<span class="tag">&lt;<span class="name">div</span> <span class="attr">onclick</span>=<span class="string">"getResp(this)"</span> <span class="attr">style</span>=<span class="string">"cursor: pointer;padding-left: 5px;text-align: left"</span> <span class="attr">onmouseover</span>=<span class="string">"over(this)"</span> <span class="attr">onmouseout</span>=<span class="string">"out(this)"</span>&gt;</span>$&#123;ele&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span>`)</span></span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line"><span class="actionscript">    <span class="comment">//8.实现选中词条进搜索框，其他隐藏的功能</span></span></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">getResp</span><span class="params">(obj)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">        $(<span class="string">"#search"</span>).val($(obj).text());</span></span><br><span class="line"><span class="javascript">        $(<span class="string">".show"</span>).hide();</span></span><br><span class="line"><span class="actionscript">        <span class="comment">//9.出现的问题，第二次搜索，没有预选框显示，</span></span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 解决办法：在第二次搜索的时候进行重置，重新显示</span></span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="actionscript">    <span class="comment">//13.实现鼠标移入背景变色</span></span></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">over</span><span class="params">(obj)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">        $(obj).css(<span class="string">"background-color"</span>,<span class="string">"#f0f0f0"</span>);</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="actionscript">    <span class="comment">//14.实现鼠标移出背景回复颜色</span></span></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">out</span><span class="params">(obj)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">        $(obj).css(<span class="string">"background-color"</span>,<span class="string">"white"</span>);</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="八、Tomcat"><a href="#八、Tomcat" class="headerlink" title="八、Tomcat"></a>八、Tomcat</h3><p><strong>C/S架构</strong></p>
<blockquote>
<p>Client/Server 客户端/服务器</p>
</blockquote>
<blockquote>
<p>访问服务器资源必须安装客户端软件</p>
</blockquote>
<p><img src="/2020/04/29/summary_Web/image-20200502113627393.png" alt="image"></p>
<p><strong>B/S架构</strong></p>
<blockquote>
<p>Browser/Server 浏览器/服务器</p>
<p>访问服务器资源不需要专门安装客户端软件,而是直接通过浏览器访问服务器资源.</p>
</blockquote>
<p><img src="/2020/04/29/summary_Web/image-20200502113738095.png" alt="image"></p>
<p><strong>资源的分类</strong></p>
<p><img src="/2020/04/29/summary_Web/image-20200502113409089.png" alt="image"></p>
<h4 id="1-Tomcat使用"><a href="#1-Tomcat使用" class="headerlink" title="1. Tomcat使用"></a>1. Tomcat使用</h4><h5 id="1-下载"><a href="#1-下载" class="headerlink" title="1.下载"></a>1.下载</h5><p>Tomcat 官网下载地址：<a href="https://tomcat.apache.org/download-80.cgi" target="_blank" rel="noopener">https://tomcat.apache.org/download-80.cgi</a></p>
<p><img src="/2020/04/29/summary_Web/image-20200502114117632.png" alt="image"></p>
<h5 id="2-安装"><a href="#2-安装" class="headerlink" title="2.安装"></a>2.安装</h5><p><img src="/2020/04/29/summary_Web/image-20200502114212983.png" alt="image"></p>
<h5 id="3-目录结构"><a href="#3-目录结构" class="headerlink" title="3.目录结构"></a>3.目录结构</h5><p><img src="/2020/04/29/summary_Web/image-20200502114239148.png" alt="image-20200502114239148"></p>
<h5 id="4-启动和关闭"><a href="#4-启动和关闭" class="headerlink" title="4.启动和关闭"></a>4.启动和关闭</h5><p><img src="/2020/04/29/summary_Web/image-20200502114310660.png" alt="image"></p>
<h5 id="5-启动报错问题"><a href="#5-启动报错问题" class="headerlink" title="5.启动报错问题"></a>5.启动报错问题</h5><p><strong>Java环境变量</strong></p>
<p>现象: 黑窗口一闪而过(不到半秒)</p>
<blockquote>
<p>解决:<br>    配置好Java环境变量<br>        JAVA_HOME<br>        Path</p>
</blockquote>
<p><strong>8080端口被占用</strong></p>
<p>现象：启动时报错（黑框口等了一会就关闭）</p>
<p><img src="/2020/04/29/summary_Web/image-20200502114452086.png" alt="image"></p>
<p><img src="/2020/04/29/summary_Web/image-20200502114514715.png" alt="image"></p>
<p><strong>暴力：找到占用的端口号的对应进程，杀死进程</strong></p>
<p>cmd命令：<code>netstat -ano | findstr &quot;8080&quot;</code></p>
<p><img src="/2020/04/29/summary_Web/image-20200502114606395.png" alt="image"></p>
<p><strong>进入到任务管理器，找到它，干掉它</strong></p>
<p><img src="/2020/04/29/summary_Web/image-20200502114635514.png" alt="image"></p>
<p><strong>温柔：修改Tomcat端口号</strong></p>
<p>进入Tomcat安装目录/conf/server.xml 文件修改</p>
<p>==注意：如果是其他软件占用了8080，你可以直接修改这一个就行…==</p>
<p><img src="/2020/04/29/summary_Web/image-20200502114715802.png" alt="image"></p>
<p>==注意：如果你想启动多个tomcat的话，需要修改三个端口号==</p>
<p><img src="/2020/04/29/summary_Web/image-20200502114740941.png" alt="image"></p>
<p><strong>端口号：个人指定范围：1024~65535之间，只要不与其他软件冲入即可</strong></p>
<p><img src="/2020/04/29/summary_Web/image-20200502114820218.png" alt="image"></p>
<h5 id="6-访问测试"><a href="#6-访问测试" class="headerlink" title="6.访问测试"></a>6.<strong>访问测试</strong></h5><p><img src="/2020/04/29/summary_Web/image-20200502114910986.png" alt="image"></p>
<h4 id="2-发布项目三种方式"><a href="#2-发布项目三种方式" class="headerlink" title="2.发布项目三种方式"></a>2.发布项目三种方式</h4><h5 id="1-webapps-部署-最简单"><a href="#1-webapps-部署-最简单" class="headerlink" title="1.webapps 部署(最简单)"></a>1.webapps 部署(最简单)</h5><p><img src="/2020/04/29/summary_Web/image-20200502115012110.png" alt="image"></p>
<p><img src="/2020/04/29/summary_Web/image-20200502115039313.png" alt="image"></p>
<p><strong>这种方案(支持热更新)，一般在开发完毕后，来使用的</strong></p>
<h5 id="2-server-xml部署"><a href="#2-server-xml部署" class="headerlink" title="2.server.xml部署"></a>2.server.xml部署</h5><p>在tomcat/conf/server.xml中找到<Host>标签，添加<Context>标签</Context></Host></p>
<p><img src="/2020/04/29/summary_Web/1586746435946.png" alt="image"></p>
<p><strong>缺点</strong></p>
<blockquote>
<p>1.配置文件修改完毕后，需要重启后生效…</p>
<p>2.server.xml是tomcat的核心配置文件，如果稍有不慎操作失误，整个tomcat启动失败</p>
<p>3.这种方案作为了解即可</p>
</blockquote>
<h5 id="3-独立xml部署-开发时使用"><a href="#3-独立xml部署-开发时使用" class="headerlink" title="3.独立xml部署(开发时使用)"></a>3.独立xml部署(开发时使用)</h5><p>在tomcat/conf/Catalina/localhost 目录下创建一个xml文件，添加<Context>标签</Context></p>
<p><img src="/2020/04/29/summary_Web/1586746803858.png" alt="image"></p>
<p><strong>文件名就是虚拟路径</strong></p>
<h5 id="3-web的项目结构"><a href="#3-web的项目结构" class="headerlink" title="3.web的项目结构"></a>3.web的项目结构</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>前端项目</span><br><span class="line"><span class="code">        |-- myapp(项目名称)</span></span><br><span class="line"><span class="code">            |-- css 目录</span></span><br><span class="line"><span class="code">            |-- js  目录</span></span><br><span class="line"><span class="code">            |-- html目录</span></span><br><span class="line"><span class="code">            |-- img 目录</span></span><br><span class="line"><span class="code">            |-- index.html</span></span><br><span class="line"><span class="code">            </span></span><br><span class="line"><span class="bullet">2. </span>web项目</span><br><span class="line"><span class="code">		|-- myapp（项目名称）</span></span><br><span class="line"><span class="code">			|-- 静态资源（html、css、js、img）</span></span><br><span class="line"><span class="code">			|-- WEB-INF 目录（浏览器无法直接访问内部的资源）</span></span><br><span class="line"><span class="code">				|-- classes 目录（java的字节码文件）</span></span><br><span class="line"><span class="code">				|-- lib     目录（当前项目所需要的第三方jar包）</span></span><br><span class="line"><span class="code">				|-- web.xml 文件 （当前项目核心配置文件，servlet3.0可以省略）</span></span><br><span class="line"><span class="code">			|-- index.html or index.jsp</span></span><br></pre></td></tr></table></figure>

<h4 id="3-Idea中使用Tomcat"><a href="#3-Idea中使用Tomcat" class="headerlink" title="3.Idea中使用Tomcat"></a>3.Idea中使用Tomcat</h4><h5 id="1-配置Tomcat"><a href="#1-配置Tomcat" class="headerlink" title="1. 配置Tomcat"></a>1. 配置Tomcat</h5><p><img src="/2020/04/29/summary_Web/1586748223130.png" alt="1586748223130"></p>
<p><img src="/2020/04/29/summary_Web/1586748144024.png" alt="1586748144024"></p>
<p>再次点击，确定是否配置成功…</p>
<p><img src="/2020/04/29/summary_Web/1586748188681.png" alt="1586748188681"></p>
<h5 id="2-创建Web项目"><a href="#2-创建Web项目" class="headerlink" title="2.创建Web项目"></a>2.创建Web项目</h5><p><img src="/2020/04/29/summary_Web/1586748442579.png" alt="1586748442579"></p>
<p><img src="/2020/04/29/summary_Web/1586748484283.png" alt="1586748484283"></p>
<p><img src="/2020/04/29/summary_Web/1586748571082.png" alt="1586748571082"></p>
<p><img src="/2020/04/29/summary_Web/1586748796809.png" alt="1586748796809"></p>
<p><img src="/2020/04/29/summary_Web/1586748889107.png" alt="1586748889107"></p>
<p><img src="/2020/04/29/summary_Web/1586748932445.png" alt="1586748932445"></p>
<p><img src="/2020/04/29/summary_Web/1586749040094.png" alt="1586749040094"></p>
<h5 id="3-页面资源热更新"><a href="#3-页面资源热更新" class="headerlink" title="3.页面资源热更新"></a>3.页面资源热更新</h5><p><img src="/2020/04/29/summary_Web/1586749225881.png" alt="1586749225881"></p>
<p><img src="/2020/04/29/summary_Web/1586749491147.png" alt="1586749491147"></p>
<h3 id="九、Http协议"><a href="#九、Http协议" class="headerlink" title="九、Http协议"></a>九、Http协议</h3><p><strong>超文本传输协议</strong>（Hyper Text Transfer Protocol)是互联网上应用最为广泛的一种网络协议。</p>
<p>传输协议：在客户端和服务器端通信时，规范了传输数据的格式</p>
<p><img src="/2020/04/29/summary_Web/1586750890856.png" alt="1586750890856"></p>
<p><img src="/2020/04/29/summary_Web/1586751086044.png" alt="1586751086044"></p>
<p><img src="/2020/04/29/summary_Web/1586751210042.png" alt="1586751210042"></p>
<h4 id="1-HTTP请求"><a href="#1-HTTP请求" class="headerlink" title="1.HTTP请求"></a>1.HTTP请求</h4><h5 id="1-浏览器查看Http请求协议"><a href="#1-浏览器查看Http请求协议" class="headerlink" title="1.浏览器查看Http请求协议"></a>1.浏览器查看Http请求协议</h5><h6 id="1-get方式"><a href="#1-get方式" class="headerlink" title="1.get方式"></a>1.get方式</h6><p><img src="/2020/04/29/summary_Web/1586758259886.png" alt="1586758259886"></p>
<h6 id="2-post方式"><a href="#2-post方式" class="headerlink" title="2.post方式"></a>2.post方式</h6><p><img src="/2020/04/29/summary_Web/1586758396111.png" alt="1586758396111"></p>
<h5 id="2-HTTP请求消息格式"><a href="#2-HTTP请求消息格式" class="headerlink" title="2.HTTP请求消息格式"></a>2.HTTP请求消息格式</h5><h6 id="1-请求行"><a href="#1-请求行" class="headerlink" title="1.请求行"></a>1.请求行</h6><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>格式</span><br><span class="line"><span class="code">		请求方式 请求路径 协议/版本号</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">* </span>例如</span><br><span class="line"><span class="code">		POST /day07_myapp/static/login.html HTTP/1.1</span></span><br><span class="line"><span class="code">		GET /day07_myapp/static/login.html?username=jack&amp;password=123 HTTP/1.1</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">* </span>请求方式区别</span><br><span class="line"><span class="code">	get</span></span><br><span class="line"><span class="code">		1.请求参数在地址栏显示（请求行）</span></span><br><span class="line"><span class="code">		2.请求参数大小有限制</span></span><br><span class="line"><span class="code">		3.数据不太安全</span></span><br><span class="line"><span class="code">	post</span></span><br><span class="line"><span class="code">		1.请求参数不在地址栏显示（请求体）</span></span><br><span class="line"><span class="code">		2.请求参数大小没有限制</span></span><br><span class="line"><span class="code">		3.数据相对安全</span></span><br></pre></td></tr></table></figure>

<h6 id="2-请求头"><a href="#2-请求头" class="headerlink" title="2.请求头"></a>2.请求头</h6><ul>
<li>格式<pre><code>请求头名称：请求头的值</code></pre></li>
<li>例如   <pre><code>Host: localhost:8080</code></pre></li>
</ul>
<p><strong>常见请求头</strong>：</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">		------------------------------------------（了解）</span></span><br><span class="line"><span class="bullet">1. </span>Host: localhost:8080         访问服务器的地址（域名+端口）</span><br><span class="line"><span class="code">		</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">2. </span>Connection: keep-alive       长连接（http1.1协议）</span><br><span class="line"><span class="code">		</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">3. </span>Cache-Control: max-age=0 	设置缓存数据的存活时间，单位秒</span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">4. </span>Upgrade-Insecure-Requests:1   客户端支持https加密协议  </span><br><span class="line"><span class="code">			</span></span><br><span class="line"><span class="code">		---------------------------------------（重点）</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">5. </span>Referer: http://baidu.com    上一次请求的地址</span><br><span class="line"><span class="code">		百度推广....	</span></span><br><span class="line"><span class="code">        防盗链....</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">6. </span>User-Agent:        客户端系统和浏览器版本</span><br><span class="line"><span class="code">		User-Agent: Mozilla/5.0 (Windows NT 10.0; WOW64) Chrome/63.0 Safari/537.36</span></span><br><span class="line"><span class="code">		浏览器兼容性</span></span><br><span class="line"><span class="code">			判断</span></span><br><span class="line"><span class="code">				谷歌方式一</span></span><br><span class="line"><span class="code">				IE方式二</span></span><br><span class="line"><span class="code">				火狐方式三</span></span><br></pre></td></tr></table></figure>

<h6 id="3-请求体（正文）"><a href="#3-请求体（正文）" class="headerlink" title="3.请求体（正文）"></a>3.请求体（正文）</h6><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>格式</span><br><span class="line"><span class="code">		参数名=参数值&amp;参数名=参数值...</span></span><br><span class="line"><span class="bullet">* </span>例如</span><br><span class="line"><span class="code">		username=jack&amp;password=123</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">* </span>注意：</span><br><span class="line"><span class="code">		get方式没有请求体，post方式才有</span></span><br></pre></td></tr></table></figure>

<h4 id="3-HTTP响应头"><a href="#3-HTTP响应头" class="headerlink" title="3.HTTP响应头"></a>3.HTTP响应头</h4><h5 id="1-浏览器查看Http响应协议"><a href="#1-浏览器查看Http响应协议" class="headerlink" title="1.浏览器查看Http响应协议"></a>1.浏览器查看Http响应协议</h5><p><img src="/2020/04/29/summary_Web/1586759633465.png" alt="1586759633465"></p>
<h5 id="2-HTTP响应消息格式"><a href="#2-HTTP响应消息格式" class="headerlink" title="2.HTTP响应消息格式"></a>2.HTTP响应消息格式</h5><h6 id="1-响应行"><a href="#1-响应行" class="headerlink" title="1.响应行"></a>1.响应行</h6><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>格式</span><br><span class="line"><span class="code">		协议/版本号 状态码</span></span><br><span class="line"><span class="bullet">* </span>例如</span><br><span class="line"><span class="code">		tomcat8：HTTP/1.1 200</span></span><br><span class="line"><span class="code">		tomcat7：HTTP/1.1 200 OK</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">* </span>常见状态码</span><br><span class="line"><span class="code">	--------------- 用户可以正常访问页面</span></span><br><span class="line"><span class="code">	200 ：表示成功</span></span><br><span class="line"><span class="code">	</span></span><br><span class="line"><span class="code">	302 ：重定向</span></span><br><span class="line"><span class="code">	</span></span><br><span class="line"><span class="code">	304 ：从缓存中读取数据</span></span><br><span class="line"><span class="code">	--------------- 用户无法正常访问页面</span></span><br><span class="line"><span class="code">	404：请求资源未找到（not  found）</span></span><br><span class="line"><span class="code">	</span></span><br><span class="line"><span class="code">	405：请求的方法未找到</span></span><br><span class="line"><span class="code">	</span></span><br><span class="line"><span class="code">	500：服务器内部错误（java代码写错了.....）</span></span><br></pre></td></tr></table></figure>

<h6 id="2-响应头"><a href="#2-响应头" class="headerlink" title="2.响应头"></a>2.响应头</h6><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>格式</span><br><span class="line"><span class="code">		响应头名称：响应头的值</span></span><br><span class="line"><span class="bullet">* </span>例如</span><br><span class="line"><span class="code">		Last-Modified: Mon, 13 Apr 2020 06:11:24 GMT</span></span><br></pre></td></tr></table></figure>

<p><strong>常见响应头</strong>：</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>Location：通常与状态码302一起使用，实现重定向操作</span><br><span class="line"><span class="code">		Location:http://www.itcast.cn</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">2. </span>Content-Type：服务器告诉客户端，返回响应体的数据类型和编码方式</span><br><span class="line"><span class="code">		Content-Type:text/html;charset=utf-8</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">3. </span>Content-Disposition：服务器告诉客户端，以什么样方式打开响应体</span><br><span class="line"><span class="bullet">		* </span>in-line（默认）：浏览器直接打开相应内容，展示给用户</span><br><span class="line"><span class="bullet">		* </span>attachment;filename=文件名：浏览器以附件的方式保存文件 【文件下载】</span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">4. </span>Refresh：在指定间隔时间后，跳转到某个页面</span><br><span class="line"><span class="code">		Refresh:5;http://www.bilibili.com</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">5. </span>Last-Modified：通常与状态码304一起使用，实现缓存机制</span><br><span class="line"><span class="code">		Last-Modified: Mon, 13 Apr 2020 06:11:24 GMT</span></span><br></pre></td></tr></table></figure>

<h6 id="3-响应体（正文）"><a href="#3-响应体（正文）" class="headerlink" title="3.响应体（正文）"></a>3.响应体（正文）</h6><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>服务器返回的数据，由浏览器解析后展示给用户</span><br><span class="line">   用户看到页面所有的内容，都是在响应体中返回的</span><br></pre></td></tr></table></figure>

<h3 id="十、Servlet"><a href="#十、Servlet" class="headerlink" title="十、Servlet"></a>十、Servlet</h3><ul>
<li>servlet= server+applet 运行在服务器端的java程序。</li>
<li>Servlet是一个接口，一个类要想通过浏览器被访问到,那么这个类就必须直接或间接的实现Servlet接口</li>
</ul>
<p><strong>作用</strong></p>
<p>接收请求，处理逻辑，响应结果</p>
<h4 id="1-代码编写"><a href="#1-代码编写" class="headerlink" title="1.代码编写"></a>1.代码编写</h4><h5 id="1-编写普通java类，实现servlet接口"><a href="#1-编写普通java类，实现servlet接口" class="headerlink" title="1.编写普通java类，实现servlet接口"></a>1.编写普通java类，实现servlet接口</h5><p>重写抽象方法（service方法）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QuickServlet</span> <span class="keyword">implements</span> <span class="title">Servlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig servletConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServletConfig <span class="title">getServletConfig</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 对外提供服务</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        request:代表请求</span></span><br><span class="line"><span class="comment">        response：代表响应</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 向浏览器响应一句话</span></span><br><span class="line">        servletResponse.getWriter().write(<span class="string">"QuickServlet"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getServletInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2-配置web-xml"><a href="#2-配置web-xml" class="headerlink" title="2.配置web.xml"></a>2.配置web.xml</h5><p>配置servlet网络访问路径</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span><br><span class="line">&lt;web-app xmlns=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee"</span></span><br><span class="line">         xmlns:xsi=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span><br><span class="line">         xsi:schemaLocation=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"</span></span><br><span class="line">         version=<span class="string">"3.1"</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--</span><br><span class="line">        把QuickServlet交给tomcat管理</span><br><span class="line">            servlet-name：当前servlet的别名（使用类名即可）</span><br><span class="line">            servlet-<span class="class"><span class="keyword">class</span>：全限定类名</span></span><br><span class="line"><span class="class">    --&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">servlet</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">servlet</span>-<span class="title">name</span>&gt;<span class="title">QuickServlet</span>&lt;/<span class="title">servlet</span>-<span class="title">name</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">servlet</span>-<span class="title">class</span>&gt;<span class="title">cn</span>.<span class="title">itcast</span>.<span class="title">a_quick</span>.<span class="title">QuickServlet</span>&lt;/<span class="title">servlet</span>-<span class="title">class</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">servlet</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;!--</span></span><br><span class="line"><span class="class">        给<span class="title">servlet</span>设置一个网络的访问地址（路径）</span></span><br><span class="line"><span class="class">            <span class="title">servlet</span>-<span class="title">name</span>：给指定别名的<span class="title">servlet</span>配置映射</span></span><br><span class="line"><span class="class">            <span class="title">url</span>-<span class="title">pattern</span>：网络访问地址（注意：必须以/开头）</span></span><br><span class="line"><span class="class">    --&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">servlet</span>-<span class="title">mapping</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">servlet</span>-<span class="title">name</span>&gt;<span class="title">QuickServlet</span>&lt;/<span class="title">servlet</span>-<span class="title">name</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">url</span>-<span class="title">pattern</span>&gt;/<span class="title">quickServlet</span>&lt;/<span class="title">url</span>-<span class="title">pattern</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">servlet</span>-<span class="title">mapping</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">web</span>-<span class="title">app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="3-部署web项目"><a href="#3-部署web项目" class="headerlink" title="3.部署web项目"></a>3.部署web项目</h5><p><img src="/2020/04/29/summary_Web/1586827863361.png" alt="1586827863361"></p>
<h5 id="4-启动测试"><a href="#4-启动测试" class="headerlink" title="4.启动测试"></a>4.启动测试</h5><p><img src="/2020/04/29/summary_Web/1586827999815.png" alt="1586827999815"></p>
<h5 id="5-执行原理"><a href="#5-执行原理" class="headerlink" title="5.执行原理"></a>5.执行原理</h5><p><img src="/2020/04/29/summary_Web/1586829125774.png" alt="1586829125774"></p>
<h4 id="2-Servlet相关API"><a href="#2-Servlet相关API" class="headerlink" title="2.Servlet相关API"></a>2.Servlet相关API</h4><h5 id="1-生命周期"><a href="#1-生命周期" class="headerlink" title="1.生命周期"></a>1.生命周期</h5><p>生命周期：指的是一个对象从生（创建）到死（销毁）的一个过</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. servlet对象创建时，调用此方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig servletConfig)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 用户访问servlet时，调用此方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. servlet对象销毁时，调用此方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>创建</span><br><span class="line"><span class="code">	1）默认情况下</span></span><br><span class="line"><span class="code">		用户第一次访问时，创建servlet，执行init方法</span></span><br><span class="line"><span class="code">	2）修改创建时机</span></span><br><span class="line"><span class="code">		&lt;load-on-startup&gt;&lt;/load-onstartup&gt;</span></span><br><span class="line"><span class="code">			正数：4-N  【服务器启动时，创建】</span></span><br><span class="line"><span class="code">				补充：Tomcat的web.xml里有1,3 所以推荐4-n </span></span><br><span class="line"><span class="code">			负数（默认值）：-1 【用户第一次访问时，创建】</span></span><br><span class="line"><span class="code">	</span></span><br><span class="line"><span class="bullet">* </span>运行（提供服务）</span><br><span class="line"><span class="code">		用户每次访问时，都执行service方法</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">* </span>销毁</span><br><span class="line"><span class="code">		服务器正常关闭时，销毁servlet，执行destroy方法</span></span><br></pre></td></tr></table></figure>

<p><img src="/2020/04/29/summary_Web/1586831283207.png" alt="1586831283207"></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--servlet的生命周期--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>LifeServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>cn.itcast.b_api.LifeServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--tomcat启动时，创建servlet对象，执行init方法 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>4<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>LifeServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/lifeServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="2-ServletConfig"><a href="#2-ServletConfig" class="headerlink" title="2.ServletConfig"></a>2.ServletConfig</h5><p>Tomcat在Servlet对象创建时，执行init()方法，并创建一个ServletConfig 配置对象</p>
<ul>
<li>主要作用：读取web.xml配置文件Servlet中<init-param>信息，实现参数和代码的解耦</init-param></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EncodeServlet</span> <span class="keyword">implements</span> <span class="title">Servlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//  定义全局变量</span></span><br><span class="line">    <span class="keyword">private</span> ServletConfig servletConfig;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig servletConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.servletConfig = servletConfig;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServletConfig <span class="title">getServletConfig</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> servletConfig;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 用户访问，执行service方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// String encode = "GBK";</span></span><br><span class="line">        <span class="comment">// 读取配置文件的 init-param 参数</span></span><br><span class="line">        String encode = getServletConfig().getInitParameter(<span class="string">"encode"</span>);</span><br><span class="line">        servletResponse.getWriter().write(encode); <span class="comment">// 输出到浏览器</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getServletInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--servlet的配置对象--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>EncodeServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>cn.itcast.b_api.EncodeServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encode<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>EncodeServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/encodeServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="3-Servlet体系结构"><a href="#3-Servlet体系结构" class="headerlink" title="3.Servlet体系结构"></a>3.Servlet体系结构</h4><p><img src="/2020/04/29/summary_Web/1586832839002.png" alt="1586832839002"></p>
<h5 id="1-GenericServlet"><a href="#1-GenericServlet" class="headerlink" title="1.GenericServlet"></a>1.GenericServlet</h5><p>编写普通java类，继承GenericServlet抽象类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletDemo1</span> <span class="keyword">extends</span> <span class="title">GenericServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ServletDemo1 创建了..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.getServletConfig();  <span class="comment">// 调用父类的配置对象</span></span><br><span class="line">        servletResponse.getWriter().write(<span class="string">"ServletDemo1 extends GenericServlet"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ServletDemo1 销毁了.."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>配置web.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--servlet继承genericServlet--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletDemo1<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>cn.itcast.c_inherit.ServletDemo1<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletDemo1<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/servletDemo1<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="2-HttpServlet"><a href="#2-HttpServlet" class="headerlink" title="2.HttpServlet"></a>2.HttpServlet</h5><p>编写普通java类，继承HttpServlet抽象类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletDemo2</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        resp.getWriter().write(<span class="string">"get...."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        resp.getWriter().write(<span class="string">"post..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>配置web.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--servlet继承httpServlet--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletDemo2<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>cn.itcast.c_inherit.ServletDemo2<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletDemo2<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/servletDemo2<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="4-报错信息"><a href="#4-报错信息" class="headerlink" title="4.报错信息"></a>4.报错信息</h4><h5 id="1-响应状态码405"><a href="#1-响应状态码405" class="headerlink" title="1.响应状态码405"></a>1.响应状态码405</h5><p>请求方法没有重写…..</p>
<p><img src="/2020/04/29/summary_Web/1586835525081.png" alt="1586835525081"></p>
<h5 id="2-响应状态码500"><a href="#2-响应状态码500" class="headerlink" title="2.响应状态码500"></a>2.响应状态码500</h5><p>java代码写错了…</p>
<p><img src="/2020/04/29/summary_Web/1586835683969.png" alt="1586835683969"></p>
<h4 id="5-Servlet路径"><a href="#5-Servlet路径" class="headerlink" title="5.Servlet路径"></a>5.Servlet路径</h4><h5 id="5-1-url-pattern"><a href="#5-1-url-pattern" class="headerlink" title="5.1 url-pattern"></a>5.1 url-pattern</h5><p>作用：将一个请求网络地址和servlet类建立一个映射关系</p>
<p><img src="/2020/04/29/summary_Web/1586835899369.png" alt="1586835899369"> </p>
<h6 id="5-1-1-Servlet映射多个url"><a href="#5-1-1-Servlet映射多个url" class="headerlink" title="5.1.1 Servlet映射多个url"></a>5.1.1 Servlet映射多个url</h6><p><img src="/2020/04/29/summary_Web/1586836124261.png" alt="1586836124261"> </p>
<h6 id="5-1-2-url映射模式【了解】"><a href="#5-1-2-url映射模式【了解】" class="headerlink" title="5.1.2 url映射模式【了解】"></a>5.1.2 url映射模式【了解】</h6><p>配置 <url-pattern> url地址取值可以是：</url-pattern></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>精确匹配(掌握) </span><br><span class="line"> 		/servletDemo3  </span><br><span class="line"><span class="bullet">2. </span>目录匹配 </span><br><span class="line"><span class="code">		/aa/*</span></span><br><span class="line"><span class="bullet">3. </span>后缀匹配 </span><br><span class="line"><span class="code">		*.xxx	例如：*.do</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        只要浏览器符合目录匹配规则,都可以访问到这个servlet：</span></span><br><span class="line"><span class="comment">             /aa/abc</span></span><br><span class="line"><span class="comment">            /aa/asadfasdf</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletDemo4<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>cn.itcast.d_url_pattern.ServletDemo4<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletDemo4<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/aa/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">            只要浏览器符合后缀匹配规则，都可以访问到这个servlet</span></span><br><span class="line"><span class="comment">                aa.do</span></span><br><span class="line"><span class="comment">                bb.do</span></span><br><span class="line"><span class="comment">                xx.do</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletDemo5<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>cn.itcast.d_url_pattern.ServletDemo5<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletDemo5<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>





<h5 id="5-2-相对-绝对路径"><a href="#5-2-相对-绝对路径" class="headerlink" title="5.2 相对/绝对路径"></a>5.2 相对/绝对路径</h5><ul>
<li>现阶段我们访问资源的方式越来越多，请求路径在编写时难免出现混淆</li>
</ul>
<ol>
<li><p>浏览器的地址栏</p>
</li>
<li><p>a标签的href属性</p>
</li>
<li><p>form表单的action属性</p>
</li>
<li><p>js的loation.href属性</p>
</li>
<li><p>ajax请求地址</p>
</li>
</ol>
<p><strong>这里我们复习下路径规则：</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh-CN"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>path<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>测试访问路径：http://localhost:8080/day08_servlet_xml/static/path.html<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h4</span>&gt;</span>绝对路径<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    在开发时，强烈建议使用绝对路径</span></span><br><span class="line"><span class="comment">    完整：协议://域名:端口/项目名/资源名</span></span><br><span class="line"><span class="comment">    推荐：/项目名/资源名</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://localhost:8080/day08_servlet_xml/quickServlet"</span>&gt;</span>带http协议的绝对路径：quickServlet<span class="tag">&lt;/<span class="name">a</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/day08_servlet_xml/quickServlet"</span>&gt;</span>不带http协议的绝对路径：quickServlet<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h4</span>&gt;</span>相对路径路径<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    相对路径语法：</span></span><br><span class="line"><span class="comment">        ./ 当前目录  注：./可以省略不写</span></span><br><span class="line"><span class="comment">        ../ 上级目录</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"../quickServlet"</span>&gt;</span>相对路径：quickServlet<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>





<h4 id="6-Servlet3-0"><a href="#6-Servlet3-0" class="headerlink" title="6. Servlet3.0"></a>6. Servlet3.0</h4><ul>
<li>通过注解配置Servlet，简化web.xml配置Servlet复杂性，提高开发效率，几乎所有的框架都在使用注解</li>
</ul>
<h5 id="①-创建web工程【注解】"><a href="#①-创建web工程【注解】" class="headerlink" title="① 创建web工程【注解】"></a>① 创建web工程【注解】</h5><p><img src="/2020/04/29/summary_Web/1586845454312.png" alt="1586845454312"> </p>
<h5 id="②-编写普通java类，继承HttpServlet"><a href="#②-编写普通java类，继承HttpServlet" class="headerlink" title="② 编写普通java类，继承HttpServlet"></a>② 编写普通java类，继承HttpServlet</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QuickServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        resp.getWriter().write(<span class="string">"QuickServlet....3.0"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        resp.getWriter().write(<span class="string">"QuickServlet....3.0"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="③-配置-WebServlet"><a href="#③-配置-WebServlet" class="headerlink" title="③ 配置@WebServlet"></a>③ 配置@WebServlet</h5><p><img src="/2020/04/29/summary_Web/1586845665415.png" alt="1586845665415"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @WebServlet(name = "QuickServlet",urlPatterns = "/quickServlet")</span></span><br><span class="line"><span class="comment">// @WebServlet(urlPatterns = "/quickServlet")</span></span><br><span class="line"><span class="comment">// @WebServlet(value = "/quickServlet")</span></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/quickServlet"</span>) <span class="comment">// 注解中有且仅有一个属性，名为value时，属性名可以省略...</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QuickServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="十一、Request"><a href="#十一、Request" class="headerlink" title="十一、Request"></a>十一、Request</h3><ul>
<li><p>用户通过浏览器访问服务器时，Tomcat将HTTP请求中所有的信息都封装在Request对象中</p>
</li>
<li><p>作用：开发人员可以通过request对象方法，来获取浏览器发送的所有信息.</p>
</li>
</ul>
<p><strong>Request体系结构</strong></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ServletRequest</span><br><span class="line"><span class="code">	|</span></span><br><span class="line">HttpServletRequest</span><br><span class="line"><span class="code">	|</span></span><br><span class="line">org.apache.catalina.connector.RequestFacade（由tomcat厂商提供实现类）</span><br></pre></td></tr></table></figure>

<p>在javaEE中我们是面向接口编程</p>
<h4 id="1-获取请求行信息"><a href="#1-获取请求行信息" class="headerlink" title="1. 获取请求行信息"></a>1. 获取请求行信息</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>例如：</span><br><span class="line"><span class="code">		GET /day09_request/requestDemo1 HTTP/1.1</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">* </span>相关API：</span><br><span class="line"><span class="bullet">	1. </span>获取请求方式 GET【掌握】</span><br><span class="line"><span class="code">			String getMethod()  </span></span><br><span class="line"><span class="code">			</span></span><br><span class="line"><span class="bullet">	2. </span>获取项目虚拟路径（项目名）/day09_request【掌握】</span><br><span class="line"><span class="code">			String getContextPath()  </span></span><br><span class="line"><span class="code">			</span></span><br><span class="line"><span class="bullet">	3. </span>获取URI /day09_request/requestDemo1</span><br><span class="line"><span class="code">			统一资源标识符（范围广）  共和国</span></span><br><span class="line"><span class="code">			String getRequestURI() </span></span><br><span class="line"><span class="code">			</span></span><br><span class="line"><span class="bullet">	4. </span>获取URL http://localhost:8080/day09_request/requestDemo1</span><br><span class="line"><span class="code">			统一资源定位符（确定某一个地址） 中华人民共和国</span></span><br><span class="line"><span class="code">			StringBuffer getRequestURL()  </span></span><br><span class="line"><span class="code">			</span></span><br><span class="line"><span class="bullet">	5. </span>获取协议和版本号	HTTP/1.1</span><br><span class="line"><span class="code">			String getProtocol()</span></span><br><span class="line"><span class="code">			</span></span><br><span class="line"><span class="bullet">	6. </span>获取客户端ip</span><br><span class="line"><span class="code">			String getRemoteAddr()</span></span><br></pre></td></tr></table></figure>



<h4 id="2-获取请求头信息"><a href="#2-获取请求头信息" class="headerlink" title="2.获取请求头信息"></a>2.获取请求头信息</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>例如：</span><br><span class="line"><span class="code">		Host: localhost:8080</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">* </span>相关API：</span><br><span class="line"><span class="bullet">	1. </span>获取知道请求头名称对应的值，注：名称不区分大小写</span><br><span class="line"><span class="code">			String getHeader(String name)  </span></span><br><span class="line"><span class="code">			</span></span><br><span class="line"><span class="bullet">	2. </span>获取所有请求头的名称</span><br><span class="line"><span class="code">			Enumeration&lt;String&gt; getHeaderNames()  </span></span><br><span class="line"><span class="code">			注：是Iterator前身</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/requestDemo2"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RequestDemo2</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 获取所有的请求头名称</span></span><br><span class="line">        Enumeration&lt;String&gt; enumeration = req.getHeaderNames();</span><br><span class="line">        <span class="comment">// 遍历</span></span><br><span class="line">        <span class="keyword">while</span>(enumeration.hasMoreElements())&#123;</span><br><span class="line">            <span class="comment">// 取出元素名（请求头名称）</span></span><br><span class="line">            String name = enumeration.nextElement();</span><br><span class="line">            <span class="comment">// 根据名称获取值</span></span><br><span class="line">            String value = req.getHeader(name);</span><br><span class="line">            System.out.println(name +<span class="string">" : "</span>+ value);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="①-案例：视频防盗链"><a href="#①-案例：视频防盗链" class="headerlink" title="① 案例：视频防盗链"></a>① 案例：视频防盗链</h5><ul>
<li>referer : 请求来源</li>
</ul>
<p><img src="/2020/04/29/summary_Web/1586917471622.png" alt="1586917471622"> </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    视频防盗链</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/refererRequest"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RefererRequest</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        resp.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">        <span class="comment">// 1.获取请求来源（如果是浏览器地址直接访问的话，referer就是null）</span></span><br><span class="line">        String referer = req.getHeader(<span class="string">"referer"</span>);</span><br><span class="line">        <span class="comment">// 2.判断是不是自家网站发起的请求</span></span><br><span class="line">        <span class="keyword">if</span> (referer != <span class="keyword">null</span> &amp;&amp; referer.startsWith(<span class="string">"http://localhost:8080"</span>)) &#123;</span><br><span class="line">            resp.getWriter().write(<span class="string">"正常播放视频..."</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            resp.getWriter().write(<span class="string">"想看吗？来优酷吧...."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="②-案例：浏览器兼容性"><a href="#②-案例：浏览器兼容性" class="headerlink" title="② 案例：浏览器兼容性"></a>② 案例：浏览器兼容性</h5><ul>
<li>现在后端处理兼容性问题的需求越来越少，基本都是前端工程师完成的….</li>
<li>user-agen：浏览器版本信息</li>
</ul>
<p><img src="/2020/04/29/summary_Web/1586918357066.png" alt="1586918357066"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    浏览器兼容性</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/userAgentReqeust"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserAgentReqeust</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        resp.setContentType(<span class="string">"text/html;charset=utf-8"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1.获取浏览器版本信息</span></span><br><span class="line">        String userAgent = req.getHeader(<span class="string">"user-agent"</span>);</span><br><span class="line">        <span class="comment">// 2.判断浏览器版本</span></span><br><span class="line">        <span class="keyword">if</span> (userAgent.contains(<span class="string">"Chrome"</span>)) &#123;</span><br><span class="line">            resp.getWriter().write(<span class="string">"浏览器：谷歌"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (userAgent.contains(<span class="string">"Firefox"</span>)) &#123;</span><br><span class="line">            resp.getWriter().write(<span class="string">"浏览器：火狐"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            resp.getWriter().write(<span class="string">"浏览器：其他"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-获取请求参数（体）"><a href="#3-获取请求参数（体）" class="headerlink" title="3.获取请求参数（体）"></a>3.获取请求参数（体）</h4><ul>
<li>不论get还是post请求方式，都可以使用下列方法来获取请求参数</li>
<li>在web课程里面，get和post处理的业务逻辑都是一样的….</li>
</ul>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>参数</span><br><span class="line"><span class="code">		username=jack&amp;password=123&amp;hobby=drink&amp;hobby=perm</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">* </span>API</span><br><span class="line"><span class="bullet">	1. </span>获取指定参数名的值  username=jack</span><br><span class="line"><span class="code">			String getParameter(String name)</span></span><br><span class="line"><span class="code">			</span></span><br><span class="line"><span class="bullet">	2. </span>获取指定参数名的值数组  hobby=drink&amp;hobby=perm</span><br><span class="line"><span class="code">			String[] getParameterValues(String name)</span></span><br><span class="line"><span class="code">	</span></span><br><span class="line"><span class="bullet">	3. </span>获取所有参数名和对应值数组，参数名 name（key），值数组 value，封装map集合</span><br><span class="line"><span class="code">			Map&lt;String,String[]&gt; getParameterMap()</span></span><br><span class="line"><span class="code">			</span></span><br><span class="line"><span class="code">			</span></span><br><span class="line"><span class="bullet">* </span>中文乱码【重点】</span><br><span class="line"><span class="code">	get：在tomcat8及以上版本，内部URL编码（UTF-8）</span></span><br><span class="line"><span class="code">	post：编码解码不一致，造成乱码现象</span></span><br><span class="line"><span class="code">		客户端（浏览器）编码：UTF-8</span></span><br><span class="line"><span class="code">		服务器默认     解码：ISO-8859-1 拉丁文</span></span><br><span class="line"><span class="code">		指定解码：void setCharacterEncoding(String env)</span></span><br><span class="line"><span class="code">			注：这哥们必须在方法内，行首</span></span><br></pre></td></tr></table></figure>

<h4 id="4-BeanUtils"><a href="#4-BeanUtils" class="headerlink" title="4.BeanUtils"></a>4.BeanUtils</h4><p>将前端提交的数据，直接封装到你想要的JavaBean中</p>
<h5 id="①导入jar包"><a href="#①导入jar包" class="headerlink" title="①导入jar包"></a>①导入jar包</h5><p><img src="/2020/04/29/summary_Web/1586922329170.png" alt="1586922329170"> </p>
<h5 id="②-使用工具类封装数据"><a href="#②-使用工具类封装数据" class="headerlink" title="② 使用工具类封装数据"></a>② 使用工具类封装数据</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>BeanUtils测试：<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/day09_request/requestDemo4"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">    用户：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    密码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    爱好：</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"hobby"</span> <span class="attr">value</span>=<span class="string">"somke"</span>/&gt;</span>抽烟</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"hobby"</span> <span class="attr">value</span>=<span class="string">"drink"</span>/&gt;</span>喝酒</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"hobby"</span> <span class="attr">value</span>=<span class="string">"perm"</span>/&gt;</span>烫头</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"post提交..."</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/requestDemo4"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RequestDemo4</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用BeanUtils快速封装数据到 User对象中</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        request.setCharacterEncoding(<span class="string">"UTF-8"</span>);<span class="comment">// 指定解码方式</span></span><br><span class="line">        <span class="comment">// 1.获取所有参数的数据，map集合</span></span><br><span class="line">        Map&lt;String, String[]&gt; parameterMap = request.getParameterMap();</span><br><span class="line">        <span class="comment">// 2.创建user对象</span></span><br><span class="line">        User user = <span class="keyword">new</span> User();</span><br><span class="line">        <span class="comment">// 3.调用工具类，实现快速封装</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            BeanUtils.populate(user, parameterMap);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InvocationTargetException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><img src="/2020/04/29/summary_Web/1586923398682.png" alt="1586923398682"> </p>
<h4 id="5-请求转发"><a href="#5-请求转发" class="headerlink" title="5.请求转发"></a>5.请求转发</h4><ul>
<li>一种在服务器内部的资源跳转方式</li>
</ul>
<p><img src="/2020/04/29/summary_Web/1586931106703.png" alt="1586931106703"> </p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>API</span><br><span class="line"><span class="bullet">	1. </span>通过reqeust对象，获得转发器对象</span><br><span class="line"><span class="code">			RequestDispatcher getRequestDispatcher(String path)</span></span><br><span class="line"><span class="code">			</span></span><br><span class="line"><span class="bullet">	2. </span>通过转发器对象，实现转发功能</span><br><span class="line"><span class="code">			void forward(ServletRequest request, ServletResponse response)  </span></span><br><span class="line"><span class="code">			</span></span><br><span class="line"><span class="bullet">* </span>请求转发特点</span><br><span class="line"><span class="code">	浏览器：发了一次请求</span></span><br><span class="line"><span class="code">	地址栏：没有发生改变</span></span><br><span class="line"><span class="code">	只能转发到服务器内部资源....</span></span><br><span class="line"><span class="code">	</span></span><br><span class="line"><span class="bullet">* </span>链式编程</span><br><span class="line"><span class="code">		request.getRequestDispatcher("/bServlet").forward(reqeust,response)</span></span><br></pre></td></tr></table></figure>

<p><img src="/2020/04/29/summary_Web/1586932052661.png" alt="1586932052661"> </p>
<h4 id="6-域对象（共享数据）"><a href="#6-域对象（共享数据）" class="headerlink" title="6.域对象（共享数据）"></a>6.域对象（共享数据）</h4><ul>
<li>域对象：一个有作用范围的对象，可以在范围内共享数据</li>
<li>request域：代表一次请求的范围，一般用于一次请求中转发的多个资源中共享数据</li>
</ul>
<p><img src="/2020/04/29/summary_Web/1586933024688.png" alt="1586933024688"> </p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>API</span><br><span class="line"><span class="bullet">	1. </span>设置数据</span><br><span class="line"><span class="code">			void setAttribute(String name, Object o)</span></span><br><span class="line"><span class="code">			</span></span><br><span class="line"><span class="bullet">	2. </span>获取数据</span><br><span class="line"><span class="code">			Object getAttribute(String name)</span></span><br><span class="line"><span class="code">			</span></span><br><span class="line"><span class="bullet">	3. </span>删除数据</span><br><span class="line"><span class="code">			void removeAttribute(String name)</span></span><br><span class="line"><span class="code">			</span></span><br><span class="line"><span class="code">			</span></span><br><span class="line"><span class="bullet">* </span>生命周期</span><br><span class="line"><span class="bullet">	1. </span>何时创建？</span><br><span class="line"><span class="code">			用户发送请求时，创建request</span></span><br><span class="line"><span class="bullet">	2. </span>何时销毁</span><br><span class="line"><span class="code">			服务器返回响应是，销毁request</span></span><br><span class="line"><span class="code">	</span></span><br><span class="line"><span class="bullet">	3. </span>作用范围？</span><br><span class="line"><span class="code">			一次请求，包含多次转发</span></span><br></pre></td></tr></table></figure>

<h3 id="十二、ServletContext"><a href="#十二、ServletContext" class="headerlink" title="十二、ServletContext"></a>十二、ServletContext</h3><h4 id="1-概述-2"><a href="#1-概述-2" class="headerlink" title="1.概述"></a>1.概述</h4><ul>
<li>web容器（tomcat）在启动时，它会为每个web项目承建一个对应的ServletContext对象</li>
<li>它代表：当前web项目</li>
</ul>
<p><strong>主要作用</strong></p>
<ol>
<li>域对象（共享数据）</li>
<li>获取资源在服务器的真实地址</li>
<li>获取全局的配置参数</li>
<li>获取文件MIME类型</li>
</ol>
<p><strong>获取ServletContext对象</strong></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>通过request对象获得</span><br><span class="line"><span class="code">		ServletContext sc = request.getServletContext();</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">2. </span>继承HttpServlet后，可以直接调用</span><br><span class="line"><span class="code">		ServletContext sc = getServletContext();</span></span><br></pre></td></tr></table></figure>

<h4 id="2-域对象（共享数据）"><a href="#2-域对象（共享数据）" class="headerlink" title="2.域对象（共享数据）"></a>2.域对象（共享数据）</h4><ul>
<li>在当前项目范围内，共享数据（多个servlet都可以获取）</li>
</ul>
<p><img src="/2020/04/29/summary_Web/1586692752466.png" alt="1586692752466"></p>
<ol>
<li>存储数据<pre><code>void setAttribute(String name,Object value)</code></pre></li>
<li>获取数据<pre><code>Object getAttribute(String name)</code></pre></li>
<li>删除数据<pre><code>void removeAttribute(String name)</code></pre></li>
</ol>
<p><strong>生命周期</strong></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>何时创建？</span><br><span class="line"><span class="code">		项目加载时，创建</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">2. </span>何时销毁？</span><br><span class="line"><span class="code">		项目卸载时，销毁</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">3. </span>作用范围？</span><br><span class="line"><span class="code">		与项目共存亡（多个servlet都可以操作它）</span></span><br></pre></td></tr></table></figure>

<h4 id="3-获取资源在服务器的真实地址"><a href="#3-获取资源在服务器的真实地址" class="headerlink" title="3.获取资源在服务器的真实地址"></a>3.获取资源在服务器的真实地址</h4><ul>
<li>可以实现web项目的移植性…动态获取文件真实路径</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">* API</span><br><span class="line">		<span class="function">String <span class="title">getRealPath</span><span class="params">(String path)</span></span>;</span><br></pre></td></tr></table></figure>

<h4 id="4-获取全局的配置参数"><a href="#4-获取全局的配置参数" class="headerlink" title="4.获取全局的配置参数"></a>4.获取全局的配置参数</h4><ul>
<li>读取web.xml配置文件中<context-param>标签信息，实现参数和代码的解耦（多个servlet都可以获取）</context-param></li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">"3.1"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--全局配置参数：所有的servlet都可以读取...--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encode<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/ContextPathServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ContextPathServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 获取全局参数</span></span><br><span class="line">        String value = request.getServletContext().getInitParameter(<span class="string">"encode"</span>);</span><br><span class="line">        System.out.println(<span class="string">"全局配置参数："</span>+value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-获取文件MIME类型"><a href="#5-获取文件MIME类型" class="headerlink" title="5. 获取文件MIME类型"></a>5. 获取文件MIME类型</h4><ul>
<li>在互联网通信过程中定义的一种文件数据类型</li>
<li>格式：<code>大类型/小类型</code> 例如：<code>text/html image/jpeg</code></li>
</ul>
<p><img src="/2020/04/29/summary_Web/1587090560095.png" alt="1587090560095"> </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/day10_servletContext/MimeServlet?filename=luola.avi"</span>&gt;</span>获取文件的mime类型<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/MimeServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MimeServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 获取指定文件的mime类型</span></span><br><span class="line">        <span class="comment">// 获取请求参数</span></span><br><span class="line">        String filename = request.getParameter(<span class="string">"filename"</span>);</span><br><span class="line">        <span class="comment">// 获取文件的mime类型</span></span><br><span class="line">        String mimeType = request.getServletContext().getMimeType(filename);</span><br><span class="line">        response.getWriter().write(filename + <span class="string">"---"</span> + mimeType);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="6-网站访问次数"><a href="#6-网站访问次数" class="headerlink" title="6.网站访问次数"></a>6.网站访问次数</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置response响应编码</span></span><br><span class="line">       response.setContentType(<span class="string">"text/html;charset=utf-8"</span>);</span><br><span class="line">       response.getWriter().write(<span class="string">"&lt;h1&gt;itcast博客网站&lt;/h1&gt;"</span>);</span><br><span class="line"></span><br><span class="line">       <span class="comment">// 用户每次访问，从域中取出，加1，再存进去</span></span><br><span class="line">       ServletContext servletContext = request.getServletContext();</span><br><span class="line">       <span class="comment">// 从域中取出</span></span><br><span class="line">       Integer count = (Integer) servletContext.getAttribute(<span class="string">"count"</span>);</span><br><span class="line">       <span class="comment">// 加1</span></span><br><span class="line">       count++;</span><br><span class="line">       <span class="comment">// 再存进去</span></span><br><span class="line">       servletContext.setAttribute(<span class="string">"count"</span>, count);</span><br><span class="line"></span><br><span class="line">       response.getWriter().write(<span class="string">"&lt;div&gt;你是，第"</span> + count + <span class="string">"位访问此网站...&lt;/div&gt;"</span>);</span><br></pre></td></tr></table></figure>

<h3 id="十三、Response"><a href="#十三、Response" class="headerlink" title="十三、Response"></a>十三、Response</h3><p><strong>Response体系结构</strong></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ServletResponse 接口</span><br><span class="line"><span class="code">		|	</span></span><br><span class="line">HttpServletResponse 接口</span><br><span class="line"><span class="code">		|	</span></span><br><span class="line">org.apache.catalina.connector.ResponseFacade 实现类（由tomcat提供的）</span><br></pre></td></tr></table></figure>

<h4 id="1-设置Http响应消息"><a href="#1-设置Http响应消息" class="headerlink" title="1. 设置Http响应消息"></a>1. 设置Http响应消息</h4><p><strong>响应行</strong></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>格式</span><br><span class="line"><span class="code">	 	协议/版本号 状态码</span></span><br><span class="line"><span class="code">	 </span></span><br><span class="line"><span class="bullet">* </span>例如</span><br><span class="line"><span class="code">		HTTP/1.1 200</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">* </span>API</span><br><span class="line"><span class="bullet">	1. </span>设置状态码</span><br><span class="line"><span class="code">			void setStatus(int sc)</span></span><br></pre></td></tr></table></figure>



<p><strong>响应头</strong></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>格式</span><br><span class="line"><span class="code">		响应头名称：响应头的值</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">* </span>例如</span><br><span class="line"><span class="code">		Location:http://www.itcast.cn</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">* </span>API</span><br><span class="line"><span class="bullet">	1. </span>设置指定头名称和对应的值</span><br><span class="line"><span class="code">			void setHeader(String name, String value)</span></span><br></pre></td></tr></table></figure>



<p><strong>响应体【重点】</strong></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>API（输出流对象）</span><br><span class="line"><span class="bullet">	1. </span>字符输出流</span><br><span class="line"><span class="code">			PrintWriter getWriter()</span></span><br><span class="line"><span class="code">	</span></span><br><span class="line"><span class="bullet">	2. </span>字节输出流</span><br><span class="line"><span class="code">			ServletOutputStream getOutputStream()</span></span><br><span class="line"><span class="code">			</span></span><br><span class="line"><span class="code">	注意：在同一个servlet中，二种类型的输出流不能同时存在，互斥</span></span><br></pre></td></tr></table></figure>



<h4 id="2-响应重定向"><a href="#2-响应重定向" class="headerlink" title="2. 响应重定向"></a>2. 响应重定向</h4><p><strong>需求</strong></p>
<p>用户访问AServlet后，服务器告诉浏览器重定向到BServlet</p>
<p><img src="/2020/04/29/summary_Web/1587094154857.png" alt="1587094154857"> </p>
<p><strong>步骤分析</strong></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>方式一</span><br><span class="line"><span class="code">	// 1.设置状态码</span></span><br><span class="line"><span class="code">		response.setStatus(302);</span></span><br><span class="line"><span class="code">	// 2.设置响应头 Location</span></span><br><span class="line"><span class="code">		response.setHeader("Location","重定向网络地址");</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">* </span>方式二</span><br><span class="line"><span class="code">	// 1.response这哥们封装专门处理重定向的方法</span></span><br><span class="line"><span class="code">		response.sendRedirect("重定向网络地址");</span></span><br></pre></td></tr></table></figure>



<p><strong>重定向特点</strong></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>地址栏会发生改变</span><br><span class="line"></span><br><span class="line"><span class="bullet">2. </span>重定向是二次请求</span><br><span class="line"></span><br><span class="line"><span class="bullet">3. </span>重定向是客户端（浏览器）行为，可以跳转到服务器外部资源...</span><br><span class="line"></span><br><span class="line"><span class="bullet">4. </span>不能使用request域共享数据</span><br></pre></td></tr></table></figure>





<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/AServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"AServlet执行了...."</span>);</span><br><span class="line">       <span class="comment">/* // 1.设置状态码</span></span><br><span class="line"><span class="comment">        response.setStatus(302);</span></span><br><span class="line"><span class="comment">        // 2.设置响应头 Location</span></span><br><span class="line"><span class="comment">        response.setHeader("Location","/day10_response/BServlet");*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1.response这哥们封装专门处理重定向的方法</span></span><br><span class="line">        response.sendRedirect(<span class="string">"http://www.itcast.cn"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>转发与重定向的区别</strong></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>哪个对象</span><br><span class="line"><span class="code">	转发（request对象的方法）		</span></span><br><span class="line"><span class="code">		request.getRequestDispatcher("/bServlet").forward(request,response);</span></span><br><span class="line"><span class="code">	重定向（response对象的方法）		</span></span><br><span class="line"><span class="code">		response.sendRedirect("/day10_response/bServlet");</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">2. </span>几次请求</span><br><span class="line"><span class="code">	转发</span></span><br><span class="line"><span class="code">		地址栏： 没有改变</span></span><br><span class="line"><span class="code">		浏览器： 发了一次请求</span></span><br><span class="line"><span class="code">		服务器： 只有一对请求和响应对象</span></span><br><span class="line"><span class="code">		发生的位置： 服务器</span></span><br><span class="line"><span class="code">	重定向</span></span><br><span class="line"><span class="code">		地址栏： 发生了改变</span></span><br><span class="line"><span class="code">		浏览器： 发了两次请求</span></span><br><span class="line"><span class="code">		服务器： 有两对请求和响应对象</span></span><br><span class="line"><span class="code">		发生的位置： 浏览器</span></span><br><span class="line"><span class="code">			</span></span><br><span class="line"><span class="bullet">3. </span>小结</span><br><span class="line"><span class="code">	写法 </span></span><br><span class="line"><span class="code">		转发("/servlet资源路径") 服务器内部行为</span></span><br><span class="line"><span class="code">		重定向 ("/虚拟路径（项目名）/servlet资源路径") 浏览器外部行为</span></span><br><span class="line"><span class="code">	使用场景(重点掌握) </span></span><br><span class="line"><span class="code">		如果需要传递数据（request域），使用转发</span></span><br><span class="line"><span class="code">		如果不需要传递数据（request域），使用重定向</span></span><br></pre></td></tr></table></figure>



<h4 id="3-响应定时刷新"><a href="#3-响应定时刷新" class="headerlink" title="3. 响应定时刷新"></a>3. 响应定时刷新</h4><p><strong>需求</strong></p>
<p>在当前页面停留3秒钟之后，跳转到指定页面</p>
<ol>
<li><p>通过response设置响应头 Refresh</p>
<pre><code>response.setHeader(&quot;Refresh&quot;,&quot;间隔时间（秒）;跳转页面&quot;); </code></pre><h4 id="4-响应中文"><a href="#4-响应中文" class="headerlink" title="4. 响应中文"></a>4. 响应中文</h4></li>
</ol>
<p><strong>需求</strong></p>
<p>向页面输出中文数据没有乱码 </p>
<p><img src="/2020/04/29/summary_Web/1587096386741.png" alt="1587096386741"> </p>
<p><strong>步骤分析</strong></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>通过response获取字符输出流</span><br><span class="line"><span class="code">		PrintWriter pw = response.getWriter();</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">2. </span>通过字符输出输出文本</span><br><span class="line"><span class="code">		pw.write("中文....");</span></span><br></pre></td></tr></table></figure>



<p><strong>解决中文乱码</strong></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>指定服务器响应编码方式</span><br><span class="line"><span class="code">		response.setCharacterEncoding("GBK");</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">2. </span>统一浏览器和服务器编码</span><br><span class="line"><span class="code">		response.setContentType("text/html;charset=utf-8");</span></span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/EncodeServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EncodeServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//  指定服务器响应编码方式</span></span><br><span class="line">        <span class="comment">// response.setCharacterEncoding("UTF-8");</span></span><br><span class="line">        <span class="comment">// 统一浏览器和服务器编码</span></span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=utf-8"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1. 通过response获取字符输出流</span></span><br><span class="line">        PrintWriter pw = response.getWriter();</span><br><span class="line">        <span class="comment">// 2. 通过字符输出输出文本</span></span><br><span class="line">        pw.write(<span class="string">"中文...."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-文件下载"><a href="#5-文件下载" class="headerlink" title="5. 文件下载"></a>5. 文件下载</h4><p><strong>需求</strong></p>
<p>用户点击页面的链接，浏览器开始下载文件。 </p>
<h5 id="5-1-使用链接下载文件"><a href="#5-1-使用链接下载文件" class="headerlink" title="5.1 使用链接下载文件"></a>5.1 使用链接下载文件</h5><h6 id="①-将资料中的下载素材复制到web项目中"><a href="#①-将资料中的下载素材复制到web项目中" class="headerlink" title="① 将资料中的下载素材复制到web项目中"></a>① 将资料中的下载素材复制到web项目中</h6><p><img src="/2020/04/29/summary_Web/1587104917173.png" alt="1587104917173"> </p>
<h6 id="②-编写下载页面"><a href="#②-编写下载页面" class="headerlink" title="② 编写下载页面"></a>② 编写下载页面</h6><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh-CN"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>donload.html<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>文件下载<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h5</span>&gt;</span>超链接下载<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/day10_response/download/demo.docx"</span>&gt;</span>word文档<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/day10_response/download/car.jpg"</span>&gt;</span>图片下载<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/day10_response/download/test.zip"</span>&gt;</span>压缩包下载<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h5</span>&gt;</span>servlet下载<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>





<h6 id="③-缺点"><a href="#③-缺点" class="headerlink" title="③ 缺点"></a>③ 缺点</h6><ol>
<li>浏览器可识别的媒体类型，是直接打开而不是下载…</li>
<li>不能判断用户是否登录（vip），进行限制</li>
</ol>
<h5 id="5-2-使用Servlet下载文件【推荐…-】"><a href="#5-2-使用Servlet下载文件【推荐…-】" class="headerlink" title="5.2 使用Servlet下载文件【推荐….】"></a>5.2 使用Servlet下载文件【推荐….】</h5><ul>
<li>二个响应头二个字节流</li>
</ul>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>被下载文件的字节输入流</span><br><span class="line"><span class="code">		FileInputStream</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">2. </span>response字节输出流</span><br><span class="line"><span class="code">		ServletOutputStream</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">3. </span>告知客户端下载文件的MIME类型（最新的浏览器此步骤可以省略....）</span><br><span class="line"><span class="code">		Content-Type:MIME类型</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">4. </span>告知浏览器以附件的方式保存</span><br><span class="line"><span class="code">		Content-Disposition:attachment;filename=文件名</span></span><br><span class="line"><span class="code">			attachment 附件</span></span><br><span class="line"><span class="code">			filename=文件名</span></span><br></pre></td></tr></table></figure>





<p><strong>需求分析</strong></p>
<p><img src="/2020/04/29/summary_Web/1587105951884.png" alt="1587105951884"> </p>
<h6 id="①-download-html"><a href="#①-download-html" class="headerlink" title="① download.html"></a>① download.html</h6><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh-CN"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>donload.html<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>文件下载<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h5</span>&gt;</span>超链接下载<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/day10_response/download/demo.docx"</span>&gt;</span>word文档<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/day10_response/download/car.jpg"</span>&gt;</span>图片下载<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/day10_response/download/test.zip"</span>&gt;</span>压缩包下载<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h5</span>&gt;</span>servlet下载<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/day10_response/DownLoadServlet?filename=demo.docx"</span>&gt;</span>word文档<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/day10_response/DownLoadServlet?filename=girl.jpg"</span>&gt;</span>靓女<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/day10_response/DownLoadServlet?filename=禽兽.jpg"</span>&gt;</span>禽兽<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h6 id="②-DownLoadServlet"><a href="#②-DownLoadServlet" class="headerlink" title="② DownLoadServlet"></a>② DownLoadServlet</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/DownLoadServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DownLoadServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 1.获取请求文件名</span></span><br><span class="line">        String filename = request.getParameter(<span class="string">"filename"</span>);</span><br><span class="line">        <span class="comment">// 2.获取文件真实路径，封装到字节输入流</span></span><br><span class="line">        ServletContext servletContext = request.getServletContext();</span><br><span class="line">        String realPath = servletContext.getRealPath(<span class="string">"/download/"</span> + filename);</span><br><span class="line">        FileInputStream in = <span class="keyword">new</span> FileInputStream(realPath);</span><br><span class="line">        <span class="comment">// 3.告诉浏览器mime类型</span></span><br><span class="line">        String mimeType = servletContext.getMimeType(filename);</span><br><span class="line">        response.setContentType(mimeType);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4.告诉浏览器以附件方式保存</span></span><br><span class="line">        <span class="comment">// 解决中文乱码和浏览器兼容性</span></span><br><span class="line">        String userAgent = request.getHeader(<span class="string">"user-agent"</span>);</span><br><span class="line">        <span class="comment">// 调用工具类处理</span></span><br><span class="line">        filename = DownLoadUtils.getName(userAgent, filename);</span><br><span class="line"></span><br><span class="line">        response.setHeader(<span class="string">"content-disposition"</span>, <span class="string">"attachment;filename="</span> + filename);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 5.获取字节输出流</span></span><br><span class="line">        ServletOutputStream out = response.getOutputStream();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 6.io流的拷贝</span></span><br><span class="line">        <span class="keyword">byte</span>[] b = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">4096</span>];<span class="comment">// 4kb</span></span><br><span class="line">        <span class="keyword">int</span> len = -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>((len = in.read(b))!=-<span class="number">1</span>)&#123;</span><br><span class="line">            out.write(b, <span class="number">0</span>, len);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 7.释放资源</span></span><br><span class="line">        out.close(); <span class="comment">// out流对象，可以交给tomcat关闭</span></span><br><span class="line">        in.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h6 id="③-中文乱码"><a href="#③-中文乱码" class="headerlink" title="③ 中文乱码"></a>③ 中文乱码</h6><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>如果该下载文件名是中文的话，会出现乱码...</span><br><span class="line"><span class="code">	谷歌和绝大多数的浏览器是通过 url编码</span></span><br><span class="line"><span class="code">		URLEncode() 编码</span></span><br><span class="line"><span class="code">		URLDecode() 解码</span></span><br><span class="line"><span class="code">	火狐浏览器   base64编码</span></span><br><span class="line"><span class="code">	</span></span><br><span class="line"><span class="bullet">* </span>我们就需要考虑浏览器兼容性问题....</span><br><span class="line"><span class="code">	今天帅哥提供了判断浏览器不同编码的工具类直接使用即可....</span></span><br></pre></td></tr></table></figure>



<h6 id="④-hutool工具包…"><a href="#④-hutool工具包…" class="headerlink" title="④ hutool工具包….."></a>④ hutool工具包…..</h6><ul>
<li>这哥们封装了se阶段的很多基础操作…..</li>
</ul>
<p>官网：<a href="https://www.hutool.cn/" target="_blank" rel="noopener">https://www.hutool.cn/</a></p>
<p><img src="/2020/04/29/summary_Web/1587107888754.png" alt="1587107888754"> </p>
<p><img src="/2020/04/29/summary_Web/1587107939238.png" alt="1587107939238"> </p>
<h3 id="十四、Cookie"><a href="#十四、Cookie" class="headerlink" title="十四、Cookie"></a>十四、Cookie</h3><p>会话：</p>
<p>B/S架构中：从浏览器第一次给服务器发送请求时，建立会话；直到有一方断开，会话结束。</p>
<p>一次会话：包含多次请求响应。</p>
<h4 id="1-会话技术"><a href="#1-会话技术" class="headerlink" title="1.会话技术"></a>1.会话技术</h4><p><strong>问题：</strong>Http是一个无状态协议，同一个会话的连续两个请求相互独立，彼此并不了解</p>
<p><strong>作用</strong>：用于==存储==浏览器与服务器在请求和响应过程中产生的==数据==</p>
<p>客户端会话技术：cookie</p>
<p>服务器端会话技术：session</p>
<p><img src="/2020/04/29/summary_Web/1587172824573.png" alt="1587172824573"> </p>
<h4 id="2-概述"><a href="#2-概述" class="headerlink" title="2.概述"></a>2.概述</h4><p>Cookie作用：在一次会话的多次请求之间共享数据，将数据<strong>保存到客户端（浏览器）</strong></p>
<h4 id="3-快速入门"><a href="#3-快速入门" class="headerlink" title="3.快速入门"></a>3.快速入门</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>设置数据到cookie中</span><br><span class="line"><span class="code">	// 1.创建cookie对象，设置数据</span></span><br><span class="line"><span class="code">		Cookie cookie = new Cookie(String name,String value);</span></span><br><span class="line"><span class="code">	// 2.通过response，响应（返回）cookie</span></span><br><span class="line"><span class="code">		response.addCookie(cookie);</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">2. </span>从cookie中获取数据</span><br><span class="line"><span class="code">	// 1.通过request对象，接收cookie数组</span></span><br><span class="line"><span class="code">		Cookie[] cookies = request.getCookies();</span></span><br><span class="line"><span class="code">	// 2.遍历数组</span></span><br></pre></td></tr></table></figure>

<h4 id="4-Cookie细节"><a href="#4-Cookie细节" class="headerlink" title="4.Cookie细节"></a>4.Cookie细节</h4><h5 id="1-服务器发送多个Cookie？"><a href="#1-服务器发送多个Cookie？" class="headerlink" title="1.服务器发送多个Cookie？"></a>1.服务器发送多个Cookie？</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">服务器可以发送多个Cookie</span><br><span class="line">// 1. 创建多个cookie对象</span><br><span class="line"><span class="code">		Cookie cookie1 = new Cookie("name","lucy");</span></span><br><span class="line"><span class="code">		Cookie cookie2 = new Cookie("age","18");</span></span><br><span class="line"><span class="code">	// 2. 通过response响应多个</span></span><br><span class="line"><span class="code">		response.addCookie(cookie1);</span></span><br><span class="line"><span class="code">		response.addCookie(cookie2);</span></span><br></pre></td></tr></table></figure>

<h5 id="2-Cookie在浏览器保存时间？"><a href="#2-Cookie在浏览器保存时间？" class="headerlink" title="2.Cookie在浏览器保存时间？"></a>2.Cookie在浏览器保存时间？</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>默认情况下</span><br><span class="line"><span class="code">	浏览器关闭（会话结束），cookie销毁（内存）</span></span><br><span class="line"><span class="code">	</span></span><br><span class="line"><span class="bullet">* </span>设置cookie的存活时间</span><br><span class="line"><span class="code">		cookie.setMaxAge(int second); -- 单位是秒</span></span><br><span class="line"><span class="code">			正数：指定存活时间，持久化浏览器的磁盘中，到期后自动销毁</span></span><br><span class="line"><span class="code">			负数：默认浏览器关闭，cookie销毁</span></span><br><span class="line"><span class="code">			零：立即销毁（自杀）</span></span><br></pre></td></tr></table></figure>

<h5 id="3-Cookie是否可以存储中文？"><a href="#3-Cookie是否可以存储中文？" class="headerlink" title="3. Cookie是否可以存储中文？"></a>3. Cookie是否可以存储中文？</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>tomcat8之前的版本，不支持中文</span><br><span class="line"><span class="code">		URLEncoder 编码</span></span><br><span class="line"><span class="code">		URLDecoder 解码</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">* </span>tomcat8以后的版本，支持中文...</span><br><span class="line"><span class="code">	Rfc6265Cookie规范，不允许使用 分号、空格、逗号等一些特殊符号...</span></span><br></pre></td></tr></table></figure>

<h5 id="4-Cookie共享数据的范围？"><a href="#4-Cookie共享数据的范围？" class="headerlink" title="4. Cookie共享数据的范围？"></a>4. Cookie共享数据的范围？</h5><h6 id="1-在一个tomca服务器中，部署了多个web项目，那么这些web项目的Cookie能否共享？"><a href="#1-在一个tomca服务器中，部署了多个web项目，那么这些web项目的Cookie能否共享？" class="headerlink" title="1. 在一个tomca服务器中，部署了多个web项目，那么这些web项目的Cookie能否共享？"></a>1. 在一个tomca服务器中，部署了多个web项目，那么这些web项目的Cookie能否共享？</h6><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>默认情况下不可以</span><br><span class="line"><span class="code">	默认cookie的携带路径，是当前设置cookie的serlvet父路径。。。。</span></span><br><span class="line"><span class="code">		设置cookie：http://localhost:8080/day11_cookie/EncodeCookie</span></span><br><span class="line"><span class="code">		默认携带路径：http://localhost:8080/day11_cookie</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">* </span>指定cookie的携带路径</span><br><span class="line"><span class="code">		cookie.setPath(String path);</span></span><br><span class="line"><span class="code">		举例：</span></span><br><span class="line"><span class="code">			cookie.setPath("/");</span></span><br><span class="line"><span class="code">				/ 相当于 http://localhost:8080/</span></span><br><span class="line"><span class="code">			此cookie携带路径</span></span><br><span class="line"><span class="code">				访问</span></span><br><span class="line"><span class="code">                    http://localhost:8080/day11_cookie</span></span><br><span class="line"><span class="code">                    http://localhost:8080/day10_response</span></span><br><span class="line"><span class="code">                    </span></span><br><span class="line"><span class="bullet">* </span>注意</span><br><span class="line"><span class="code">		cookie的携带路径不同，名称可以重复....</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">* </span>课下练习题</span><br><span class="line"><span class="code">	设置cookie</span></span><br><span class="line"><span class="code">		http://localhost:8080/day11_cookie/aa/SetCookie</span></span><br><span class="line"><span class="code">	接收cookie</span></span><br><span class="line"><span class="code">		http://localhost:8080/day11_cookie/bb/GetCookie</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="code">	默认情况下，是否能获取aa目录下的cookie数据？</span></span><br><span class="line"><span class="code">		答案是不可以....</span></span><br><span class="line"><span class="code">	在当前项目下共享cookie</span></span><br><span class="line"><span class="code">		cookie.setPath("/项目名")</span></span><br></pre></td></tr></table></figure>

<h6 id="2-不同tomcat服务器之间Cookie能否共享？"><a href="#2-不同tomcat服务器之间Cookie能否共享？" class="headerlink" title="2.不同tomcat服务器之间Cookie能否共享？"></a>2.不同tomcat服务器之间Cookie能否共享？</h6><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>默认情况下不可以</span><br><span class="line"></span><br><span class="line"><span class="bullet">* </span>多个服务器之间的数据共享cookie，需要在同一个一级域名下</span><br><span class="line"><span class="code">		cookie.setDomain(".jd.com")</span></span><br></pre></td></tr></table></figure>

<p><img src="/2020/04/29/summary_Web/1587180002745.png" alt="1587180002745"></p>
<h4 id="5-Cookie特点"><a href="#5-Cookie特点" class="headerlink" title="5. Cookie特点"></a>5. Cookie特点</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>cookie存储数据都在客户端（浏览器）</span><br><span class="line"></span><br><span class="line"><span class="bullet">2. </span>cookie的存储数据只能是字符串</span><br><span class="line"></span><br><span class="line"><span class="bullet">3. </span>cookie单个大小不能超过4KB</span><br><span class="line"></span><br><span class="line"><span class="bullet">4. </span>同一个域名下cookie数量不能超过50个</span><br><span class="line"></span><br><span class="line"><span class="bullet">5. </span>cookie路径不同，可以重名出现</span><br><span class="line"></span><br><span class="line"><span class="bullet">6. </span>cookie存储的数据不太安全</span><br></pre></td></tr></table></figure>

<h4 id="6-综合案例"><a href="#6-综合案例" class="headerlink" title="6.综合案例"></a>6.综合案例</h4><h5 id="1-用户上次访问记录"><a href="#1-用户上次访问记录" class="headerlink" title="1.用户上次访问记录"></a>1.用户上次访问记录</h5><p><strong>需求</strong></p>
<p>访问一个Servlet，如果是第一次访问，则提示：您好，欢迎您的到来。</p>
<p>如果不是第一次访问，则提示：欢迎回来，您上次访问时间为: xxxx。</p>
<h6 id="1-1-需求分析"><a href="#1-1-需求分析" class="headerlink" title="1.1 需求分析"></a>1.1 需求分析</h6><p><img src="/2020/04/29/summary_Web/1587180788021.png" alt="1587180788021"> </p>
<h6 id="1-2-代码实现"><a href="#1-2-代码实现" class="headerlink" title="1.2 代码实现"></a>1.2 代码实现</h6><p>① LastTimeServlet</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/LastTimeServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LastTimeServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=utf-8"</span>);</span><br><span class="line">        <span class="comment">// 1.接收cookie数组，取出指定名称cookie对象</span></span><br><span class="line">        Cookie cookie = CookieUtils.findByName(<span class="string">"last_time"</span>, request.getCookies());</span><br><span class="line">        <span class="comment">// 2.判断</span></span><br><span class="line">        <span class="keyword">if</span> (cookie == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">// 不存在</span></span><br><span class="line">            response.getWriter().write(<span class="string">"&lt;h1&gt;欢迎您，首次访问....&lt;/h1&gt;"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 存在</span></span><br><span class="line">            String value = cookie.getValue();</span><br><span class="line">            response.getWriter().write(<span class="string">"&lt;h1&gt;欢迎回来，您上次访问时间："</span> + value + <span class="string">"&lt;/h1&gt;"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 3.创建cookie对象，记录本次访问时间</span></span><br><span class="line">        SimpleDateFormat simpleDateFormat = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy年MM月dd日-HH:mm:ss"</span>);</span><br><span class="line">        String currentTime = simpleDateFormat.format(<span class="keyword">new</span> Date());</span><br><span class="line">        cookie = <span class="keyword">new</span> Cookie(<span class="string">"last_time"</span>, currentTime);</span><br><span class="line">        <span class="comment">// 4.设置cookie存活1年</span></span><br><span class="line">        cookie.setMaxAge(<span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span> * <span class="number">365</span>);</span><br><span class="line">        <span class="comment">// 5.response响应cookie</span></span><br><span class="line">        response.addCookie(cookie);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>② CookieUtils</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CookieUtils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        根据指定名称，查找cookie对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Cookie <span class="title">findByName</span><span class="params">(String name, Cookie[] cookies)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 非空判断</span></span><br><span class="line">        <span class="keyword">if</span> (cookies != <span class="keyword">null</span> &amp;&amp; cookies.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// 遍历</span></span><br><span class="line">            <span class="keyword">for</span> (Cookie cookie : cookies) &#123;</span><br><span class="line">                <span class="comment">// 判断是否有指定名称的cookie</span></span><br><span class="line">                <span class="keyword">if</span> (name.equals(cookie.getName())) &#123;</span><br><span class="line">                    <span class="keyword">return</span> cookie;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 没找到返回null</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>jsp中响应内容使用out，不用response，因为，Tomcat会优先解析并输出response缓冲区的内容，再来解析输出out缓冲区的内容</strong></p>
<h4 id="2-商品浏览记录"><a href="#2-商品浏览记录" class="headerlink" title="2.商品浏览记录"></a>2.商品浏览记录</h4><p><strong>需求</strong></p>
<p>做一个商品页面，当我们访问后，在页面上点击查看商品浏览记录后，可以查看到以前浏览过的商品信息</p>
<h5 id="2-1-需求分析"><a href="#2-1-需求分析" class="headerlink" title="2.1 需求分析"></a>2.1 需求分析</h5><p><img src="/2020/04/29/summary_Web/1587190985155.png" alt="1587190985155"> </p>
<h5 id="2-2-代码实现"><a href="#2-2-代码实现" class="headerlink" title="2.2 代码实现"></a>2.2 代码实现</h5><h6 id="①-goods-html"><a href="#①-goods-html" class="headerlink" title="① goods.html"></a>① goods.html</h6><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh-CN"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>goods<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>商品列表<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/day11_cookie/GoodsInfoServlet?name=小米10"</span>&gt;</span>小米10<span class="tag">&lt;/<span class="name">a</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/day11_cookie/GoodsInfoServlet?name=华为P40"</span>&gt;</span>华为P40<span class="tag">&lt;/<span class="name">a</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/day11_cookie/GoodsInfoServlet?name=iphoneSE"</span>&gt;</span>iphoneSE<span class="tag">&lt;/<span class="name">a</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/day11_cookie/GoodsInfoServlet?name=锤子T2"</span>&gt;</span>锤子T2<span class="tag">&lt;/<span class="name">a</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h6 id="②-GoodsInfoServlet"><a href="#②-GoodsInfoServlet" class="headerlink" title="② GoodsInfoServlet"></a>② GoodsInfoServlet</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/GoodsInfoServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GoodsInfoServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        request.setCharacterEncoding(<span class="string">"utf-8"</span>); <span class="comment">// 请求解码</span></span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=utf-8"</span>); <span class="comment">// 响应编码</span></span><br><span class="line">        <span class="comment">// 1.获取请求参数 name 小米10</span></span><br><span class="line">        String product = request.getParameter(<span class="string">"name"</span>);</span><br><span class="line">        <span class="comment">// 2.展示当前商品详情</span></span><br><span class="line">        response.getWriter().write(<span class="string">"您当前浏览的商品为："</span> + product);</span><br><span class="line">        <span class="comment">// 3.获取指定名称cookie对象</span></span><br><span class="line">        Cookie cookie = CookieUtils.findByName(<span class="string">"goods_name"</span>, request.getCookies());</span><br><span class="line">        <span class="comment">// 4.判断是否存在...</span></span><br><span class="line">        <span class="keyword">if</span> (cookie == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">// 5.如果不存在，将当前商品设置到cookie对象中...</span></span><br><span class="line">            cookie = <span class="keyword">new</span> Cookie(<span class="string">"goods_name"</span>, product);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 6.如果有，将浏览记录取出，格式：小米10-华为P40</span></span><br><span class="line">            String value = cookie.getValue();</span><br><span class="line">            <span class="comment">// 7.判断当前商品是否在此cookie中</span></span><br><span class="line">            List&lt;String&gt; list = Arrays.asList(value.split(<span class="string">"-"</span>));</span><br><span class="line">            <span class="comment">// 8.如果不包含，追加</span></span><br><span class="line">            <span class="keyword">if</span> (!list.contains(product)) &#123;</span><br><span class="line">                value = value + <span class="string">"-"</span> + product; <span class="comment">// 格式：小米10-华为P40</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 9.将value，重置到cookie中</span></span><br><span class="line">            cookie = <span class="keyword">new</span> Cookie(<span class="string">"goods_name"</span>, value);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 10.通过response响应到浏览器</span></span><br><span class="line">        <span class="comment">// 设置存活时间 为1年</span></span><br><span class="line">        cookie.setMaxAge(<span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span> * <span class="number">365</span>);</span><br><span class="line">        response.addCookie(cookie);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 11.制作a标签，实现记录浏览商品功能</span></span><br><span class="line">        response.getWriter().write(<span class="string">"&lt;br&gt;&lt;a href='/day11_cookie/goods.html'&gt;继续浏览&lt;/a&gt;"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 12.制作a标签，实现查看浏览记录功能</span></span><br><span class="line">        response.getWriter().write(<span class="string">"&lt;br&gt;&lt;a href='/day11_cookie/history.jsp'&gt;浏览记录&lt;/a&gt;"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="③-history-jsp"><a href="#③-history-jsp" class="headerlink" title="③ history.jsp"></a>③ history.jsp</h6><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"cn.itcast.f_lasttime.CookieUtils"</span> %&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;history&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    <span class="comment">// java的代码...</span></span><br><span class="line">    <span class="comment">// 1.获取指定名称cookie对象</span></span><br><span class="line">    Cookie cookie = CookieUtils.findByName(<span class="string">"goods_name"</span>, request.getCookies());</span><br><span class="line">    <span class="comment">// 2.判断是否存在浏览记录</span></span><br><span class="line">    <span class="keyword">if</span>(cookie == <span class="keyword">null</span>)&#123;</span><br><span class="line">        <span class="comment">// 没有提示</span></span><br><span class="line">        out.write(<span class="string">"暂无浏览记录...."</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">// 有的话，遍历显示</span></span><br><span class="line">        out.write(<span class="string">"浏览记录如下：&lt;br&gt;"</span>);</span><br><span class="line">        String value = cookie.getValue(); <span class="comment">// 格式：小米10-华为P40</span></span><br><span class="line">        <span class="keyword">for</span> (String product : value.split(<span class="string">"-"</span>)) &#123;</span><br><span class="line">            out.write(product+<span class="string">"&lt;br&gt;"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="十五、Session"><a href="#十五、Session" class="headerlink" title="十五、Session"></a>十五、Session</h3><h4 id="1-概述-3"><a href="#1-概述-3" class="headerlink" title="1.概述"></a>1.概述</h4><p><strong>使用Cookie问题</strong></p>
<ol>
<li>最多存储4K字符串</li>
<li>存储数据不太安全</li>
</ol>
<p>session作用：在一次会话的多次请求之间共享数据，将数据<strong>保存到服务器端</strong></p>
<h4 id="2-快速入门"><a href="#2-快速入门" class="headerlink" title="2.快速入门"></a>2.快速入门</h4><p>HttpSession也是一个域对象</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>API</span><br><span class="line"><span class="bullet">	1. </span>存储数据</span><br><span class="line"><span class="code">			void setAttribute(String name,Object value)</span></span><br><span class="line"><span class="bullet">	2. </span>获取数据</span><br><span class="line"><span class="code">			Object getAttribute(String name)</span></span><br><span class="line"><span class="bullet">	3. </span>删除数据</span><br><span class="line"><span class="code">			void removeAttribute(String name)</span></span><br></pre></td></tr></table></figure>

<p><strong>步骤分析</strong></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>将数据存储到session中</span><br><span class="line"><span class="code">	// 1.通过rquest对象，获取session对象</span></span><br><span class="line"><span class="code">		HttpSession session = request.getSession();</span></span><br><span class="line"><span class="code">	// 2.操作session的API，存储数据</span></span><br><span class="line"><span class="code">		session.setAttribute("username","哈哈，呵呵");</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">2. </span>从session中获取数据</span><br><span class="line"><span class="code">	// 1.通过rquest对象，获取session对象</span></span><br><span class="line"><span class="code">		HttpSession session = request.getSession();</span></span><br><span class="line"><span class="code">	// 2.操作session的API，获取数据</span></span><br><span class="line"><span class="code">		session.getAttribute("username");</span></span><br></pre></td></tr></table></figure>

<h4 id="3-工作原理"><a href="#3-工作原理" class="headerlink" title="3.工作原理"></a>3.工作原理</h4><p>Session基于Cookie技术实现</p>
<p><img src="/2020/04/29/summary_Web/1587260834422.png" alt="1587260834422"> </p>
<h4 id="4-Session细节"><a href="#4-Session细节" class="headerlink" title="4.Session细节"></a>4.Session细节</h4><h5 id="4-1-客户端关闭，服务器不关闭"><a href="#4-1-客户端关闭，服务器不关闭" class="headerlink" title="4.1 客户端关闭，服务器不关闭"></a>4.1 客户端关闭，服务器不关闭</h5><p>两次获取的Session数据是否为相同？</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>默认情况下，浏览器关闭，再次打开二次获取的session不一样</span><br><span class="line"><span class="code">	基于cookie实现（浏览器关闭，cookie销毁）</span></span><br><span class="line"><span class="code">	</span></span><br><span class="line"><span class="bullet">* </span>设置cookie的存活时间（JESSIONID）</span><br><span class="line"><span class="code">	这里我们代替服务器，做一个小操作，覆盖这个JSESSIONID，指定持久化时间</span></span><br></pre></td></tr></table></figure>

<p><img src="/2020/04/29/summary_Web/1587261605324.png" alt="1587261605324"> </p>
<h5 id="4-2-客户端不关闭，服务器关闭"><a href="#4-2-客户端不关闭，服务器关闭" class="headerlink" title="4.2 客户端不关闭，服务器关闭"></a>4.2 客户端不关闭，服务器关闭</h5><p>两次获取的Session数据是否为相同？</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>当服务器正常关闭，重启后，二次获取的session数据一样</span><br><span class="line"><span class="code">	tomcat这哥们实现以下二个功能</span></span><br><span class="line"><span class="code">	钝化（序列化）</span></span><br><span class="line"><span class="code">		当服务器正常关闭时，session中的数据，会序列化到磁盘</span></span><br><span class="line"><span class="code">	活化（反序列化）</span></span><br><span class="line"><span class="code">		当服务器开启后，从磁盘文件中，反序列化到内存中</span></span><br></pre></td></tr></table></figure>

<p><strong>我们使用的idea工具有坑….</strong></p>
<blockquote>
<p>支持钝化</p>
</blockquote>
<p><img src="/2020/04/29/summary_Web/1587262810025.png" alt="1587262810025"> </p>
<p><img src="/2020/04/29/summary_Web/1587262931602.png" alt="1587262931602"> </p>
<p><strong>我们可以强制设置idea重启时，不清除session会话</strong></p>
<p><img src="/2020/04/29/summary_Web/1587263085478.png" alt="1587263085478"> </p>
<h5 id="4-3-生命周期"><a href="#4-3-生命周期" class="headerlink" title="4.3 生命周期"></a>4.3 生命周期</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>何时创建</span><br><span class="line"><span class="code">		用户第一次调用request.getSession()方法时，创建</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">* </span>何时销毁</span><br><span class="line"><span class="code">		服务器非正常关闭		</span></span><br><span class="line"><span class="code">		非活跃状态30分钟后</span></span><br><span class="line"><span class="code">			tomcat进行配置  /tocmat安装目录/conf/web.xml</span></span><br><span class="line"><span class="code">		session.invalidate(); 自杀</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">* </span>作用范围</span><br><span class="line"><span class="code">		一次会话中，多次请求之间</span></span><br><span class="line"><span class="code">		注意：每一个浏览器跟服务器都是独立的会话...</span></span><br></pre></td></tr></table></figure>

<h4 id="5-Session特点"><a href="#5-Session特点" class="headerlink" title="5. Session特点"></a>5. Session特点</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>session存储数据在服务器</span><br><span class="line"></span><br><span class="line"><span class="bullet">2. </span>session存储类型任意（Object）</span><br><span class="line"></span><br><span class="line"><span class="bullet">3. </span>session存储大小和数量没有限制（相对于内存）</span><br><span class="line"></span><br><span class="line"><span class="bullet">4. </span>session存储相对安全</span><br></pre></td></tr></table></figure>



<p><strong>cookie和session的选择</strong></p>
<ol>
<li>cookie将数据保存在浏览器端,数据相对不安全.建议敏感的数据不要放在cookie中，而且数据大小是有限制的<ol>
<li>成本低，对服务器要求不高</li>
<li>浏览器，解决这个不足，localStroage【项目二中讲解…】</li>
</ol>
</li>
<li>session将数据保存在服务器端,数据相对安全.数据的大小要比cookie中数据灵活很多<ol>
<li>成本较高，对服务器压力较大</li>
</ol>
</li>
</ol>
<h3 id="十六、三大域对象总结"><a href="#十六、三大域对象总结" class="headerlink" title="十六、三大域对象总结"></a>十六、三大域对象总结</h3><p>request、session、ServletContext</p>
<h4 id="1-API"><a href="#1-API" class="headerlink" title="1. API"></a>1. API</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>设置数据</span><br><span class="line"><span class="code">		void setAttribute(String name, Object o)</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">2. </span>获取数据</span><br><span class="line"><span class="code">		Object getAttribute(String name)</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">3. </span>删除数据</span><br><span class="line"><span class="code">		void removeAttribute(String name)</span></span><br></pre></td></tr></table></figure>



<h4 id="2-生命周期"><a href="#2-生命周期" class="headerlink" title="2. 生命周期"></a>2. 生命周期</h4><h5 id="2-1-ServletContext域对象"><a href="#2-1-ServletContext域对象" class="headerlink" title="2.1 ServletContext域对象"></a>2.1 ServletContext域对象</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>何时创建</span><br><span class="line"><span class="code">		服务器正常启动，项目加载时，创建</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">* </span>何时销毁</span><br><span class="line"><span class="code">		服务器关闭或项目卸载时，销毁</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">* </span>作用范围</span><br><span class="line"><span class="code">		整个web项目（共享数据）</span></span><br></pre></td></tr></table></figure>



<h5 id="2-2-HttpSession域对象"><a href="#2-2-HttpSession域对象" class="headerlink" title="2.2 HttpSession域对象"></a>2.2 HttpSession域对象</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>何时创建</span><br><span class="line"><span class="code">		用户第一次调用request.getSession()方法时，创建【不太标准..】</span></span><br><span class="line"><span class="code">		用户访问携带的jsessionid与服务器不匹配时，创建</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">* </span>何时销毁</span><br><span class="line"><span class="code">		服务器非正常关闭</span></span><br><span class="line"><span class="code">		未活跃状态30分钟</span></span><br><span class="line"><span class="code">		自杀</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">* </span>作用范围</span><br><span class="line"><span class="code">		一次会话中，多次请求间（共享数据）</span></span><br></pre></td></tr></table></figure>



<h5 id="2-3-HttpServletRequest域对象"><a href="#2-3-HttpServletRequest域对象" class="headerlink" title="2.3 HttpServletRequest域对象"></a>2.3 HttpServletRequest域对象</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>何时创建</span><br><span class="line"><span class="code">		用户发送请求时，创建</span></span><br><span class="line"><span class="code">        </span></span><br><span class="line"><span class="bullet">* </span>何时销毁</span><br><span class="line"><span class="code">		服务器做出响应后，销毁</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">* </span>作用范围</span><br><span class="line"><span class="code">		一次请求中，多次转发间（共享数据）</span></span><br></pre></td></tr></table></figure>



<h4 id="3-小结"><a href="#3-小结" class="headerlink" title="3. 小结"></a>3. 小结</h4><ul>
<li><p>能用小的不用大的：request&lt;session&lt;servletContext</p>
</li>
<li><p>常用的场景:</p>
<ul>
<li>request：一次查询的结果（servlet转发jsp）</li>
<li>session：存放当前会话的私有数据<ul>
<li>用户登录状态</li>
<li>验证码</li>
<li>购物车</li>
</ul>
</li>
</ul>
</li>
<li><p>servletContext:若需要所有的servlet都能访问到,才使用这个域对象.</p>
<ul>
<li>spring课程中会涉及到</li>
</ul>
</li>
</ul>
<h4 id="4-案例"><a href="#4-案例" class="headerlink" title="4.案例"></a>4.案例</h4><h5 id="4-1-商品购物车"><a href="#4-1-商品购物车" class="headerlink" title="4.1 商品购物车"></a>4.1 商品购物车</h5><p><strong>需求</strong></p>
<p>有一个商品页面，可以点击超链接将商品添加到购物车,还有一个超链接,点击它的时候可以查看购物车中商品信息</p>
<h6 id="4-1-1-需求分析"><a href="#4-1-1-需求分析" class="headerlink" title="4.1.1 需求分析"></a>4.1.1 需求分析</h6><p><img src="/2020/04/29/summary_Web/1587267665094.png" alt="1587267665094"> </p>
<h6 id="4-1-2-代码实现"><a href="#4-1-2-代码实现" class="headerlink" title="4.1.2 代码实现"></a>4.1.2 代码实现</h6><p>① goods.jsp</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;goods.jsp&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h3&gt;商品列表&lt;/h3&gt;</span><br><span class="line">&lt;a href="/day12_session/AddCartServlet?name=电视机"&gt;电视机，加入购物车&lt;/a&gt;&lt;br&gt;</span><br><span class="line">&lt;a href="/day12_session/AddCartServlet?name=冰箱"&gt;冰箱，加入购物车&lt;/a&gt;&lt;br&gt;</span><br><span class="line">&lt;a href="/day12_session/AddCartServlet?name=洗衣机"&gt;洗衣机，加入购物车&lt;/a&gt;&lt;br&gt;</span><br><span class="line">&lt;a href="/day12_session/AddCartServlet?name=电脑"&gt;电脑，加入购物车&lt;/a&gt;&lt;br&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>② AddCartServlet</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/AddCartServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AddCartServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        request.setCharacterEncoding(<span class="string">"utf-8"</span>); <span class="comment">// 请求解码</span></span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=utf-8"</span>);<span class="comment">// 响应编码</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1.获取请求参数</span></span><br><span class="line">        String product = request.getParameter(<span class="string">"name"</span>);</span><br><span class="line">        <span class="comment">// 2.返回结果</span></span><br><span class="line">        response.getWriter().write(product + <span class="string">"，商品已成功加入购物车 &lt;br&gt;"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.从session中获取购物车</span></span><br><span class="line">        Map&lt;String, Integer&gt; cart = (Map&lt;String, Integer&gt;) request.getSession().getAttribute(<span class="string">"cart"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4.判断购物车是否为空</span></span><br><span class="line">        <span class="keyword">if</span> (cart == <span class="keyword">null</span>) &#123;</span><br><span class="line">            cart = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 5.判断购物车中是否包含本次添加的商品</span></span><br><span class="line">        <span class="keyword">if</span> (cart.containsKey(product)) &#123;<span class="comment">// 6.存在，数量+1</span></span><br><span class="line">            Integer oldCount = cart.get(product); <span class="comment">// 之前数量</span></span><br><span class="line">            cart.put(product, oldCount + <span class="number">1</span>);<span class="comment">// 数量加1</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">// 7.不存在，直接添加商品，数量为1</span></span><br><span class="line">            cart.put(product, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 8.重新将购物车，写入到session中</span></span><br><span class="line">        request.getSession().setAttribute(<span class="string">"cart"</span>, cart);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 9.继续浏览</span></span><br><span class="line">        response.getWriter().write(<span class="string">"&lt;a href='/day12_session/goods.jsp'&gt;继续浏览&lt;/a&gt;&lt;br&gt;"</span>);</span><br><span class="line">        <span class="comment">// 10.查看购物车</span></span><br><span class="line">        response.getWriter().write(<span class="string">"&lt;a href='/day12_session/cart.jsp'&gt;查看购物车&lt;/a&gt;&lt;br&gt;"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>③cart.jsp</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"java.util.Map"</span> %&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;cart&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h3&gt;购物车页面&lt;/h3&gt;</span><br><span class="line"></span><br><span class="line">&lt;table border=<span class="string">"1"</span> width=<span class="string">"200px"</span> align=<span class="string">"center"</span>&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;th&gt;商品&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;数量&lt;/th&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">    &lt;%</span><br><span class="line">         <span class="comment">// 1.从session中获取购物车</span></span><br><span class="line">        Map&lt;String,Integer&gt; cart = (Map&lt;String, Integer&gt;) request.getSession().getAttribute(<span class="string">"cart"</span>);</span><br><span class="line">        <span class="comment">// 2.判断是否为空</span></span><br><span class="line">        <span class="keyword">if</span>(cart == <span class="keyword">null</span>)&#123;</span><br><span class="line">            out.write(<span class="string">"购物车内暂时没有商品&lt;br&gt;"</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">for</span> (String s : cart.keySet()) &#123;</span><br><span class="line">                out.write(<span class="string">"&lt;tr&gt;&lt;td&gt;"</span>+s+<span class="string">"&lt;/td&gt;&lt;td&gt;"</span>+cart.get(s)+<span class="string">"&lt;/td&gt;&lt;/tr&gt;"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    %&gt;</span><br><span class="line">&lt;/table&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>



<h5 id="4-2-用户登录（验证码）"><a href="#4-2-用户登录（验证码）" class="headerlink" title="4.2 用户登录（验证码）"></a>4.2 用户登录（验证码）</h5><p><strong>需求</strong></p>
<p>用户访问带有验证码的登录页面，输入用户名，密码以及验证码实现登录功能。</p>
<h6 id="4-2-1-需求分析"><a href="#4-2-1-需求分析" class="headerlink" title="4.2.1 需求分析"></a>4.2.1 需求分析</h6><p><img src="/2020/04/29/summary_Web/1587276852998.png" alt="1587276852998"> </p>
<h6 id="4-2-2-代码实现"><a href="#4-2-2-代码实现" class="headerlink" title="4.2.2 代码实现"></a>4.2.2 代码实现</h6><p>① 创建web项目</p>
<p><img src="/2020/04/29/summary_Web/1587277050229.png" alt="1587277050229"> </p>
<p>② 导入验证码Servlet</p>
<p><img src="/2020/04/29/summary_Web/1587277039412.png" alt="1587277039412"> </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;login.jsp&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h3&gt;用户登录&lt;/h3&gt;</span><br><span class="line">&lt;form action=<span class="string">"/day12_login/LoginServlet"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">    用户：&lt;input type=<span class="string">"text"</span> name=<span class="string">"username"</span>&gt; &lt;br&gt;</span><br><span class="line">    密码：&lt;input type=<span class="string">"password"</span> name=<span class="string">"password"</span>&gt;&lt;br&gt;</span><br><span class="line">    验证码：&lt;input type=<span class="string">"text"</span> name=<span class="string">"checkcode"</span>&gt; &lt;img src=<span class="string">"/day12_login/CheckcodeServlet"</span> alt=<span class="string">""</span>&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">"submit"</span> value=<span class="string">"登录"</span>&gt;</span><br><span class="line">    &lt;span style=<span class="string">"color:red"</span>&gt;</span><br><span class="line">        &lt;%</span><br><span class="line">            String error = (String) request.getAttribute(<span class="string">"error"</span>);</span><br><span class="line">            <span class="keyword">if</span> (error != <span class="keyword">null</span>) &#123;</span><br><span class="line">                out.write(error);<span class="comment">// 输出提示信息</span></span><br><span class="line">            &#125;</span><br><span class="line">        %&gt;</span><br><span class="line">    &lt;/span&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>④ LoginServlet</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/LoginServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 课下作业，实现非空判断...</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        request.setCharacterEncoding(<span class="string">"utf-8"</span>);</span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=utf-8"</span>);</span><br><span class="line">        <span class="comment">// 1.获取用户输入的验证码</span></span><br><span class="line">        String checkcode = request.getParameter(<span class="string">"checkcode"</span>);</span><br><span class="line">        <span class="comment">// 2.获取session中验证码</span></span><br><span class="line">        String codeSession = (String) request.getSession().getAttribute(<span class="string">"code_session"</span>);</span><br><span class="line">        <span class="comment">// 3.校验是否匹配</span></span><br><span class="line">        <span class="keyword">if</span> (!checkcode.equalsIgnoreCase(codeSession)) &#123;</span><br><span class="line">            <span class="comment">// 验证码不配，友情提示...</span></span><br><span class="line">            request.setAttribute(<span class="string">"error"</span>, <span class="string">"验证码输入错误..."</span>);</span><br><span class="line">            <span class="comment">// 转发到login.jsp</span></span><br><span class="line">            request.getRequestDispatcher(<span class="string">"/login.jsp"</span>).forward(request, response);</span><br><span class="line">            <span class="comment">// 代码不在往下执行....</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4.获取用户输入的用户名和密码</span></span><br><span class="line">        String username = request.getParameter(<span class="string">"username"</span>);</span><br><span class="line">        String password = request.getParameter(<span class="string">"password"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 5.判断用户名密码不正确</span></span><br><span class="line">        <span class="keyword">if</span> (!(<span class="string">"jack"</span>.equals(username) &amp;&amp; <span class="string">"123"</span>.equals(password))) &#123;</span><br><span class="line">            <span class="comment">// 友情提示</span></span><br><span class="line">            request.setAttribute(<span class="string">"error"</span>, <span class="string">"用户名或密码错误..."</span>);</span><br><span class="line">            <span class="comment">// 转发到login.jsp</span></span><br><span class="line">            request.getRequestDispatcher(<span class="string">"/login.jsp"</span>).forward(request, response);</span><br><span class="line">            <span class="comment">// 代码不在往下执行....</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 6. 将用户名存入到session中</span></span><br><span class="line">        request.getSession().setAttribute(<span class="string">"username"</span>, username);</span><br><span class="line">        <span class="comment">// 7.重定向到success.jsp</span></span><br><span class="line">        response.sendRedirect(request.getContextPath() + <span class="string">"/success.jsp"</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>⑤ success.jsp</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;success&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h3&gt;&lt;%</span><br><span class="line">    <span class="comment">// 获取用户信息</span></span><br><span class="line">    String username = (String) request.getSession().getAttribute(<span class="string">"username"</span>);</span><br><span class="line">    <span class="keyword">if</span> (username != <span class="keyword">null</span>) &#123;</span><br><span class="line">        out.write(<span class="string">"用户您好，登录成功："</span>+username);</span><br><span class="line">    &#125;</span><br><span class="line">%&gt;&lt;/h3&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="十七、JSP"><a href="#十七、JSP" class="headerlink" title="十七、JSP"></a>十七、JSP</h3><p>JSP本质上就是一个Servlet</p>
<p><img src="/2020/04/29/summary_Web/1587432774951.png" alt="1587432774951"> </p>
<h4 id="1-脚本和注释"><a href="#1-脚本和注释" class="headerlink" title="1.脚本和注释"></a>1.脚本和注释</h4><h5 id="1-脚本"><a href="#1-脚本" class="headerlink" title="1.脚本"></a>1.脚本</h5><p><strong>JSP通过脚本方式来定义java代码</strong></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span><span class="xml"><span class="tag">&lt;<span class="name">%</span> 代码 %&gt;</span></span></span><br><span class="line"><span class="code">		脚本片段,生成在service方法中,每次请求的时候都会执行</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">2. </span><span class="xml"><span class="tag">&lt;<span class="name">%!</span> 代码 %&gt;</span></span></span><br><span class="line"><span class="code">		声明片段,在java代码中声明成员,放在jsp生成java文件中的成员位置</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">3. </span><span class="xml"><span class="tag">&lt;<span class="name">%=代码</span> %&gt;</span></span></span><br><span class="line"><span class="code">		输出脚本片段,相当于out.print("代码") 方法，输出到jsp页面</span></span><br></pre></td></tr></table></figure>

<h5 id="2-注释"><a href="#2-注释" class="headerlink" title="2.注释"></a>2.注释</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>html注释</span><br><span class="line"><span class="code">		&lt;!-- 注释静态资源 --&gt;</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">2. </span>JSP注释</span><br><span class="line"><span class="code">		&lt;%-- 注释所有 --%&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">3. </span>java注释（JSP脚本内使用）</span><br><span class="line"><span class="code">		// 单行</span></span><br><span class="line"><span class="code">		/* 多行 */</span></span><br><span class="line"><span class="code">		/**文档 */</span></span><br></pre></td></tr></table></figure>

<p><strong>注释作用范围</strong></p>
<table>
<thead>
<tr>
<th>注释</th>
<th>JSP源码</th>
<th>java源码</th>
<th>html源码</th>
</tr>
</thead>
<tbody><tr>
<td>html</td>
<td>可见</td>
<td>可见</td>
<td>可见</td>
</tr>
<tr>
<td>java</td>
<td>可见</td>
<td>可见</td>
<td>不可见</td>
</tr>
<tr>
<td>JSP</td>
<td>可见</td>
<td>不可见</td>
<td>不可见</td>
</tr>
</tbody></table>
<h4 id="2-指令"><a href="#2-指令" class="headerlink" title="2.指令"></a>2.指令</h4><p><strong>作用：</strong><br>        用于配置JSP页面，导入资源文件</p>
<p><strong>格式：</strong><br>&lt;%@ 指令名称 属性名1=”属性值1” 属性名2=”属性值2” …%&gt;</p>
<p><strong>三大指令：</strong></p>
<ol>
<li><p>page：配置JSP页面</p>
</li>
<li><p>include：页面包含（静态）</p>
</li>
<li><p>taglib:  导入资源文件</p>
</li>
</ol>
<h5 id="2-1page指令"><a href="#2-1page指令" class="headerlink" title="2.1page指令"></a>2.1page指令</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">contentType</span>=<span class="string">"text/html;charset=UTF-8"</span> <span class="attr">language</span>=<span class="string">"java"</span> %&gt;</span></span></span><br><span class="line"><span class="code">	contentType 相当于 response.setContentType(); 设置响应体的MIME类型和编码方式</span></span><br><span class="line"><span class="code">	language    这哥们有点尴尬，目前仅支持java语言</span></span><br><span class="line"><span class="code">	import      导入jar包</span></span><br><span class="line"><span class="code">		&lt;%@ page import="java.util.Date" %&gt;</span></span><br><span class="line"><span class="code">	errorPage   当前页面报错后，跳转指定错误提示页面</span></span><br><span class="line"><span class="code">	isErrorPage 声明当前jsp页面是一个异常处理页面，打开异常开关</span></span><br><span class="line"><span class="code">			false（默认）</span></span><br><span class="line"><span class="code">			true：可以操作exception异常对象</span></span><br></pre></td></tr></table></figure>

<h5 id="2-2-include指令（静态包含）"><a href="#2-2-include指令（静态包含）" class="headerlink" title="2.2 include指令（静态包含）"></a>2.2 include指令（静态包含）</h5><p>把页面共同的东西进行抽取</p>
<p><img src="/2020/04/29/summary_Web/1587436830957.png" alt="1587436830957"></p>
<p>top.jsp </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;top.jsp&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div style="border: skyblue dashed 5px;height: 100px"&gt;头部&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>



<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;demo3&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%<span class="meta">@include</span> file=<span class="string">"top.jsp"</span>%&gt;</span><br><span class="line">&lt;div style="border: red solid 5px;height: 400px"&gt;我是include静态包含，主体..&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h4 id="3-内置对象"><a href="#3-内置对象" class="headerlink" title="3.内置对象"></a>3.内置对象</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>作用</span><br><span class="line"><span class="code">		在JSP页面中不需要获取和创建，可以直接使用的对象</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">* </span>JSP一共有9个内置对象</span><br><span class="line"><span class="code">	变量名				  真实类型					作用</span></span><br><span class="line"><span class="code">	pageContext		    PageContext			 	 当前页面中共享数据（域对象）</span></span><br><span class="line"><span class="code">    request				HttpServletRequest       一次请求中共享数据（域对象）</span></span><br><span class="line"><span class="code">    session             HttpSession				 一次会话中共享数据（域对象）</span></span><br><span class="line"><span class="code">    application			ServletContext			 整个web应用共享数据（域对象）</span></span><br><span class="line"><span class="code">    -----------------------------------------------</span></span><br><span class="line"><span class="code">    response			HttpServletResponse		 响应对象</span></span><br><span class="line"><span class="code">    page（this）				Object			    当前页面(servlet)对象</span></span><br><span class="line"><span class="code">    out                 JSPWriter				 输出对象</span></span><br><span class="line"><span class="code">    config              ServletConfig			 servlet配置对象</span></span><br><span class="line"><span class="code">    exception           Throwable				 异常对象（默认关闭...）		</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">* </span>常用</span><br><span class="line"><span class="bullet">	1. </span>pageContext</span><br><span class="line"><span class="code">			1）当前页面的域对象</span></span><br><span class="line"><span class="code">			2）获取其他八个内置对象</span></span><br><span class="line"><span class="code">			</span></span><br><span class="line"><span class="bullet">	2. </span>request</span><br><span class="line"><span class="code">			1）接收用户请求（参数）</span></span><br><span class="line"><span class="code">			2）一次请求中域对象</span></span><br><span class="line"><span class="code">			</span></span><br><span class="line"><span class="bullet">	3. </span>response</span><br><span class="line"><span class="code">			1）设置响应</span></span><br><span class="line"><span class="code">				字节流</span></span><br><span class="line"><span class="code">				字符流</span></span><br><span class="line"><span class="bullet">	4. </span>out</span><br><span class="line"><span class="code">			1）专门在jsp中处理字符流</span></span><br><span class="line"><span class="code">				print(); // 可以输出一切类型</span></span><br><span class="line"><span class="code">				write(); // 只能输出字符类型</span></span><br></pre></td></tr></table></figure>

<h4 id="4-JSP动作标签"><a href="#4-JSP动作标签" class="headerlink" title="4.JSP动作标签"></a>4.JSP动作标签</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>作用</span><br><span class="line"><span class="code">		简化JSP页面编码</span></span><br><span class="line"><span class="code">	</span></span><br><span class="line"><span class="bullet">* </span>常用</span><br><span class="line"><span class="code">	&lt;jsp:include&gt;：页面包含（动态）</span></span><br><span class="line"><span class="code">		相当于</span></span><br><span class="line"><span class="code">			request.getRequestDispatcher().include(request,response);</span></span><br><span class="line"><span class="code">	&lt;jsp:forward&gt;：请求转发（页面跳转）</span></span><br><span class="line"><span class="code">		相当于</span></span><br><span class="line"><span class="code">			request.getRequestDispatcher().forword(request,response);</span></span><br><span class="line"><span class="code">	&lt;jsp:param&gt;：参数传递</span></span><br><span class="line"><span class="code">		其实这哥们是forward子标签</span></span><br><span class="line"><span class="code">		使用request.getParameter() 获取参数</span></span><br></pre></td></tr></table></figure>

<h5 id="4-1动态包含"><a href="#4-1动态包含" class="headerlink" title="4.1动态包含"></a>4.1动态包含</h5><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;demo6&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;jsp:include page="top.jsp"&gt;&lt;/jsp:include&gt;</span><br><span class="line">&lt;div style="border: green solid 5px;height: 400px"&gt;jsp的动态包含，主体&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><strong>静态包含和动态包含区别</strong></p>
<p>在企业开发时，我们推荐使用静态包含，提升访问性能；注意：不能出现重名的变量。。。</p>
<p><img src="/2020/04/29/summary_Web/1587440818415.png" alt="1587440818415"> </p>
<h5 id="4-2-请求转发"><a href="#4-2-请求转发" class="headerlink" title="4.2 请求转发"></a>4.2 请求转发</h5><p>a.jsp</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;a&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    System.out.println(<span class="string">"a.jsp执行了"</span>);</span><br><span class="line">    request.setAttribute(<span class="string">"username"</span>, <span class="string">"request域存值了"</span>);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;jsp:forward page=<span class="string">"b.jsp"</span>&gt;</span><br><span class="line">    &lt;jsp:param name="name" value="jack"&gt;&lt;/jsp:param&gt;</span><br><span class="line">    &lt;jsp:param name="age" value="18"&gt;&lt;/jsp:param&gt;</span><br><span class="line">&lt;/jsp:forward&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>



<p>b.jsp</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;b&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    System.out.println(<span class="string">"b.jsp执行了"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// request域传递</span></span><br><span class="line">    System.out.println(request.getAttribute(<span class="string">"username"</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// param标签传递</span></span><br><span class="line">    System.out.println(request.getParameter(<span class="string">"name"</span>));</span><br><span class="line">    System.out.println(request.getParameter(<span class="string">"age"</span>));</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="十八、MVC模式-amp-EL-amp-JSTL-amp-三层架构"><a href="#十八、MVC模式-amp-EL-amp-JSTL-amp-三层架构" class="headerlink" title="十八、MVC模式&amp;EL&amp;JSTL&amp;三层架构"></a>十八、MVC模式&amp;EL&amp;JSTL&amp;三层架构</h3><p>MVC设计模式： Model-View-Controller简写。</p>
<p>MVC是软件工程中的一种软件架构模式，它是一种<strong>分离业务逻辑</strong>与<strong>显示界面</strong>的设计方法。</p>
<p>简单来说：前辈们总结的一套设计经验，适合在各种软件开发领域，目的：高内聚，低耦合</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>M：model（模型） JavaBean（1.处理业务逻辑、2.封装实体）</span><br><span class="line"></span><br><span class="line"><span class="bullet">* </span>V：view（视图）  Jsp（展示数据）</span><br><span class="line"></span><br><span class="line"><span class="bullet">* </span>C：controller（控制器）Servlet（1.接收请求、2.调用模型、3.转发视图）</span><br><span class="line"></span><br><span class="line"><span class="bullet">* </span>优缺点</span><br><span class="line"><span class="code">	优点</span></span><br><span class="line"><span class="code">		降低耦合性，方便维护和拓展，利于分工协作</span></span><br><span class="line"><span class="code">	缺点</span></span><br><span class="line"><span class="code">		使得项目架构变得复杂，对开发人员要求高</span></span><br></pre></td></tr></table></figure>

<h4 id="1-EL"><a href="#1-EL" class="headerlink" title="1.EL"></a>1.EL</h4><p>表达式语言（Expression Language）</p>
<p><strong>作用</strong>：主要用来代替jsp中脚本的功能，简化对java代码的操作。 </p>
<p><strong>语法</strong>：${表达式}</p>
<h5 id="1-1使用"><a href="#1-1使用" class="headerlink" title="1.1使用"></a>1.1使用</h5><h6 id="1-获取（域中的）值"><a href="#1-获取（域中的）值" class="headerlink" title="1.获取（域中的）值"></a>1.获取（域中的）值</h6><p>EL表达式<strong>只能</strong>从域对象（4个域）中获取数据</p>
<p><strong>语法</strong></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>标准（了解）</span><br><span class="line"><span class="bullet">	1. </span>$&#123;pageScope.键名&#125; </span><br><span class="line"><span class="code">			从page域中获取指定键名对应的值</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">	2. </span>$&#123;requestScope.键名&#125; </span><br><span class="line"><span class="code">			从request域中获取指定键名对应的值</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">	3. </span>$&#123;sessionScope.键名&#125; </span><br><span class="line"><span class="code">			从session域中获取指定键名对应的值</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">	4. </span>$&#123;applicationScope.键名&#125; </span><br><span class="line"><span class="code">			从servletContext域中获取指定键名对应的值</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">* </span>简化（掌握）</span><br><span class="line"><span class="code">	$&#123;键名&#125;</span></span><br><span class="line"><span class="code">		特点：默认从最小域开始找，找到后直接显示，不在继续寻找</span></span><br><span class="line"><span class="code">		小结：要求四个域键名唯一</span></span><br></pre></td></tr></table></figure>

<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>获取字符串</span><br><span class="line"><span class="code">		$&#123;键名&#125;</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">2. </span>获取对象（User）</span><br><span class="line"><span class="code">		$&#123;键名.属性名&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">3. </span>获取List（Array）集合</span><br><span class="line"><span class="code">		$&#123;键名[索引]&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">4. </span>获取Map集合</span><br><span class="line"><span class="code">		$&#123;键名.key&#125;</span></span><br><span class="line"><span class="code">		$&#123;键名["key"]&#125;</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">5. </span>补充</span><br><span class="line"><span class="code">	el不会出现null和索引角标越界问题</span></span><br><span class="line"><span class="code">	</span></span><br><span class="line"><span class="code">	例：</span></span><br><span class="line"><span class="code">	$&#123;user&#125; &lt;br&gt; &lt;%--执行该对象的toString方法--%&gt;</span></span><br><span class="line"><span class="code">	$&#123;user.username&#125; | $&#123;user.age&#125; | $&#123;user.sex&#125;</span></span><br><span class="line"><span class="code">	</span></span><br><span class="line"><span class="code">	$&#123;list&#125;&lt;br&gt;&lt;%--执行该对象的toString方法--%&gt;</span></span><br><span class="line"><span class="code">	$&#123;list[0]&#125; | $&#123;list[1]&#125; | $&#123;list[2]&#125; | $&#123;list[3].username&#125; | $&#123;list[10]&#125; &lt;br&gt; </span></span><br><span class="line"><span class="code">	&lt;%--el表达式不会出现 集合（数组）角标越界异常--%&gt;</span></span><br><span class="line"><span class="code">	</span></span><br><span class="line"><span class="code">	$&#123;map&#125;&lt;br&gt;&lt;%--执行该对象的toString方法--%&gt;</span></span><br><span class="line"><span class="code">	$&#123;map.key1&#125; | $&#123;map.key2&#125; | $&#123;map.key3&#125; | $&#123;map["key.4"].username&#125;&lt;br&gt;</span></span><br></pre></td></tr></table></figure>

<h6 id="2-执行运算"><a href="#2-执行运算" class="headerlink" title="2.执行运算"></a>2.执行运算</h6><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>算数运算符</span><br><span class="line"><span class="code">		语法： + - * /(div) %(mod)</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">* </span>比较运算符</span><br><span class="line"><span class="code">		语法：&gt; &lt; &gt;= &lt;= ==(eq) !=(ne)</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">* </span>逻辑运算符</span><br><span class="line"><span class="code">		语法：&amp;&amp;(and) ||(or) !(not)</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">* </span>三元运算符</span><br><span class="line"><span class="code">		语法：$&#123;条件表达式？为真:为假&#125;</span></span><br><span class="line"></span><br><span class="line">------------------------------</span><br><span class="line"></span><br><span class="line"><span class="bullet">* </span>空运算符</span><br><span class="line"> 		语法：$&#123;not empty 对象&#125;</span><br><span class="line"> 		功能：</span><br><span class="line"> 			可以判断字符串和对象是否为空</span><br><span class="line"> 			可以判断一个集合的长度是否为0</span><br></pre></td></tr></table></figure>

<h6 id="3-隐式对象"><a href="#3-隐式对象" class="headerlink" title="3.隐式对象"></a>3.隐式对象</h6><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>el表达式中有11个隐式对象</span><br><span class="line"><span class="code">	掌握</span></span><br><span class="line"><span class="code">		pageContext</span></span><br><span class="line"><span class="code">			就是jsp九大内置对象之一，这哥们可以获得其他八个内置对象</span></span><br><span class="line"><span class="code">		cookie</span></span><br><span class="line"><span class="code">			可以获取浏览器指定cookie名称的值</span></span><br><span class="line"><span class="code">			</span></span><br><span class="line"><span class="code">	$&#123;pageContext.request.contextPath&#125;  动态获取：项目名称（虚拟路径）</span></span><br><span class="line"><span class="code">	$&#123;cookie.JSESSIONID.value&#125; 获取指定cookie名称的值...</span></span><br></pre></td></tr></table></figure>

<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>jsp默认支持el表达式</span><br><span class="line"><span class="code">		servlet2.3规范中，默认不支持el表达式</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">* </span>如果要忽略el表达式</span><br><span class="line"><span class="code">	1）忽略当前jsp页面中所有的el表达式</span></span><br><span class="line"><span class="code">		设置jsp中page指令中：isELIgnored="true" 属性</span></span><br><span class="line"><span class="code">	2）忽略单个el表达式</span></span><br><span class="line"><span class="code">		\$&#123;表达式&#125;</span></span><br></pre></td></tr></table></figure>

<h5 id="1-2-JavaBean"><a href="#1-2-JavaBean" class="headerlink" title="1.2 JavaBean"></a>1.2 JavaBean</h5><p>一个普通的类</p>
<p><strong>使用规范</strong></p>
<ol>
<li>所有字段（成员变量）为private</li>
<li>提供无参构造方法</li>
<li>提供getter、setter和is方法</li>
<li>实现serializable接口</li>
</ol>
<h4 id="2-JSTL"><a href="#2-JSTL" class="headerlink" title="2.JSTL"></a>2.JSTL</h4><p>Jsp 标准标签库（Jsp Standard Tag Library）</p>
<p>作用：替换和简化jsp页面中java代码的编写</p>
<p>核心库：标签库： Core    前缀C</p>
<p>使用需引入jar包</p>
<p>当前jsp页面tablib指令引入</p>
<p><img src="/2020/04/29/summary_Web/1587524031438.png" alt="1587524031438"> </p>
<h5 id="1-常用标签"><a href="#1-常用标签" class="headerlink" title="1.常用标签"></a>1.常用标签</h5><h6 id="1-c-if标签"><a href="#1-c-if标签" class="headerlink" title="1.  c:if标签"></a>1.  c:if标签</h6><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">就相当于，java中 if()&#123;&#125;</span><br><span class="line"><span class="code">	语法</span></span><br><span class="line"><span class="code">		&lt;c:if test="boolean值"&gt;&lt;/c:if&gt;</span></span><br><span class="line"><span class="code">			true：显示标签体内容</span></span><br><span class="line"><span class="code">			false：隐藏标签体内容</span></span><br><span class="line"><span class="code">		通常与el表达式一起使用</span></span><br><span class="line"><span class="code">		注意：此标签没有else功能，如果想实现else效果，请让条件取反</span></span><br></pre></td></tr></table></figure>

<h6 id="2-c-forEach标签"><a href="#2-c-forEach标签" class="headerlink" title="2.  c:forEach标签"></a>2.  c:forEach标签</h6><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>相当于java中的for循环</span><br><span class="line"><span class="code">	1）普通for</span></span><br><span class="line"><span class="code">		for(int i=1; i&lt;=5; i++)&#123;</span></span><br><span class="line"><span class="code">            i</span></span><br><span class="line"><span class="code">		&#125;</span></span><br><span class="line"><span class="code">		&lt;c:forEach begin="1" end="5" step="1" var="i"&gt;</span></span><br><span class="line"><span class="code">			$&#123;i&#125;</span></span><br><span class="line"><span class="code">		&lt;/c:forEach&gt;</span></span><br><span class="line"><span class="code">			begin="1" 起始值（包含）</span></span><br><span class="line"><span class="code">			end="5"   结束值（包含）</span></span><br><span class="line"><span class="code">			step="1"  步长为1</span></span><br><span class="line"><span class="code">			var="i"   当前输出临时变量</span></span><br><span class="line"><span class="code">	2）增强for</span></span><br><span class="line"><span class="code">		for(User user : list)&#123;</span></span><br><span class="line"><span class="code">            user</span></span><br><span class="line"><span class="code">		&#125;</span></span><br><span class="line"><span class="code">		&lt;c:forEach items="$&#123;list&#125;" var="user" varStatus="vs"&gt;</span></span><br><span class="line"><span class="code">			$&#123;user&#125;</span></span><br><span class="line"><span class="code">		&lt;/c:forEach&gt;</span></span><br><span class="line"><span class="code">			items="list" 集合</span></span><br><span class="line"><span class="code">			var="user"   当前输出的临时变量</span></span><br><span class="line"><span class="code">			varStatus="vs" 变量状态</span></span><br><span class="line"><span class="code">				index 当前索引 从0开始</span></span><br><span class="line"><span class="code">				count 计数器   从1开始</span></span><br></pre></td></tr></table></figure>

<h6 id="3-c-choose标签"><a href="#3-c-choose标签" class="headerlink" title="3.   c:choose标签"></a>3.   c:choose标签</h6><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>相当于java中switch语句</span><br><span class="line"><span class="code">	&lt;c:choose&gt;  等价于 switch</span></span><br><span class="line"><span class="code">	&lt;c:when&gt;    等价于 case+break</span></span><br><span class="line"><span class="code">	&lt;c:otherwise&gt; 等价于 default</span></span><br></pre></td></tr></table></figure>

<h4 id="3-三层架构（MVC升级版）"><a href="#3-三层架构（MVC升级版）" class="headerlink" title="3.三层架构（MVC升级版）"></a>3.三层架构（MVC升级版）</h4><p><strong>改造了MVC以后的架构，就称为三层架构</strong></p>
<p><img src="/2020/04/29/summary_Web/1587527491818.png" alt="1587527491818"></p>
<h5 id="3-1-概述"><a href="#3-1-概述" class="headerlink" title="3.1 概述"></a>3.1 概述</h5><p>通常意义上的三层架构就是将整个业务应用划分为：表示（现）层、业务逻辑层、数据访问层。</p>
<p>区分层次的目的 为了<strong>高内聚低耦合</strong>的思想</p>
<blockquote>
<p>表示（现）层：又称为web层，与浏览器进行数据交互（控制器和视图）</p>
<p>业务逻辑层：又称为service层，处理业务数据（if判断，for循环）</p>
<p>数据访问（持久）层：又称为dao层，与数据库进行交互的（每一条（行）记录与javaBean实体对应）</p>
</blockquote>
<p><strong>包目录结构</strong></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>com.itheima 基本包（公司域名倒写）</span><br><span class="line"></span><br><span class="line"><span class="bullet">* </span>com.itheima.dao 持久层</span><br><span class="line"></span><br><span class="line"><span class="bullet">* </span>com.itheima.service 业务层</span><br><span class="line"></span><br><span class="line"><span class="bullet">* </span>ccom.itheima.web 表示层</span><br><span class="line"></span><br><span class="line"><span class="bullet">* </span>com.itheima.domain 实体（JavaBean）</span><br><span class="line"></span><br><span class="line"><span class="bullet">* </span>com.itheima.util 工具</span><br></pre></td></tr></table></figure>

<p><img src="/2020/04/29/summary_Web/1587528717096.png" alt="1587528717096"> </p>
<h3 id="十九、Filter"><a href="#十九、Filter" class="headerlink" title="十九、Filter"></a>十九、Filter</h3><p>web的三大组件，Servlet（控制器），filter（过滤器），Listener（监听器）</p>
<h4 id="1-快速入门"><a href="#1-快速入门" class="headerlink" title="1.快速入门"></a>1.快速入门</h4><h5 id="1-xml配置"><a href="#1-xml配置" class="headerlink" title="1. xml配置"></a>1. xml配置</h5><h6 id="1-编写java类，实现filter接口"><a href="#1-编写java类，实现filter接口" class="headerlink" title="1.编写java类，实现filter接口"></a>1.编写java类，实现filter接口</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QuickFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  此方法拦截用户请求</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> servletRequest    ：请求对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> servletResponse   ：响应对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> filterChain       ：过滤器链（是否放行）</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"QuickFilter拦截了请求..."</span>);</span><br><span class="line">        <span class="comment">// 放行</span></span><br><span class="line">        filterChain.doFilter(servletRequest, servletResponse);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="2-配置web-xml-1"><a href="#2-配置web-xml-1" class="headerlink" title="2.配置web.xml"></a>2.配置web.xml</h6><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">"3.1"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--快速入门--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--注册filter--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>QuickFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>cn.itcast.a_quick.QuickFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--配置filter拦截路径--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>QuickFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/quick.jsp<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="2-注解配置"><a href="#2-注解配置" class="headerlink" title="2. 注解配置"></a>2. 注解配置</h5><p>使用注解，需把web.xml中filter标签注释</p>
<h6 id="1-编写java类，实现filter接口-1"><a href="#1-编写java类，实现filter接口-1" class="headerlink" title="1. 编写java类，实现filter接口"></a>1. 编写java类，实现filter接口</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QuickFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  此方法拦截用户请求</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> servletRequest    ：请求对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> servletResponse   ：响应对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> filterChain       ：过滤器链（是否放行）</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"QuickFilter拦截了请求..."</span>);</span><br><span class="line">        <span class="comment">// 放行</span></span><br><span class="line">        filterChain.doFilter(servletRequest, servletResponse);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="2-配置-WebFilter"><a href="#2-配置-WebFilter" class="headerlink" title="2.配置@WebFilter"></a>2.配置@WebFilter</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @WebFilter(filterName = "QuickFilter",urlPatterns = "/quick.jsp")</span></span><br><span class="line"><span class="comment">// @WebFilter(urlPatterns = "/quick.jsp")</span></span><br><span class="line"><span class="comment">// @WebFilter(value = "/quick.jsp")</span></span><br><span class="line"><span class="meta">@WebFilter</span>(<span class="string">"/quick.jsp"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QuickFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 代码细节省略....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-使用细节"><a href="#2-使用细节" class="headerlink" title="2.  使用细节"></a>2.  使用细节</h4><h5 id="1-生命周期-1"><a href="#1-生命周期-1" class="headerlink" title="1.生命周期"></a>1.生命周期</h5><p>生命周期：指的是一个对象从生（创建）到死（销毁）的一个过程</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 初始化方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig config)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 执行拦截方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest request, ServletResponse response,FilterChain chain)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 销毁方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>



<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>创建</span><br><span class="line"><span class="code">		服务器启动项目加载，创建filter对象，执行init方法（只执行一次）</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">* </span>运行（过滤拦截）</span><br><span class="line"><span class="code">		用户访问被拦截目标资源时，执行doFilter方法</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">* </span>销毁</span><br><span class="line"><span class="code">		服务器关闭项目卸载时，销毁filter对象，执行destroy方法（只执行一次）</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">* </span>补充：</span><br><span class="line"><span class="code">	过滤器一定是优先于servlet创建的</span></span><br></pre></td></tr></table></figure>

<h5 id="2-拦截路径"><a href="#2-拦截路径" class="headerlink" title="2.拦截路径"></a>2.拦截路径</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>精准匹配</span><br><span class="line"><span class="code">		用户访问指定目标资源（/show.jsp）时，过滤器进行拦截</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">* </span>目录匹配</span><br><span class="line"><span class="code">		用户访问指定目录下（/user/*）所有资源时，过滤器进行拦截</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">* </span>后缀匹配</span><br><span class="line"><span class="code">		用户访问指定后缀名（*.html）的资源时，过滤器进行拦截</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">* </span>匹配所有</span><br><span class="line"><span class="code">		用户访问该网站所有资源（/*）时，过滤器进行拦截</span></span><br></pre></td></tr></table></figure>

<h5 id="3-拦截方式"><a href="#3-拦截方式" class="headerlink" title="3.  拦截方式"></a>3.  拦截方式</h5><p>在开发时，我们可以指定过滤器的拦截方式来处理不同的应用场景，比如：只拦截从浏览器直接发送过来的请求，或者拦截内部转发的请求</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>request（默认拦截方式）</span><br><span class="line"><span class="code">		浏览器直接发送请求时，过滤器拦截</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">2. </span>forward</span><br><span class="line"><span class="code">		资源A转发到资源B时，过滤器拦截</span></span><br><span class="line"><span class="code">		资源A：ForwardServlet</span></span><br><span class="line"><span class="code">		资源B：show.jsp</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="bullet">3. </span>我们可以配置 二个同时存在...</span><br></pre></td></tr></table></figure>

<h6 id="1-xml版本"><a href="#1-xml版本" class="headerlink" title="1.  xml版本"></a>1.  xml版本</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ModeFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig config)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain chain)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ModeFilter拦截了请求....."</span>);</span><br><span class="line">        <span class="comment">// 放行</span></span><br><span class="line">        chain.doFilter(servletRequest, servletResponse);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--拦截方式--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>ModeFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>cn.itcast.b_detail.ModeFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>ModeFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/show.jsp<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dispatcher</span>&gt;</span>FORWARD<span class="tag">&lt;/<span class="name">dispatcher</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dispatcher</span>&gt;</span>REQUEST<span class="tag">&lt;/<span class="name">dispatcher</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h6 id="2-注解版本"><a href="#2-注解版本" class="headerlink" title="2.  注解版本"></a>2.  注解版本</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebFilter</span>(value = <span class="string">"/show.jsp"</span>,dispatcherTypes = &#123;DispatcherType.REQUEST,DispatcherType.FORWARD&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ModeFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig config)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain chain)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ModeFilter拦截了请求....."</span>);</span><br><span class="line">        <span class="comment">// 放行</span></span><br><span class="line">        chain.doFilter(servletRequest, servletResponse);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="4-过滤器链"><a href="#4-过滤器链" class="headerlink" title="4.  过滤器链"></a>4.  过滤器链</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>需求</span><br><span class="line"><span class="code">	用户访问目标资源 show.jsp时，经过 FilterA  FilterB</span></span><br><span class="line"><span class="code">	</span></span><br><span class="line"><span class="bullet">* </span>过滤器链执行顺序 （先进后出）</span><br><span class="line"><span class="code">	1.用户发送请求</span></span><br><span class="line"><span class="code">	2.FilterA拦截，放行</span></span><br><span class="line"><span class="code">	3.FilterB拦截，放行</span></span><br><span class="line"><span class="code">	4.执行目标资源 show.jsp</span></span><br><span class="line"><span class="code">	5.FilterB增强响应</span></span><br><span class="line"><span class="code">	6.FilterA增强响应</span></span><br><span class="line"><span class="code">	7.封装响应消息格式，返回到浏览器</span></span><br><span class="line"><span class="code">	</span></span><br><span class="line"><span class="bullet">* </span>过滤器链中执行的先后问题....</span><br><span class="line"><span class="code">	配置文件</span></span><br><span class="line"><span class="code">		谁先声明，谁先执行</span></span><br><span class="line"><span class="code">			&lt;filter-mapping&gt;</span></span><br><span class="line"><span class="code">	注解【不推荐】</span></span><br><span class="line"><span class="code">		根据过滤器类名进行排序，值小的先执行</span></span><br><span class="line"><span class="code">			FilterA  FilterB  进行比较， FilterA先执行...</span></span><br></pre></td></tr></table></figure>

<p><img src="/2020/04/29/summary_Web/1587612460702.png" alt="1587612460702"> </p>
<h4 id="3-案例"><a href="#3-案例" class="headerlink" title="3.案例"></a>3.案例</h4><p>过滤用户评论留言的非法言论</p>
<p><strong>代码实现</strong></p>
<h5 id="①-b-jsp"><a href="#①-b-jsp" class="headerlink" title="① b.jsp"></a>① b.jsp</h5><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;b&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h3&gt;LPL季后赛观看留言板&lt;/h3&gt;</span><br><span class="line">&lt;hr&gt;</span><br><span class="line">&lt;form action=<span class="string">"$&#123;pageContext.request.contextPath&#125;/WordsServlet"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">    &lt;textarea name="content" id="" cols="30" rows="10"&gt;&lt;/textarea&gt;</span><br><span class="line">    &lt;input type=<span class="string">"submit"</span> value=<span class="string">"请留言"</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h5 id="②-WordsServlet"><a href="#②-WordsServlet" class="headerlink" title="② WordsServlet"></a>② WordsServlet</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/WordsServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WordsServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> SerwvletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 1.接收请求参数 content</span></span><br><span class="line">        String content = request.getParameter(<span class="string">"content"</span>);</span><br><span class="line">        <span class="comment">// 2.将结果响应到 浏览器</span></span><br><span class="line">        response.getWriter().write(content);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="③-同一网站编码"><a href="#③-同一网站编码" class="headerlink" title="③ 同一网站编码"></a>③ 同一网站编码</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @WebFilter("/*")</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EncodeFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String encode;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig config)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">        encode = config.getInitParameter(<span class="string">"encode"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain chain)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 类型向下转型</span></span><br><span class="line">        HttpServletRequest request = (HttpServletRequest) servletRequest;</span><br><span class="line">        HttpServletResponse response = (HttpServletResponse) servletResponse;</span><br><span class="line">        <span class="comment">// 判断用户是否为post请求，才设置编码</span></span><br><span class="line">        <span class="keyword">if</span> (request.getMethod().equalsIgnoreCase(<span class="string">"post"</span>)) &#123;</span><br><span class="line">            request.setCharacterEncoding(encode);</span><br><span class="line">        &#125;</span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset="</span>+encode); <span class="comment">// 这个操作不太推荐....  因为把所有响应类型给成了 html</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 放行</span></span><br><span class="line">        chain.doFilter(servletRequest, servletResponse);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--统一网站编码--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>EncodeFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>cn.itcast.d_case.EncodeFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encode<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>EncodeFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="非法字符拦截"><a href="#非法字符拦截" class="headerlink" title="非法字符拦截"></a><strong>非法字符拦截</strong></h5><p>建立非法词库：</p>
<p>在项目的src目录下建立一个.properties文件</p>
<p>文件内容：例： keyword=xxx,xxx,xxx,xxx(注意这里使用的标点符号和过滤器的要一致)</p>
<h6 id="④WordsFilter"><a href="#④WordsFilter" class="headerlink" title="④WordsFilter"></a>④<strong>WordsFilter</strong></h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebFilter</span>(<span class="string">"/WordsServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WordsFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; wordList;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig config)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">        <span class="comment">// 1.加载配置文件</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            ResourceBundle这哥们 专门读取src目录下的properties配置文件，不需要写后缀名</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        ResourceBundle words = ResourceBundle.getBundle(<span class="string">"words"</span>);</span><br><span class="line">        <span class="comment">// 2.读取keyword关键字内容</span></span><br><span class="line">        String keyword = words.getString(<span class="string">"keyword"</span>); <span class="comment">// 傻叉,大爷的,二大爷的</span></span><br><span class="line">        <span class="comment">// 3.split切割，转为list集合，注意切割用的中英文标点符号</span></span><br><span class="line">        wordList = Arrays.asList(keyword.split(<span class="string">","</span>));</span><br><span class="line">        System.out.println(<span class="string">"加载非法词库："</span>+wordList);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain chain)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 向下转型</span></span><br><span class="line">        HttpServletRequest request = (HttpServletRequest) servletRequest;</span><br><span class="line">        HttpServletResponse response = (HttpServletResponse) servletResponse;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1.获取用户输入的值</span></span><br><span class="line">        String content = request.getParameter(<span class="string">"content"</span>);</span><br><span class="line">        <span class="comment">// 2.拦截非法内容，提示</span></span><br><span class="line">        <span class="keyword">for</span> (String word : wordList) &#123; <span class="comment">// 遍历非法词库</span></span><br><span class="line">            <span class="keyword">if</span>(content.contains(word))&#123; <span class="comment">// 判断是否包含非法词汇</span></span><br><span class="line">                response.getWriter().write(<span class="string">"你输入的词汇敏感，拦截了。。。"</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.放行</span></span><br><span class="line">        chain.doFilter(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="非法字符过滤"><a href="#非法字符过滤" class="headerlink" title="非法字符过滤"></a><strong>非法字符过滤</strong></h5><p>当用户发出非法言论的时候，在servlet中输出的时候:用”*” 替代</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 对此方法进行增强....</span><br><span class="line">request.getParameter(String name);</span><br></pre></td></tr></table></figure>

<p>方案一：继承，无法对接口进行增强…</p>
<p>方案二：代理</p>
<p>方案三：装饰（包装），经典场景就是IO流</p>
<p><strong>代码实现</strong></p>
<ul>
<li>注意：需要将 WordsFilter过滤器的注解注释</li>
</ul>
<h6 id="①-自定义MyRequest"><a href="#①-自定义MyRequest" class="headerlink" title="① 自定义MyRequest"></a>① 自定义MyRequest</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyRequest</span> <span class="keyword">extends</span> <span class="title">HttpServletRequestWrapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 非法词库</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; wordList;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyRequest</span><span class="params">(HttpServletRequest request, List&lt;String&gt; wordList)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(request);</span><br><span class="line">        <span class="keyword">this</span>.wordList = wordList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 对谁增强就重谁...</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getParameter</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 调用原有的功能，获取用户输入的值</span></span><br><span class="line">        String parameter = <span class="keyword">super</span>.getParameter(name);</span><br><span class="line">        <span class="comment">// 对非法词库过滤...</span></span><br><span class="line">        <span class="keyword">for</span> (String word : wordList) &#123;<span class="comment">// 遍历</span></span><br><span class="line">            <span class="keyword">if</span> (parameter.contains(word)) &#123;</span><br><span class="line">                String str = <span class="keyword">new</span> String();</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; word.length(); i++) &#123;</span><br><span class="line">                    str += <span class="string">"*"</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                parameter = parameter.replaceAll(word,str); <span class="comment">// 注意，替换完之后，进行覆盖...</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> parameter;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="②-编写WordsProFilter"><a href="#②-编写WordsProFilter" class="headerlink" title="② 编写WordsProFilter"></a>② 编写WordsProFilter</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebFilter</span>(<span class="string">"/WordsServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WordsProFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; wordList;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig config)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">        <span class="comment">// 1.加载配置文件</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            ResourceBundle这哥们 专门读取src目录下的properties配置文件，不需要写后缀名</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        ResourceBundle words = ResourceBundle.getBundle(<span class="string">"words"</span>);</span><br><span class="line">        <span class="comment">// 2.读取keyword关键字内容</span></span><br><span class="line">        String keyword = words.getString(<span class="string">"keyword"</span>); <span class="comment">// 傻叉,大爷的,二大爷的</span></span><br><span class="line">        <span class="comment">// 3.split切割，转为list集合</span></span><br><span class="line">        wordList = Arrays.asList(keyword.split(<span class="string">","</span>));</span><br><span class="line">        System.out.println(<span class="string">"加载非法词库："</span>+wordList);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain chain)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 向下转型</span></span><br><span class="line">        HttpServletRequest request = (HttpServletRequest) servletRequest;</span><br><span class="line">        HttpServletResponse response = (HttpServletResponse) servletResponse;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 对request对象进行包装 （过滤）</span></span><br><span class="line">        MyRequest requestPro = <span class="keyword">new</span> MyRequest(request, wordList);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 放行</span></span><br><span class="line">        chain.doFilter(requestPro, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="二十、Listener"><a href="#二十、Listener" class="headerlink" title="二十、Listener"></a>二十、Listener</h3><h4 id="1-概述-4"><a href="#1-概述-4" class="headerlink" title="1.概述"></a>1.概述</h4><p><strong>观察者模式</strong></p>
<p><strong>javaweb中的监听器</strong></p>
<p>在我们的java程序中，有时也需要监视某些事情，一旦被监视的对象发生相应的变化，我们应该采取相应的操作。</p>
<p>监听web三大域对象：HttpServletRequest、HttpSession、ServletContext  （创建和销毁）</p>
<p><strong>场景</strong></p>
<p>历史访问次数、统计在线人数、系统启动时初始化配置信息</p>
<h4 id="2-快速入门-1"><a href="#2-快速入门-1" class="headerlink" title="2.快速入门"></a>2.快速入门</h4><p><strong>步骤分析</strong></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>创建一个普通类，实现ServletContextListener</span><br><span class="line"></span><br><span class="line"><span class="bullet">2. </span>重写抽象方法</span><br><span class="line"><span class="code">	监听ServletContext创建</span></span><br><span class="line"><span class="code">	监听ServletContext销毁</span></span><br><span class="line"><span class="code">	</span></span><br><span class="line"><span class="bullet">3. </span>配置</span><br><span class="line"><span class="code">	web.xml</span></span><br><span class="line"><span class="code">	注解</span></span><br><span class="line"><span class="code">	</span></span><br><span class="line"><span class="bullet">4. </span>补充</span><br><span class="line"><span class="code">	监听HttpServletRequestListener,用户每次访问时，触发创建</span></span><br><span class="line"><span class="code">	监听HttpSessionListener，浏览器建立会话时，触发创建</span></span><br></pre></td></tr></table></figure>





<h5 id="①-xml版本"><a href="#①-xml版本" class="headerlink" title="① xml版本"></a>① xml版本</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyListener</span> <span class="keyword">implements</span> <span class="title">ServletContextListener</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 监听ServletContext创建</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextInitialized</span><span class="params">(ServletContextEvent servletContextEvent)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ServletContext已经创建了..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 监听ServletContext销毁</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextDestroyed</span><span class="params">(ServletContextEvent servletContextEvent)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ServletContext已经销毁了...."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>cn.itcast.a_quick.MyListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h5 id="②-注解版本"><a href="#②-注解版本" class="headerlink" title="② 注解版本"></a>② 注解版本</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebListener</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyListener</span> <span class="keyword">implements</span> <span class="title">ServletContextListener</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 监听ServletContext创建</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextInitialized</span><span class="params">(ServletContextEvent servletContextEvent)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ServletContext已经创建了..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 监听ServletContext销毁</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextDestroyed</span><span class="params">(ServletContextEvent servletContextEvent)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ServletContext已经销毁了...."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-案例-1"><a href="#3-案例-1" class="headerlink" title="3.案例"></a>3.案例</h4><p><strong>需求</strong></p>
<p>有用户使用网站,在线人数就+1;用户退出网站,在线人数就-1</p>
<h5 id="1-技术分析"><a href="#1-技术分析" class="headerlink" title="1 技术分析"></a>1 技术分析</h5><p>使用 ServletContext域对象 存储在线总人数</p>
<p>使用 ServletContextListener监听器，在项目启动时，初始化总人数为0</p>
<p>使用 HttpSessionListener监听器，用户访问，人数+1，用户退出，人数-1</p>
<p>使用 LogoutServlet控制器，对当前会话的session销毁</p>
<h5 id="2-需求分析"><a href="#2-需求分析" class="headerlink" title="2 需求分析"></a>2 需求分析</h5><p><img src="/2020/04/29/summary_Web/1587779813977.png" alt="1587779813977"> </p>
<h5 id="3-代码实现"><a href="#3-代码实现" class="headerlink" title="3 代码实现"></a>3 代码实现</h5><h6 id="①-IitNumberListener"><a href="#①-IitNumberListener" class="headerlink" title="① IitNumberListener"></a>① IitNumberListener</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebListener</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InitNumberListener</span> <span class="keyword">implements</span> <span class="title">ServletContextListener</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextInitialized</span><span class="params">(ServletContextEvent servletContextEvent)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 获取上下文域对象</span></span><br><span class="line">        ServletContext servletContext = servletContextEvent.getServletContext();</span><br><span class="line">        <span class="comment">// 初始化在线人数</span></span><br><span class="line">        servletContext.setAttribute(<span class="string">"number"</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextDestroyed</span><span class="params">(ServletContextEvent servletContextEvent)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h6 id="②-NumberChangeListener"><a href="#②-NumberChangeListener" class="headerlink" title="② NumberChangeListener"></a>② NumberChangeListener</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebListener</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NumberChangeListener</span> <span class="keyword">implements</span> <span class="title">HttpSessionListener</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 会话建立，在线人数+1</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sessionCreated</span><span class="params">(HttpSessionEvent httpSessionEvent)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 获取session域对象</span></span><br><span class="line">        HttpSession session = httpSessionEvent.getSession();</span><br><span class="line">        <span class="comment">// 获取上下文域对象</span></span><br><span class="line">        ServletContext servletContext = session.getServletContext();</span><br><span class="line">        <span class="comment">// 取出在线人数</span></span><br><span class="line">        Integer number = (Integer) servletContext.getAttribute(<span class="string">"number"</span>);</span><br><span class="line">        <span class="comment">// +1</span></span><br><span class="line">        servletContext.setAttribute(<span class="string">"number"</span>, number + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 会话销毁，在线人数-1</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sessionDestroyed</span><span class="params">(HttpSessionEvent httpSessionEvent)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 获取session域对象</span></span><br><span class="line">        HttpSession session = httpSessionEvent.getSession();</span><br><span class="line">        <span class="comment">// 获取上下文域对象</span></span><br><span class="line">        ServletContext servletContext = session.getServletContext();</span><br><span class="line">        <span class="comment">// 取出在线人数</span></span><br><span class="line">        Integer number = (Integer) servletContext.getAttribute(<span class="string">"number"</span>);</span><br><span class="line">        <span class="comment">// -1</span></span><br><span class="line">        servletContext.setAttribute(<span class="string">"number"</span>, number - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h6 id="③-index-jsp"><a href="#③-index-jsp" class="headerlink" title="③ index.jsp"></a>③ index.jsp</h6><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;$&#123;NAME&#125;&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">  &lt;h3&gt;listener知识学习&lt;/h3&gt;</span><br><span class="line"></span><br><span class="line">  &lt;h5&gt;在线人数：$&#123;applicationScope.number&#125;&lt;/h5&gt;</span><br><span class="line">  &lt;a href="$&#123;pageContext.request.contextPath&#125;/LogoutServlet"&gt;用户退出&lt;/a&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>



<h6 id="④-LogoutServlet"><a href="#④-LogoutServlet" class="headerlink" title="④ LogoutServlet"></a>④ LogoutServlet</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/LogoutServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LogoutServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 销毁session</span></span><br><span class="line">        request.getSession().invalidate();</span><br><span class="line"></span><br><span class="line">        response.getWriter().write(<span class="string">"logout"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="二十一、综合案例"><a href="#二十一、综合案例" class="headerlink" title="二十一、综合案例"></a>二十一、综合案例</h3><h4 id="1-环境搭建"><a href="#1-环境搭建" class="headerlink" title="1 环境搭建"></a>1 环境搭建</h4><ul>
<li>要求：根据三层架构，搭建web项目</li>
</ul>
<h5 id="①-创建web项目"><a href="#①-创建web项目" class="headerlink" title="① 创建web项目"></a>① 创建web项目</h5><p><img src="/2020/04/29/summary_Web/1587781837986.png" alt="1587781837986"> </p>
<h5 id="②-导入第三方jar包"><a href="#②-导入第三方jar包" class="headerlink" title="② 导入第三方jar包"></a>② 导入第三方jar包</h5><p><img src="/2020/04/29/summary_Web/1587781897020.png" alt="1587781897020"> </p>
<h5 id="③-导入页面资源"><a href="#③-导入页面资源" class="headerlink" title="③ 导入页面资源"></a>③ 导入页面资源</h5><p><img src="/2020/04/29/summary_Web/1587781960389.png" alt="1587781960389"> </p>
<h5 id="④-搭建三层包目录结构"><a href="#④-搭建三层包目录结构" class="headerlink" title="④ 搭建三层包目录结构"></a>④ 搭建三层包目录结构</h5><p><img src="/2020/04/29/summary_Web/1587782022814.png" alt="1587782022814"> </p>
<h5 id="⑤-导入-User实体类"><a href="#⑤-导入-User实体类" class="headerlink" title="⑤ 导入 User实体类"></a>⑤ 导入 User实体类</h5><p><img src="/2020/04/29/summary_Web/1587782097855.png" alt="1587782097855"> </p>
<h5 id="⑥-导入DataUtils工具类（模拟数据库）"><a href="#⑥-导入DataUtils工具类（模拟数据库）" class="headerlink" title="⑥ 导入DataUtils工具类（模拟数据库）"></a>⑥ 导入DataUtils工具类（模拟数据库）</h5><p><img src="/2020/04/29/summary_Web/1587782181537.png" alt="1587782181537"> </p>
<p><img src="/2020/04/29/summary_Web/1587782209409.png" alt="1587782209409"> </p>
<h5 id="⑦-启动测试"><a href="#⑦-启动测试" class="headerlink" title="⑦ 启动测试"></a>⑦ 启动测试</h5><p><img src="/2020/04/29/summary_Web/1587782430403.png" alt="1587782430403"> </p>
<h4 id="2-用户查询功能"><a href="#2-用户查询功能" class="headerlink" title="2 用户查询功能"></a>2 用户查询功能</h4><p><strong>需求</strong></p>
<p>使用三层架构和MVC模式开发代码，完成用户显示列表功能。 </p>
<h5 id="2-1-需求分析-1"><a href="#2-1-需求分析-1" class="headerlink" title="2.1 需求分析"></a>2.1 需求分析</h5><p><img src="/2020/04/29/summary_Web/1587782969066.png" alt="1587782969066"> </p>
<h5 id="2-2-代码实现-1"><a href="#2-2-代码实现-1" class="headerlink" title="2.2 代码实现"></a>2.2 代码实现</h5><h6 id="①-index-jsp"><a href="#①-index-jsp" class="headerlink" title="① index.jsp"></a>① index.jsp</h6><p><img src="/2020/04/29/summary_Web/1587783085177.png" alt="1587783085177"> </p>
<h6 id="②-EncodeFilter"><a href="#②-EncodeFilter" class="headerlink" title="② EncodeFilter"></a>② EncodeFilter</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebFilter</span>(<span class="string">"/*"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EncodeFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig config)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain chain)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 向下转型</span></span><br><span class="line">        HttpServletRequest request = (HttpServletRequest) servletRequest;</span><br><span class="line">        HttpServletResponse response = (HttpServletResponse) servletResponse;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 如果是post请求，解决中文乱码</span></span><br><span class="line">        <span class="keyword">if</span> (request.getMethod().equalsIgnoreCase(<span class="string">"post"</span>)) &#123;</span><br><span class="line">            request.setCharacterEncoding(<span class="string">"utf-8"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 放行</span></span><br><span class="line">        chain.doFilter(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h6 id="③-FindAllServlet"><a href="#③-FindAllServlet" class="headerlink" title="③ FindAllServlet"></a>③ FindAllServlet</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/FindAllServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FindAllServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 1.调用service查询</span></span><br><span class="line">        UserService userService = <span class="keyword">new</span> UserService();</span><br><span class="line">        List&lt;User&gt; list = userService.findAll();</span><br><span class="line">        <span class="comment">// 2.将list存储到request域</span></span><br><span class="line">        request.setAttribute(<span class="string">"list"</span>, list);</span><br><span class="line">        <span class="comment">// 3.转发到list.jsp</span></span><br><span class="line">        request.getRequestDispatcher(<span class="string">"/list.jsp"</span>).forward(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h6 id="④-UserService"><a href="#④-UserService" class="headerlink" title="④ UserService"></a>④ UserService</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 调用dao查询</span></span><br><span class="line">        UserDao userDao = <span class="keyword">new</span> UserDao();</span><br><span class="line">        <span class="comment">//  List&lt;User&gt; list = userDao.findAll();</span></span><br><span class="line">        <span class="keyword">return</span> userDao.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h6 id="⑤-UserDao"><a href="#⑤-UserDao" class="headerlink" title="⑤ UserDao"></a>⑤ UserDao</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 调用数据库查询</span></span><br><span class="line">        List&lt;User&gt; list = DataUtils.readAll();</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h6 id="⑥-list-jsp"><a href="#⑥-list-jsp" class="headerlink" title="⑥ list.jsp"></a>⑥ list.jsp</h6><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;c:forEach items=<span class="string">"$&#123;list&#125;"</span> <span class="keyword">var</span>=<span class="string">"user"</span>&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;td&gt;$&#123;user.id&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;$&#123;user.name&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;$&#123;user.sex&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;$&#123;user.age&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;$&#123;user.address&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;$&#123;user.qq&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;$&#123;user.email&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;</span><br><span class="line">            &lt;a class="btn btn-default btn-sm" href="update.jsp"&gt;修改&lt;/a&gt;</span><br><span class="line">            &amp;nbsp;&lt;a class="btn btn-default btn-sm" href=""&gt;删除&lt;/a&gt;</span><br><span class="line">        &lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">&lt;/c:forEach&gt;</span><br></pre></td></tr></table></figure>





<h4 id="3-添加用户功能"><a href="#3-添加用户功能" class="headerlink" title="3 添加用户功能"></a>3 添加用户功能</h4><p><strong>需求</strong></p>
<p>点击添加用户跳转添加用户页面，在添加用户页面，添加新的用户</p>
<h5 id="3-1-需求分析"><a href="#3-1-需求分析" class="headerlink" title="3.1 需求分析"></a>3.1 需求分析</h5><p><img src="/2020/04/29/summary_Web/1587785285009.png" alt="1587785285009"> </p>
<h5 id="3-2-代码实现"><a href="#3-2-代码实现" class="headerlink" title="3.2 代码实现"></a>3.2 代码实现</h5><h6 id="①-add-jsp"><a href="#①-add-jsp" class="headerlink" title="① add.jsp"></a>① add.jsp</h6><p><img src="/2020/04/29/summary_Web/1587785388952.png" alt="1587785388952"> </p>
<h6 id="②-AddServlet"><a href="#②-AddServlet" class="headerlink" title="② AddServlet"></a>② AddServlet</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/AddServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AddServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1.接收请求参数 map</span></span><br><span class="line">            Map&lt;String, String[]&gt; parameterMap = request.getParameterMap();</span><br><span class="line">            <span class="comment">// 2.快速封装user实体</span></span><br><span class="line">            User user = <span class="keyword">new</span> User();</span><br><span class="line">            BeanUtils.populate(user, parameterMap);</span><br><span class="line">            <span class="comment">// 3.调用service，添加user</span></span><br><span class="line">            UserService userService = <span class="keyword">new</span> UserService();</span><br><span class="line">            userService.add(user);</span><br><span class="line">            <span class="comment">// 4.重定向FindAllServlet</span></span><br><span class="line">            response.sendRedirect(request.getContextPath() + <span class="string">"/FindAllServlet"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InvocationTargetException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h6 id="③-UserService"><a href="#③-UserService" class="headerlink" title="③ UserService"></a>③ UserService</h6><p><img src="/2020/04/29/summary_Web/1587786208128.png" alt="1587786208128"> </p>
<h6 id="④-UserDao"><a href="#④-UserDao" class="headerlink" title="④ UserDao"></a>④ UserDao</h6><p><img src="/2020/04/29/summary_Web/1587786228205.png" alt="1587786228205"> </p>
<h4 id="4-删除用户功能"><a href="#4-删除用户功能" class="headerlink" title="4 删除用户功能"></a>4 删除用户功能</h4><p><strong>需求</strong></p>
<p>点击删除按钮删除当前一整行数据，删除之后重新查询全部展示删除效果</p>
<h5 id="4-1-需求分析"><a href="#4-1-需求分析" class="headerlink" title="4.1 需求分析"></a>4.1 需求分析</h5><p><img src="/2020/04/29/summary_Web/1587786860427.png" alt="1587786860427"> </p>
<h5 id="4-2-代码实现"><a href="#4-2-代码实现" class="headerlink" title="4.2 代码实现"></a>4.2 代码实现</h5><h6 id="①-list-jsp"><a href="#①-list-jsp" class="headerlink" title="① list.jsp"></a>① list.jsp</h6><p><img src="/2020/04/29/summary_Web/1587787042487.png" alt="1587787042487"> </p>
<h6 id="②-DeleteServlet"><a href="#②-DeleteServlet" class="headerlink" title="② DeleteServlet"></a>② DeleteServlet</h6><p><img src="/2020/04/29/summary_Web/1587787437317.png" alt="1587787437317"> </p>
<h6 id="③-UserService-1"><a href="#③-UserService-1" class="headerlink" title="③ UserService"></a>③ UserService</h6><p><img src="/2020/04/29/summary_Web/1587787454818.png" alt="1587787454818"> </p>
<h6 id="④-UserDao-1"><a href="#④-UserDao-1" class="headerlink" title="④ UserDao"></a>④ UserDao</h6><p><img src="/2020/04/29/summary_Web/1587787484267.png" alt="1587787484267"> </p>
<h4 id="5-修改用户功能"><a href="#5-修改用户功能" class="headerlink" title="5 修改用户功能"></a>5 修改用户功能</h4><h5 id="5-1-用户回显"><a href="#5-1-用户回显" class="headerlink" title="5.1 用户回显"></a>5.1 用户回显</h5><p><strong>需求</strong></p>
<p>点击”修改“按钮，跳转到更新页面（回显数据）</p>
<h6 id="5-1-1-需求分析"><a href="#5-1-1-需求分析" class="headerlink" title="5.1.1 需求分析"></a>5.1.1 需求分析</h6><p><img src="/2020/04/29/summary_Web/1587795243681.png" alt="1587795243681"> </p>
<h6 id="5-1-2-代码实现"><a href="#5-1-2-代码实现" class="headerlink" title="5.1.2 代码实现"></a>5.1.2 代码实现</h6><p>① list.jsp</p>
<p><img src="/2020/04/29/summary_Web/1587795752834.png" alt="1587795752834">  </p>
<p>② FindByIdServlet</p>
<p><img src="/2020/04/29/summary_Web/1587796218744.png" alt="1587796218744"> </p>
<p>③ UserService</p>
<p><img src="/2020/04/29/summary_Web/1587796232347.png" alt="1587796232347"> </p>
<p>④ UserDao</p>
<p><img src="/2020/04/29/summary_Web/1587796263253.png" alt="1587796263253"> </p>
<p>⑤ update.jsp</p>
<p><img src="/2020/04/29/summary_Web/1587796315291.png" alt="1587796315291"> </p>
<h5 id="5-2-修改用户"><a href="#5-2-修改用户" class="headerlink" title="5.2 修改用户"></a>5.2 修改用户</h5><p><strong>需求</strong></p>
<p>重写输入用户信息，点击提交，更新系统</p>
<h6 id="5-2-1-需求分析"><a href="#5-2-1-需求分析" class="headerlink" title="5.2.1 需求分析"></a>5.2.1 需求分析</h6><p><img src="/2020/04/29/summary_Web/1587796792807.png" alt="1587796792807"> </p>
<h6 id="5-2-2-代码实现"><a href="#5-2-2-代码实现" class="headerlink" title="5.2.2 代码实现"></a>5.2.2 代码实现</h6><p>① update.jsp</p>
<p><img src="/2020/04/29/summary_Web/1587796936278.png" alt="1587796936278"> </p>
<p>② UpdateServlet</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/UpdateServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UpdateServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1.接收请求参数</span></span><br><span class="line">            Map&lt;String, String[]&gt; parameterMap = request.getParameterMap();</span><br><span class="line">            <span class="comment">// 2.快速封装到user实体</span></span><br><span class="line">            User newUser = <span class="keyword">new</span> User();</span><br><span class="line">            BeanUtils.populate(newUser, parameterMap);</span><br><span class="line">            <span class="comment">// 3.调用service，更新</span></span><br><span class="line">            UserService userService = <span class="keyword">new</span> UserService();</span><br><span class="line">            userService.update(newUser);</span><br><span class="line">            <span class="comment">// 4.重定向，FindAllServlet</span></span><br><span class="line">            response.sendRedirect(request.getContextPath()+<span class="string">"/FindAllServlet"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InvocationTargetException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>③ UserService</p>
<p><img src="/2020/04/29/summary_Web/1587797730474.png" alt="1587797730474"> </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// .... 上面方法略...</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(User newUser)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 1.查询所有</span></span><br><span class="line">        List&lt;User&gt; list = DataUtils.readAll();</span><br><span class="line">        <span class="comment">// 2遍历</span></span><br><span class="line">        <span class="keyword">for</span> (User user : list) &#123;</span><br><span class="line">            <span class="comment">// 判断id是否一致</span></span><br><span class="line">            <span class="keyword">if</span> (user.getId().equalsIgnoreCase(newUser.getId())) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="comment">// 3.新的数据，覆盖旧的</span></span><br><span class="line">                   <span class="comment">/* user.setName(newUser.getName());</span></span><br><span class="line"><span class="comment">                    user.setAge(newUser.getAge());*/</span></span><br><span class="line">                    BeanUtils.copyProperties(user, newUser);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InvocationTargetException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 4.覆盖原有的数据库</span></span><br><span class="line">        DataUtils.writeAll(list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>







<h4 id="优化：Servlet"><a href="#优化：Servlet" class="headerlink" title="优化：Servlet"></a>优化：Servlet</h4><p>现在写代码遇到的问题：</p>
<p><img src="/2020/04/29/summary_Web/1587798105877.png" alt="1587798105877"> </p>
<p>优化解决这个问题</p>
<p><img src="/2020/04/29/summary_Web/1587798494835.png" alt="1587798494835"> </p>
<p><strong>了解如何修改？</strong>等到数据库阶段学完，还有一个综合案例，练习这种方案…</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/user"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 请求入口</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 判断请求action</span></span><br><span class="line">        String action = request.getParameter(<span class="string">"action"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (action.equals(<span class="string">"findAll"</span>)) &#123;</span><br><span class="line">            <span class="keyword">this</span>.findAll(request, response);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (action.equals(<span class="string">"add"</span>)) &#123;</span><br><span class="line">            <span class="keyword">this</span>.add(request, response);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    UserService userService = <span class="keyword">new</span> UserService();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 查询所有</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">findAll</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 1.调用service查询</span></span><br><span class="line">        List&lt;User&gt; list = userService.findAll();</span><br><span class="line">        <span class="comment">// 2.将list存储到request域</span></span><br><span class="line">        request.setAttribute(<span class="string">"list"</span>, list);</span><br><span class="line">        <span class="comment">// 3.转发到list.jsp</span></span><br><span class="line">        request.getRequestDispatcher(<span class="string">"/list.jsp"</span>).forward(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 新增</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1.接收请求参数 map</span></span><br><span class="line">            Map&lt;String, String[]&gt; parameterMap = request.getParameterMap();</span><br><span class="line">            <span class="comment">// 2.快速封装user实体</span></span><br><span class="line">            User user = <span class="keyword">new</span> User();</span><br><span class="line">            BeanUtils.populate(user, parameterMap);</span><br><span class="line">            <span class="comment">// 3.调用service，添加user</span></span><br><span class="line">            userService.add(user);</span><br><span class="line">            <span class="comment">// 4.重定向FindAllServlet</span></span><br><span class="line">            response.sendRedirect(request.getContextPath() + <span class="string">"/FindAllServlet"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InvocationTargetException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="二十二、"><a href="#二十二、" class="headerlink" title="二十二、"></a>二十二、</h3><h4 id="1-JSON数据与java对象转换"><a href="#1-JSON数据与java对象转换" class="headerlink" title="1. JSON数据与java对象转换"></a>1. JSON数据与java对象转换</h4><p><strong>使用jackson，需要导入jar包</strong></p>
<p><strong>提供了一个核心转换器对象</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ObjectMapper  om = <span class="keyword">new</span> ObjectMapper();</span><br></pre></td></tr></table></figure>

<h5 id="1-java对象转为json（字符串）"><a href="#1-java对象转为json（字符串）" class="headerlink" title="1. java对象转为json（字符串）"></a>1. java对象转为json（字符串）</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">String <span class="title">writeValueAsString</span><span class="params">(Object object)</span></span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将user对象转为json字符串</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">UserToJson</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    User user = <span class="keyword">new</span> User(<span class="string">"1"</span>, <span class="string">"lucy"</span>, <span class="string">"女"</span>, <span class="number">15</span>, <span class="string">"德克萨斯"</span>, <span class="string">"123"</span>, <span class="string">"123@qq.com"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 创建jackson转换器对象</span></span><br><span class="line">    ObjectMapper om = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将任意对象转为json字符串</span></span><br><span class="line">    String json = om.writeValueAsString(user);</span><br><span class="line">    System.out.println(json); <span class="comment">// 在java中name必须使用双引号包裹起来</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将map集合转为json字符串</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">MapToJson</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">"name"</span>, <span class="string">"张三"</span>);</span><br><span class="line">    map.put(<span class="string">"age"</span>, <span class="number">18</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 创建jackson转换器对象</span></span><br><span class="line">    ObjectMapper om = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// toJson</span></span><br><span class="line">    String json = om.writeValueAsString(map);</span><br><span class="line">    System.out.println(json); <span class="comment">//  &#123;"name":"张三","age":18&#125;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将list集合转为json数组字符串</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ListToJson</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    List&lt;User&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    list.add(<span class="keyword">new</span> User(<span class="string">"1"</span>, <span class="string">"lucy"</span>, <span class="string">"女"</span>, <span class="number">15</span>, <span class="string">"德克萨斯"</span>, <span class="string">"123"</span>, <span class="string">"123@qq.com"</span>));</span><br><span class="line">    list.add(<span class="keyword">new</span> User(<span class="string">"2"</span>, <span class="string">"jack"</span>, <span class="string">"男"</span>, <span class="number">15</span>, <span class="string">"德克萨斯"</span>, <span class="string">"123"</span>, <span class="string">"123@qq.com"</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 创建jackson转换器对象</span></span><br><span class="line">    ObjectMapper om = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// toJson</span></span><br><span class="line">    String json = om.writeValueAsString(list);</span><br><span class="line">    System.out.println(json); <span class="comment">// [&#123;&#125;,&#123;&#125;]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2-将json（字符串）转为java对象"><a href="#2-将json（字符串）转为java对象" class="headerlink" title="2.将json（字符串）转为java对象"></a>2.将json（字符串）转为java对象</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">T <span class="title">readValue</span><span class="params">(String json,Class&lt;T&gt; classType)</span></span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将json字符串转为user对象</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">JsonToUser</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    String json = <span class="string">"&#123;\"id\":\"1\",\"name\":\"lucy\",\"sex\":\"女\",\"age\":15,\"address\":\"德克萨斯\",\"qq\":\"123\",\"email\":\"123@qq.com\"&#125;"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 创建jackson转换器对象</span></span><br><span class="line">    ObjectMapper om = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// toUser</span></span><br><span class="line">    User user = om.readValue(json, User<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    System.out.println(user);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将json字符串转为map集合（如果你获取的json格式没有对应的java实体对象，就可以拿map接收）</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">JsonToMap</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    String json = <span class="string">"&#123;\"name\":\"lucy\",\"age\":18&#125;"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 创建jackson转换器对象</span></span><br><span class="line">    ObjectMapper om = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// toMap</span></span><br><span class="line">    Map&lt;String, Object&gt; map = om.readValue(json, Map<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    System.out.println(map);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将json数组字符串转为list集合</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">JsonToList</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    String json = <span class="string">"[&#123;\"id\":\"1\",\"name\":\"lucy\",\"sex\":\"女\",\"age\":15,\"address\":\"德克萨斯\",\"qq\":\"123\",\"email\":\"123@qq.com\"&#125;,&#123;\"id\":\"2\",\"name\":\"jack\",\"sex\":\"男\",\"age\":15,\"address\":\"德克萨斯\",\"qq\":\"123\",\"email\":\"123@qq.com\"&#125;]"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 创建jackson转换器对象</span></span><br><span class="line">    ObjectMapper om = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// toList</span></span><br><span class="line">    List list = om.readValue(json, List<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    System.out.println(list);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-案例"><a href="#2-案例" class="headerlink" title="2.案例"></a>2.案例</h4><p><strong>需求</strong></p>
<p>​    在用户注册页面，输入用户名，当用户名输入框失去焦点时，发送异步请求，将输入框的用户名传递给服务器进行是否存在的校验。</p>
<p><strong>技术分析</strong></p>
<p>此需求使用了ajax技术：通过<strong>异步提交</strong>实现页面的<strong>局部刷新</strong>，提高用户的体验</p>
<p><img src="/2020/04/29/summary_Web/1587868403078.png" alt="1587868403078"> </p>
<p><strong>代码实现</strong></p>
<p>① index.jsp</p>
<p><img src="/2020/04/29/summary_Web/1587868753719.png" alt="1587868753719"> </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;$&#123;NAME&#125;&lt;/title&gt;</span><br><span class="line">    &lt;script src="$&#123;pageContext.request.contextPath&#125;/js/jquery-3.2.1.js"&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h3&gt;用户注册&lt;/h3&gt;</span><br><span class="line">&lt;form action=<span class="string">"#"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">    用户名：&lt;input type="text" name="username" id="username"&gt; &lt;span id="userwarn"&gt;&lt;/span&gt; &lt;br&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="comment">// 给用户文本框绑定失去焦点事件</span></span><br><span class="line">    $(<span class="string">'#username'</span>).blur(function () &#123;</span><br><span class="line">        <span class="comment">// 获取用户输入的值</span></span><br><span class="line">        console.log(<span class="keyword">this</span>.value);</span><br><span class="line">        let data = <span class="string">"username="</span> + <span class="keyword">this</span>.value;</span><br><span class="line">        <span class="comment">// 发送ajax请求</span></span><br><span class="line">        $.ajax(&#123;</span><br><span class="line">            type:<span class="string">"post"</span>,</span><br><span class="line">            url:<span class="string">'$&#123;pageContext.request.contextPath&#125;/CheckServlet'</span>,</span><br><span class="line">            data:data,</span><br><span class="line">            success:function (resp) &#123;</span><br><span class="line">                console.log(resp);</span><br><span class="line">                <span class="comment">// 判断结果并实现局部刷新</span></span><br><span class="line">                <span class="keyword">if</span>(resp.flag)&#123;</span><br><span class="line">                    $(<span class="string">'#userwarn'</span>).text(resp.msg).css(<span class="string">'color'</span>,<span class="string">'green'</span>);</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    $(<span class="string">'#userwarn'</span>).text(resp.msg).css(<span class="string">'color'</span>,<span class="string">'red'</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>② CheckServlet</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/CheckServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CheckServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        request.setCharacterEncoding(<span class="string">"utf-8"</span>);</span><br><span class="line">        <span class="comment">// 1.接收请求参数</span></span><br><span class="line">        String username = request.getParameter(<span class="string">"username"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.声明map集合</span></span><br><span class="line">        Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.判断用户是否存在</span></span><br><span class="line">        <span class="keyword">if</span>(username.equals(<span class="string">"jack"</span>))&#123;</span><br><span class="line">            map.put(<span class="string">"flag"</span>,<span class="keyword">false</span>);</span><br><span class="line">            map.put(<span class="string">"msg"</span>, <span class="string">"× 此用户已注册"</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            map.put(<span class="string">"flag"</span>,<span class="keyword">true</span>);</span><br><span class="line">            map.put(<span class="string">"msg"</span>, <span class="string">"√ 此用户可以注册"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4.将map集合转为json字符串</span></span><br><span class="line">        ObjectMapper om = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line">        String json = om.writeValueAsString(map);</span><br><span class="line">        System.out.println(json);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 5.设置json的MIME类型</span></span><br><span class="line">        response.setContentType(<span class="string">"application/json;charset=utf-8"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 6.response响应json到客户端</span></span><br><span class="line">        response.getWriter().write(json);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <div>
  
    <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div>
    
</div>


  
</div>

    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>谢谢你请我吃糖果^_^</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatpay.jpg" alt="阿松 微信支付"/>
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.jpg" alt="阿松 支付宝"/>
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    
      <div>
        <ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者：</strong>
    阿松
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://wanghaisong0-0.github.io/2020/04/29/summary_Web/" title="Web总结">https://wanghaisong0-0.github.io/2020/04/29/summary_Web/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>
    本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！
  </li>
</ul>

      </div>
    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/%E6%80%BB%E7%BB%93/" rel="tag"><i class="fa fa-tag"></i> 总结</a>
          
            <a href="/tags/Web/" rel="tag"><i class="fa fa-tag"></i> Web</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/04/25/hello-world/" rel="next" title="Hello World">
                <i class="fa fa-chevron-left"></i> Hello World
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/05/06/summary_MySQL/" rel="prev" title="MySQL总结">
                MySQL总结 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/5.JPG"
                alt="阿松" />
            
              <p class="site-author-name" itemprop="name">阿松</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%7C%7C%20archive">
              
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/wanghaisong0-0" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
            </div>
          

          
          
            <div class="cc-license motion-element" itemprop="license">
              <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" target="_blank">
                <img src="/images/cc-by-nc-sa.svg" alt="Creative Commons" />
              </a>
            </div>
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#摘要"><span class="nav-text">摘要</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#一、HTML"><span class="nav-text">一、HTML</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-概述"><span class="nav-text">1.概述</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-1-标准前端目录结构"><span class="nav-text">1.1 标准前端目录结构</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#1-2书写规范"><span class="nav-text">1.2书写规范</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-常用HTML标签"><span class="nav-text">2.常用HTML标签</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#2-1标题"><span class="nav-text">2.1标题</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-2水平线"><span class="nav-text">2.2水平线</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-3段落和换行标签"><span class="nav-text">2.3段落和换行标签</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-3超链接"><span class="nav-text">2.3超链接</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-4图像"><span class="nav-text">2.4图像</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-5列表"><span class="nav-text">2.5列表</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-6div和span"><span class="nav-text">2.6div和span</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-7转义（实体）字符"><span class="nav-text">2.7转义（实体）字符</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-8基本表格"><span class="nav-text">2.8基本表格</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-9表格合并"><span class="nav-text">2.9表格合并</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-HTML表单"><span class="nav-text">3.HTML表单</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#二、CSS"><span class="nav-text">二、CSS</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-HTML引入CSS"><span class="nav-text">1.HTML引入CSS</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-基本选择器"><span class="nav-text">2.基本选择器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-扩展选择器"><span class="nav-text">3.扩展选择器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-背景属性"><span class="nav-text">4.背景属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-显示属性"><span class="nav-text">5.显示属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-浮动属性"><span class="nav-text">6.浮动属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-盒子模型"><span class="nav-text">7.盒子模型</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#三、JavaScript"><span class="nav-text">三、JavaScript</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-HTML引入JS"><span class="nav-text">1.HTML引入JS</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-JS三种输出方式"><span class="nav-text">2.JS三种输出方式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-JS变量声明"><span class="nav-text">3.JS变量声明</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-JS数据类型"><span class="nav-text">4.JS数据类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-JS运算符"><span class="nav-text">5.JS运算符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-JS流程控制"><span class="nav-text">6.JS流程控制</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-条件判断"><span class="nav-text">1.条件判断</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-循环语句"><span class="nav-text">2.循环语句</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-js函数"><span class="nav-text">7.js函数</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-普通函数"><span class="nav-text">1.普通函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-匿名函数"><span class="nav-text">2.匿名函数</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-js事件"><span class="nav-text">8.js事件</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-常用事件"><span class="nav-text">1.常用事件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-事件绑定"><span class="nav-text">2.事件绑定</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#9-js常用内置对象"><span class="nav-text">9.js常用内置对象</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-String"><span class="nav-text">1.String</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-Array-对象"><span class="nav-text">2. Array 对象</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-Date对象"><span class="nav-text">3.Date对象</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-Math对象"><span class="nav-text">4.Math对象</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-全局函数"><span class="nav-text">5.全局函数</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#10-BOM对象"><span class="nav-text">10.BOM对象</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-三种弹框方式"><span class="nav-text">1.三种弹框方式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-二种定时器方式"><span class="nav-text">2.二种定时器方式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-Location对象"><span class="nav-text">3.Location对象</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#11-DOM对象"><span class="nav-text">11.DOM对象</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-DOM获取元素"><span class="nav-text">1.DOM获取元素</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-DOM操作内容"><span class="nav-text">2.DOM操作内容</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-DOM操作属性"><span class="nav-text">3.DOM操作属性</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-DOM操作样式"><span class="nav-text">4.DOM操作样式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-DOM操作元素（标签）"><span class="nav-text">5.DOM操作元素（标签）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#6-正则表达式"><span class="nav-text">6.正则表达式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7-练习"><span class="nav-text">7.练习</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-密码校验"><span class="nav-text">1.密码校验</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-商品全选"><span class="nav-text">2.商品全选</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-省市联动"><span class="nav-text">3.省市联动</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-隔行换色"><span class="nav-text">4.隔行换色</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#四、JQuery框架"><span class="nav-text">四、JQuery框架</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-HTML引入jQuery"><span class="nav-text">1.HTML引入jQuery</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-jQuery与JS区别"><span class="nav-text">2.jQuery与JS区别</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-Jquery选择器"><span class="nav-text">3.Jquery选择器</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-基本选择器"><span class="nav-text">1.基本选择器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-层级关系选择器"><span class="nav-text">2. 层级关系选择器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-属性选择器"><span class="nav-text">3.属性选择器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-过滤选择器"><span class="nav-text">4.过滤选择器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-对象遍历"><span class="nav-text">5.对象遍历</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#五、Jquery的DOM操作"><span class="nav-text">五、Jquery的DOM操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-Jquery操作内容"><span class="nav-text">1.Jquery操作内容</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-Jquery操作属性"><span class="nav-text">2.Jquery操作属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-Jquery操作样式"><span class="nav-text">3. Jquery操作样式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-Jquery操作元素"><span class="nav-text">4.Jquery操作元素</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-Jquery事件绑定"><span class="nav-text">5.Jquery事件绑定</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-案例"><span class="nav-text">6.案例</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-隔行换色"><span class="nav-text">1.隔行换色</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-商品全选-1"><span class="nav-text">2.商品全选</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-QQ表情"><span class="nav-text">3.QQ表情</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#六、JSON"><span class="nav-text">六、JSON</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-概述-1"><span class="nav-text">1.概述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-语法"><span class="nav-text">2.语法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-JSON格式转换"><span class="nav-text">3.JSON格式转换</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#七、AJAX"><span class="nav-text">七、AJAX</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-JS原生AJAX"><span class="nav-text">1.JS原生AJAX</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-案例需求"><span class="nav-text">1.案例需求</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-代码实现"><span class="nav-text">2.代码实现</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-JQuery的Ajax插件"><span class="nav-text">2.JQuery的Ajax插件</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-ajax函数"><span class="nav-text">1.ajax函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-get函数"><span class="nav-text">2.get函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-post函数"><span class="nav-text">3.post函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-同步和异步"><span class="nav-text">4.同步和异步</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-案例"><span class="nav-text">5.案例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#八、Tomcat"><span class="nav-text">八、Tomcat</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-Tomcat使用"><span class="nav-text">1. Tomcat使用</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-下载"><span class="nav-text">1.下载</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-安装"><span class="nav-text">2.安装</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-目录结构"><span class="nav-text">3.目录结构</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-启动和关闭"><span class="nav-text">4.启动和关闭</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-启动报错问题"><span class="nav-text">5.启动报错问题</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#6-访问测试"><span class="nav-text">6.访问测试</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-发布项目三种方式"><span class="nav-text">2.发布项目三种方式</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-webapps-部署-最简单"><span class="nav-text">1.webapps 部署(最简单)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-server-xml部署"><span class="nav-text">2.server.xml部署</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-独立xml部署-开发时使用"><span class="nav-text">3.独立xml部署(开发时使用)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-web的项目结构"><span class="nav-text">3.web的项目结构</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-Idea中使用Tomcat"><span class="nav-text">3.Idea中使用Tomcat</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-配置Tomcat"><span class="nav-text">1. 配置Tomcat</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-创建Web项目"><span class="nav-text">2.创建Web项目</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-页面资源热更新"><span class="nav-text">3.页面资源热更新</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#九、Http协议"><span class="nav-text">九、Http协议</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-HTTP请求"><span class="nav-text">1.HTTP请求</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-浏览器查看Http请求协议"><span class="nav-text">1.浏览器查看Http请求协议</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-get方式"><span class="nav-text">1.get方式</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-post方式"><span class="nav-text">2.post方式</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-HTTP请求消息格式"><span class="nav-text">2.HTTP请求消息格式</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-请求行"><span class="nav-text">1.请求行</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-请求头"><span class="nav-text">2.请求头</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-请求体（正文）"><span class="nav-text">3.请求体（正文）</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-HTTP响应头"><span class="nav-text">3.HTTP响应头</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-浏览器查看Http响应协议"><span class="nav-text">1.浏览器查看Http响应协议</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-HTTP响应消息格式"><span class="nav-text">2.HTTP响应消息格式</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-响应行"><span class="nav-text">1.响应行</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-响应头"><span class="nav-text">2.响应头</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-响应体（正文）"><span class="nav-text">3.响应体（正文）</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#十、Servlet"><span class="nav-text">十、Servlet</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-代码编写"><span class="nav-text">1.代码编写</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-编写普通java类，实现servlet接口"><span class="nav-text">1.编写普通java类，实现servlet接口</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-配置web-xml"><span class="nav-text">2.配置web.xml</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-部署web项目"><span class="nav-text">3.部署web项目</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-启动测试"><span class="nav-text">4.启动测试</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-执行原理"><span class="nav-text">5.执行原理</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-Servlet相关API"><span class="nav-text">2.Servlet相关API</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-生命周期"><span class="nav-text">1.生命周期</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-ServletConfig"><span class="nav-text">2.ServletConfig</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-Servlet体系结构"><span class="nav-text">3.Servlet体系结构</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-GenericServlet"><span class="nav-text">1.GenericServlet</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-HttpServlet"><span class="nav-text">2.HttpServlet</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-报错信息"><span class="nav-text">4.报错信息</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-响应状态码405"><span class="nav-text">1.响应状态码405</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-响应状态码500"><span class="nav-text">2.响应状态码500</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-Servlet路径"><span class="nav-text">5.Servlet路径</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#5-1-url-pattern"><span class="nav-text">5.1 url-pattern</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#5-1-1-Servlet映射多个url"><span class="nav-text">5.1.1 Servlet映射多个url</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#5-1-2-url映射模式【了解】"><span class="nav-text">5.1.2 url映射模式【了解】</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-2-相对-绝对路径"><span class="nav-text">5.2 相对&#x2F;绝对路径</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-Servlet3-0"><span class="nav-text">6. Servlet3.0</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#①-创建web工程【注解】"><span class="nav-text">① 创建web工程【注解】</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#②-编写普通java类，继承HttpServlet"><span class="nav-text">② 编写普通java类，继承HttpServlet</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#③-配置-WebServlet"><span class="nav-text">③ 配置@WebServlet</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#十一、Request"><span class="nav-text">十一、Request</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-获取请求行信息"><span class="nav-text">1. 获取请求行信息</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-获取请求头信息"><span class="nav-text">2.获取请求头信息</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#①-案例：视频防盗链"><span class="nav-text">① 案例：视频防盗链</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#②-案例：浏览器兼容性"><span class="nav-text">② 案例：浏览器兼容性</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-获取请求参数（体）"><span class="nav-text">3.获取请求参数（体）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-BeanUtils"><span class="nav-text">4.BeanUtils</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#①导入jar包"><span class="nav-text">①导入jar包</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#②-使用工具类封装数据"><span class="nav-text">② 使用工具类封装数据</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-请求转发"><span class="nav-text">5.请求转发</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-域对象（共享数据）"><span class="nav-text">6.域对象（共享数据）</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#十二、ServletContext"><span class="nav-text">十二、ServletContext</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-概述-2"><span class="nav-text">1.概述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-域对象（共享数据）"><span class="nav-text">2.域对象（共享数据）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-获取资源在服务器的真实地址"><span class="nav-text">3.获取资源在服务器的真实地址</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-获取全局的配置参数"><span class="nav-text">4.获取全局的配置参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-获取文件MIME类型"><span class="nav-text">5. 获取文件MIME类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-网站访问次数"><span class="nav-text">6.网站访问次数</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#十三、Response"><span class="nav-text">十三、Response</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-设置Http响应消息"><span class="nav-text">1. 设置Http响应消息</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-响应重定向"><span class="nav-text">2. 响应重定向</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-响应定时刷新"><span class="nav-text">3. 响应定时刷新</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-响应中文"><span class="nav-text">4. 响应中文</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-文件下载"><span class="nav-text">5. 文件下载</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#5-1-使用链接下载文件"><span class="nav-text">5.1 使用链接下载文件</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#①-将资料中的下载素材复制到web项目中"><span class="nav-text">① 将资料中的下载素材复制到web项目中</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#②-编写下载页面"><span class="nav-text">② 编写下载页面</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#③-缺点"><span class="nav-text">③ 缺点</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-2-使用Servlet下载文件【推荐…-】"><span class="nav-text">5.2 使用Servlet下载文件【推荐….】</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#①-download-html"><span class="nav-text">① download.html</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#②-DownLoadServlet"><span class="nav-text">② DownLoadServlet</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#③-中文乱码"><span class="nav-text">③ 中文乱码</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#④-hutool工具包…"><span class="nav-text">④ hutool工具包…..</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#十四、Cookie"><span class="nav-text">十四、Cookie</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-会话技术"><span class="nav-text">1.会话技术</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-概述"><span class="nav-text">2.概述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-快速入门"><span class="nav-text">3.快速入门</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-Cookie细节"><span class="nav-text">4.Cookie细节</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-服务器发送多个Cookie？"><span class="nav-text">1.服务器发送多个Cookie？</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-Cookie在浏览器保存时间？"><span class="nav-text">2.Cookie在浏览器保存时间？</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-Cookie是否可以存储中文？"><span class="nav-text">3. Cookie是否可以存储中文？</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-Cookie共享数据的范围？"><span class="nav-text">4. Cookie共享数据的范围？</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-在一个tomca服务器中，部署了多个web项目，那么这些web项目的Cookie能否共享？"><span class="nav-text">1. 在一个tomca服务器中，部署了多个web项目，那么这些web项目的Cookie能否共享？</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-不同tomcat服务器之间Cookie能否共享？"><span class="nav-text">2.不同tomcat服务器之间Cookie能否共享？</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-Cookie特点"><span class="nav-text">5. Cookie特点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-综合案例"><span class="nav-text">6.综合案例</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-用户上次访问记录"><span class="nav-text">1.用户上次访问记录</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-1-需求分析"><span class="nav-text">1.1 需求分析</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#1-2-代码实现"><span class="nav-text">1.2 代码实现</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-商品浏览记录"><span class="nav-text">2.商品浏览记录</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#2-1-需求分析"><span class="nav-text">2.1 需求分析</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-2-代码实现"><span class="nav-text">2.2 代码实现</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#①-goods-html"><span class="nav-text">① goods.html</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#②-GoodsInfoServlet"><span class="nav-text">② GoodsInfoServlet</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#③-history-jsp"><span class="nav-text">③ history.jsp</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#十五、Session"><span class="nav-text">十五、Session</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-概述-3"><span class="nav-text">1.概述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-快速入门"><span class="nav-text">2.快速入门</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-工作原理"><span class="nav-text">3.工作原理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-Session细节"><span class="nav-text">4.Session细节</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#4-1-客户端关闭，服务器不关闭"><span class="nav-text">4.1 客户端关闭，服务器不关闭</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-2-客户端不关闭，服务器关闭"><span class="nav-text">4.2 客户端不关闭，服务器关闭</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-3-生命周期"><span class="nav-text">4.3 生命周期</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-Session特点"><span class="nav-text">5. Session特点</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#十六、三大域对象总结"><span class="nav-text">十六、三大域对象总结</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-API"><span class="nav-text">1. API</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-生命周期"><span class="nav-text">2. 生命周期</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#2-1-ServletContext域对象"><span class="nav-text">2.1 ServletContext域对象</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-2-HttpSession域对象"><span class="nav-text">2.2 HttpSession域对象</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-3-HttpServletRequest域对象"><span class="nav-text">2.3 HttpServletRequest域对象</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-小结"><span class="nav-text">3. 小结</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-案例"><span class="nav-text">4.案例</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#4-1-商品购物车"><span class="nav-text">4.1 商品购物车</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#4-1-1-需求分析"><span class="nav-text">4.1.1 需求分析</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-1-2-代码实现"><span class="nav-text">4.1.2 代码实现</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-2-用户登录（验证码）"><span class="nav-text">4.2 用户登录（验证码）</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#4-2-1-需求分析"><span class="nav-text">4.2.1 需求分析</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-2-2-代码实现"><span class="nav-text">4.2.2 代码实现</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#十七、JSP"><span class="nav-text">十七、JSP</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-脚本和注释"><span class="nav-text">1.脚本和注释</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-脚本"><span class="nav-text">1.脚本</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-注释"><span class="nav-text">2.注释</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-指令"><span class="nav-text">2.指令</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#2-1page指令"><span class="nav-text">2.1page指令</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-2-include指令（静态包含）"><span class="nav-text">2.2 include指令（静态包含）</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-内置对象"><span class="nav-text">3.内置对象</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-JSP动作标签"><span class="nav-text">4.JSP动作标签</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#4-1动态包含"><span class="nav-text">4.1动态包含</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-2-请求转发"><span class="nav-text">4.2 请求转发</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#十八、MVC模式-amp-EL-amp-JSTL-amp-三层架构"><span class="nav-text">十八、MVC模式&amp;EL&amp;JSTL&amp;三层架构</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-EL"><span class="nav-text">1.EL</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-1使用"><span class="nav-text">1.1使用</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-获取（域中的）值"><span class="nav-text">1.获取（域中的）值</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-执行运算"><span class="nav-text">2.执行运算</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-隐式对象"><span class="nav-text">3.隐式对象</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#1-2-JavaBean"><span class="nav-text">1.2 JavaBean</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-JSTL"><span class="nav-text">2.JSTL</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-常用标签"><span class="nav-text">1.常用标签</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-c-if标签"><span class="nav-text">1.  c:if标签</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-c-forEach标签"><span class="nav-text">2.  c:forEach标签</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-c-choose标签"><span class="nav-text">3.   c:choose标签</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-三层架构（MVC升级版）"><span class="nav-text">3.三层架构（MVC升级版）</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#3-1-概述"><span class="nav-text">3.1 概述</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#十九、Filter"><span class="nav-text">十九、Filter</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-快速入门"><span class="nav-text">1.快速入门</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-xml配置"><span class="nav-text">1. xml配置</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-编写java类，实现filter接口"><span class="nav-text">1.编写java类，实现filter接口</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-配置web-xml-1"><span class="nav-text">2.配置web.xml</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-注解配置"><span class="nav-text">2. 注解配置</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-编写java类，实现filter接口-1"><span class="nav-text">1. 编写java类，实现filter接口</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-配置-WebFilter"><span class="nav-text">2.配置@WebFilter</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-使用细节"><span class="nav-text">2.  使用细节</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-生命周期-1"><span class="nav-text">1.生命周期</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-拦截路径"><span class="nav-text">2.拦截路径</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-拦截方式"><span class="nav-text">3.  拦截方式</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-xml版本"><span class="nav-text">1.  xml版本</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-注解版本"><span class="nav-text">2.  注解版本</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-过滤器链"><span class="nav-text">4.  过滤器链</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-案例"><span class="nav-text">3.案例</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#①-b-jsp"><span class="nav-text">① b.jsp</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#②-WordsServlet"><span class="nav-text">② WordsServlet</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#③-同一网站编码"><span class="nav-text">③ 同一网站编码</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#非法字符拦截"><span class="nav-text">非法字符拦截</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#④WordsFilter"><span class="nav-text">④WordsFilter</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#非法字符过滤"><span class="nav-text">非法字符过滤</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#①-自定义MyRequest"><span class="nav-text">① 自定义MyRequest</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#②-编写WordsProFilter"><span class="nav-text">② 编写WordsProFilter</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#二十、Listener"><span class="nav-text">二十、Listener</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-概述-4"><span class="nav-text">1.概述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-快速入门-1"><span class="nav-text">2.快速入门</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#①-xml版本"><span class="nav-text">① xml版本</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#②-注解版本"><span class="nav-text">② 注解版本</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-案例-1"><span class="nav-text">3.案例</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-技术分析"><span class="nav-text">1 技术分析</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-需求分析"><span class="nav-text">2 需求分析</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-代码实现"><span class="nav-text">3 代码实现</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#①-IitNumberListener"><span class="nav-text">① IitNumberListener</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#②-NumberChangeListener"><span class="nav-text">② NumberChangeListener</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#③-index-jsp"><span class="nav-text">③ index.jsp</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#④-LogoutServlet"><span class="nav-text">④ LogoutServlet</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#二十一、综合案例"><span class="nav-text">二十一、综合案例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-环境搭建"><span class="nav-text">1 环境搭建</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#①-创建web项目"><span class="nav-text">① 创建web项目</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#②-导入第三方jar包"><span class="nav-text">② 导入第三方jar包</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#③-导入页面资源"><span class="nav-text">③ 导入页面资源</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#④-搭建三层包目录结构"><span class="nav-text">④ 搭建三层包目录结构</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#⑤-导入-User实体类"><span class="nav-text">⑤ 导入 User实体类</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#⑥-导入DataUtils工具类（模拟数据库）"><span class="nav-text">⑥ 导入DataUtils工具类（模拟数据库）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#⑦-启动测试"><span class="nav-text">⑦ 启动测试</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-用户查询功能"><span class="nav-text">2 用户查询功能</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#2-1-需求分析-1"><span class="nav-text">2.1 需求分析</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-2-代码实现-1"><span class="nav-text">2.2 代码实现</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#①-index-jsp"><span class="nav-text">① index.jsp</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#②-EncodeFilter"><span class="nav-text">② EncodeFilter</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#③-FindAllServlet"><span class="nav-text">③ FindAllServlet</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#④-UserService"><span class="nav-text">④ UserService</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#⑤-UserDao"><span class="nav-text">⑤ UserDao</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#⑥-list-jsp"><span class="nav-text">⑥ list.jsp</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-添加用户功能"><span class="nav-text">3 添加用户功能</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#3-1-需求分析"><span class="nav-text">3.1 需求分析</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-2-代码实现"><span class="nav-text">3.2 代码实现</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#①-add-jsp"><span class="nav-text">① add.jsp</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#②-AddServlet"><span class="nav-text">② AddServlet</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#③-UserService"><span class="nav-text">③ UserService</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#④-UserDao"><span class="nav-text">④ UserDao</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-删除用户功能"><span class="nav-text">4 删除用户功能</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#4-1-需求分析"><span class="nav-text">4.1 需求分析</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-2-代码实现"><span class="nav-text">4.2 代码实现</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#①-list-jsp"><span class="nav-text">① list.jsp</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#②-DeleteServlet"><span class="nav-text">② DeleteServlet</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#③-UserService-1"><span class="nav-text">③ UserService</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#④-UserDao-1"><span class="nav-text">④ UserDao</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-修改用户功能"><span class="nav-text">5 修改用户功能</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#5-1-用户回显"><span class="nav-text">5.1 用户回显</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#5-1-1-需求分析"><span class="nav-text">5.1.1 需求分析</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#5-1-2-代码实现"><span class="nav-text">5.1.2 代码实现</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-2-修改用户"><span class="nav-text">5.2 修改用户</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#5-2-1-需求分析"><span class="nav-text">5.2.1 需求分析</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#5-2-2-代码实现"><span class="nav-text">5.2.2 代码实现</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#优化：Servlet"><span class="nav-text">优化：Servlet</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#二十二、"><span class="nav-text">二十二、</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-JSON数据与java对象转换"><span class="nav-text">1. JSON数据与java对象转换</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-java对象转为json（字符串）"><span class="nav-text">1. java对象转为json（字符串）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-将json（字符串）转为java对象"><span class="nav-text">2.将json（字符串）转为java对象</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-案例"><span class="nav-text">2.案例</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">阿松</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">83.2k</span>
  
</div>

<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  本站访客数:<span id="busuanzi_value_site_pv"></span>
</span>
</div>









        







        
      </div>
    </footer>

    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'gWpNvmPBHkSqTm4htXunAooL-gzGzoHsz',
        appKey: 'JAeboLacm9m2rD8qC2veu2pN',
        placeholder: '期待你的留言！文明交流哟！',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("gWpNvmPBHkSqTm4htXunAooL-gzGzoHsz", "JAeboLacm9m2rD8qC2veu2pN");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  

  

  

  

</body>
</html>
